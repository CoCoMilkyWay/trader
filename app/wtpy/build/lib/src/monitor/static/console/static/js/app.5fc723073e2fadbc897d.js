webpackJsonp([1],{"0/Yr":function(t,e){},"0CAg":function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjA3LjQxIiBoZWlnaHQ9IjE0LjU2NSIgdmlld0JveD0iMCAwIDIwNy40MSAxNC41NjUiPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIwLjUiIHgyPSIwLjUiIHkyPSIxIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzJjODdmYSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuODciIHN0b3AtY29sb3I9IiMxODQ4ODQiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMDc1OWJmIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQtMiIgeDE9IjAuNSIgeDI9IjAuNSIgeTI9IjEiIGdyYWRpZW50VW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZTRlNGU0Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMC44ODciIHN0b3AtY29sb3I9IiM3OTc5NzkiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjY2VjZWNlIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQtMyIgeDE9IjAuNSIgeDI9IjAuNSIgeTI9IjEiIGdyYWRpZW50VW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMmM4N2ZhIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMC44ODMiIHN0b3AtY29sb3I9IiMxODQ4ODQiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMDc1OWJmIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBpZD0iV1RfY29uc29sZV9sb2dvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIyLjQ5MSAtNzI4Ljg0NSkiPgogICAgPGcgaWQ9Iue7hF84MTAiIGRhdGEtbmFtZT0i57uEIDgxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYyLjkwMSA3MjguODQ1KSI+CiAgICAgIDxwYXRoIGlkPSLogZTlkIhfMiIgZGF0YS1uYW1lPSLogZTlkIggMiIgZD0iTTE1LjIyMiwxMy44MTdhMi4wMTEsMi4wMTEsMCwwLDEtLjY3Ni0yLjNsMS4zNjYtNS44NDFhMy44MTgsMy44MTgsMCwwLDEsMS44ODEtMi4wMzksNi44Myw2LjgzLDAsMCwxLDIuNzU3LS43OGguMjc5YTQuMzU3LDQuMzU3LDAsMCwxLDIuNDg4LjcsMS44MTIsMS44MTIsMCwwLDEsLjcwNSwyLjExOGwtMS4zNjUsNS44NDFhMy4zMDksMy4zMDksMCwwLDEtMS43NDksMi4xOTMsNi43NDUsNi43NDUsMCwwLDEtMi45Ljg1NmgtLjNsLS4xMDgsMEE0LjE1LDQuMTUsMCwwLDEsMTUuMjIyLDEzLjgxN1ptMS42LTUuODY2LDIuMzQ5Ljg1TDE2LjMsMTIuNmw1LjIyOS0zLjQyOC0yLjE5LS44MTcsMi44NjYtMy44Wm0xNy4zNDEsNS44OGEyLjUwNSwyLjUwNSwwLDAsMS0uMzQ5LTIuMTkxbDEuNC01Ljk3N2EuMDUzLjA1MywwLDAsMCwwLS4wMzkuMDgyLjA4MiwwLDAsMSwwLS4wNGwuMDA1LS4wMmEuMy4zLDAsMCwwLDAtLjA3NywzLjQzMywzLjQzMywwLDAsMSwxLjI2Ni0yLjEsMy4xNDksMy4xNDksMCwwLDEsMS44NTItLjY3OSwyLjIsMi4yLDAsMCwxLC4yOTQuMDE5bC4yODkuMDM5YTIuNDE3LDIuNDE3LDAsMCwxLC45NjguNDU1LDEuNzg2LDEuNzg2LDAsMCwxLC42Mi44NjRMNDEuNDQ4LjAzM2gzLjE5TDQxLjMwNSwxNC4yNzZIMzguMTEybC4yMjYtLjk2OWEzLjI3NiwzLjI3NiwwLDAsMS0uOTQ4Ljc3NiwzLjU2NCwzLjU2NCwwLDAsMS0xLjA0OC4zOSwyLjcxNSwyLjcxNSwwLDAsMS0uMzEyLjA1NiwyLjIzNywyLjIzNywwLDAsMS0uMy4wMkgzNS43QTIsMiwwLDAsMSwzNC4xNiwxMy44MzJabTQuNjY4LTguMzkzYTEuMTYyLDEuMTYyLDAsMCwwLS4zNzIuNjMxTDM3LjE4NSwxMS41YS44ODMuODgzLDAsMCwwLC4wMjguNjEyLjQ1Ny40NTcsMCwwLDAsLjMyMS4yNjJIMzcuNmEuNzQ1Ljc0NSwwLDAsMCwuMTItLjAxLjU3My41NzMsMCwwLDAsLjEtLjAyOSwxLjU1OCwxLjU1OCwwLDAsMCwuNjA3LS40MDcsMS42LDEuNiwwLDAsMCwuNDE3LS43NzZsLjA0NC0uMkw0MCw2LjIwNWExLjExMiwxLjExMiwwLDAsMC0uMDE2LS43MDguNTI4LjUyOCwwLDAsMC0uMzQxLS4zMjEuNC40LDAsMCwwLS4wNzctLjAyOC4zNjIuMzYyLDAsMCwwLS4wODItLjAxaC0uMTA4QTEuMjYsMS4yNiwwLDAsMCwzOC44MjgsNS40MzlabTguMjQyLDkuMTA2YTQuNyw0LjcsMCwwLDEtMi45ODQtLjksMi4zMDYsMi4zMDYsMCwwLDEtLjYwNS0yLjE0NUw0NC44NDgsNS42NmEzLjEyLDMuMTIsMCwwLDEsMS40ODMtMS45N0E2LjIzMyw2LjIzMywwLDAsMSw0OC44LDIuNzY3YTIuMTEyLDIuMTEyLDAsMCwxLC4zNTMtLjA0OWMuMTEzLS4wMDYuMjI4LS4wMS4zNDMtLjAxYTMuODU4LDMuODU4LDAsMCwxLDIuNDQxLjYyLDIuNjI0LDIuNjI0LDAsMCwxLC45NDgsMS4zNTgsMy4wOTQsMy4wOTQsMCwwLDEsLjA3LjY0OSwyLjU2OCwyLjU2OCwwLDAsMS0uMDY0LjU5Mkw1Mi4xNTEsOS4xMWgtNC43N0w0Ni44MjMsMTEuNWEuOTA3LjkwNywwLDAsMCwuMDY2Ljc2OC41NjYuNTY2LDAsMCwwLC40NjYuMjQxaC4xMDVBMS4xMjIsMS4xMjIsMCwwLDAsNDgsMTIuMjQ0YTEuMDc5LDEuMDc5LDAsMCwwLC4zNjYtLjYxM2wuMzg1LTEuNjVoMy4ybC0uNDQzLDEuOWEzLjA0NSwzLjA0NSwwLDAsMS0xLjUzMiwxLjksNS41MjksNS41MjksMCwwLDEtMi43OTUuNzU5Wk00OC41NDQsNS4xYS45NzcuOTc3LDAsMCwwLS4zNTEuNTUzTDQ3LjksNi45aDEuNTc2bC4yOS0xLjI0MmEuNjcyLjY3MiwwLDAsMC0uMDU2LS41MzUuNi42LDAsMCwwLS4zNTMtLjI2MS4zMy4zMywwLDAsMS0uMDg0LS4wMS4zNS4zNSwwLDAsMC0uMDg0LS4wMWgtLjEwN0ExLjE0MiwxLjE0MiwwLDAsMCw0OC41NDQsNS4xWk03Ny40LDE0LjUyMmgtLjE1OWEuODc2Ljg3NiwwLDAsMS0uMTU2LS4wMTksMi4yOTEsMi4yOTEsMCwwLDEtMS40MjctLjU5M3EtLjU4OC0uNTMxLS4yMTItMi4xNDRhLjguOCwwLDAsMCwuMDItLjEyNi44NDYuODQ2LDAsMCwxLC4wMTgtLjEyNkEuNTU1LjU1NSwwLDAsMCw3NS41LDExLjRhLjU0Ny41NDcsMCwwLDEsLjAxOC0uMTE3LDQuMjM3LDQuMjM3LDAsMCwxLDEuMS0yLjEyNkE1Ljk0Myw1Ljk0MywwLDAsMSw3OC4yNDksOGE1LjU3Myw1LjU3MywwLDAsMSwuOTYxLS4zNzljLjMtLjA4NC41NTMtLjE1MS43NS0uMmEzLjU5MSwzLjU5MSwwLDAsMCwxLjA3Ni0uNDU2LDIuNTc5LDIuNTc5LDAsMCwwLC42MzMtLjU3NGMuMDQ5LS4wOS4xLS4xNzQuMTMzLS4yNTFhLjk5NC45OTQsMCwwLDAsLjA4Ny0uMjMzLjg1NC44NTQsMCwwLDAtLjExMi0uNy42MzYuNjM2LDAsMCwwLS41NjYtLjMxLDEuMzEzLDEuMzEzLDAsMCwwLS43MTIuMjIyLDEuMjA3LDEuMjA3LDAsMCwwLS40ODIuNzg3bC0uMTY0LjdINzYuODA5Yy4wMzgtLjE2NC4wNzctLjMzMy4xMTYtLjVhMy4yMjgsMy4yMjgsMCwwLDEsLjE2MS0uNSw0LjMyMSw0LjMyMSwwLDAsMSwxLjMwNi0xLjg1NCw1LjYxMyw1LjYxMywwLDAsMSwzLjQ1My0uOTI0cTIuMjc4LDAsMi45MDguOWEyLjYxMywyLjYxMywwLDAsMSwuMzMsMi4xODNsLTEuOTUsOC4zNDRoLTMuMmwuMTY0LS43YTYuMTkyLDYuMTkyLDAsMCwxLTEuMTc0LjcsMy43MywzLjczLDAsMCwxLTEuNDA2LjI3NVptMi4zNy01LjEzMmExLjU0MSwxLjU0MSwwLDAsMC0uNjIyLjg0NGwtLjMyMywxLjM3OGEuOTI0LjkyNCwwLDAsMCwuMDYxLjcuNjQ3LjY0NywwLDAsMCwuNDIzLjMzLjE2OS4xNjksMCwwLDAsLjA3MS4wMTloLjEzOGEuOTM2LjkzNiwwLDAsMCwuNDY3LS4xODUuODEyLjgxMiwwLDAsMCwuMzE1LS40MzdsLjc4Ny0zLjM1N0E1LjMyOSw1LjMyOSwwLDAsMCw3OS43NzQsOS4zOTFabTUuNyw0LjQwOWEyLjUsMi41LDAsMCwxLS4zNDktMi4xOTFsMS40LTUuOTc2YS4wODEuMDgxLDAsMCwwLDAtLjAzOS4wNS4wNSwwLDAsMSwwLS4wMzhsMC0uMDJhLjQuNCwwLDAsMCwwLS4wNzcsMy40MjcsMy40MjcsMCwwLDEsMS4yNjYtMi4xLDMuMTU3LDMuMTU3LDAsMCwxLDEuODUyLS42ODEsMi4xLDIuMSwwLDAsMSwuMjk0LjAybC4yODkuMDM3YTIuNDUsMi40NSwwLDAsMSwuOTY5LjQ1NiwxLjc4OSwxLjc4OSwwLDAsMSwuNjE3Ljg2NEw5Mi43NjcsMGwzLjE5LDBMOTIuNjI0LDE0LjI0Nkg4OS40MzFsLjIyNi0uOTcxYTMuMjg4LDMuMjg4LDAsMCwxLS45NDYuNzc2LDMuNTksMy41OSwwLDAsMS0xLjA1LjM5LDIuMzg2LDIuMzg2LDAsMCwxLS4zMTIuMDU2LDIuMjQsMi4yNCwwLDAsMS0uMy4wMmgtLjAzM0EyLDIsMCwwLDEsODUuNDc5LDEzLjhabTQuNjY3LTguMzkyYTEuMTU0LDEuMTU0LDAsMCwwLS4zNzEuNjMxTDg4LjUsMTEuNDcyYS44NzkuODc5LDAsMCwwLC4wMjguNjE0LjQ1OS40NTksMCwwLDAsLjMyMS4yNjNoLjA2NGEuNzY0Ljc2NCwwLDAsMCwuMTItLjAxLjUuNSwwLDAsMCwuMS0uMDMsMS41NzIsMS41NzIsMCwwLDAsLjYwNy0uNDA5LDEuNTksMS41OSwwLDAsMCwuNDE1LS43NzVsLjA0Ni0uMTkzLDEuMTEyLTQuNzU3YTEuMTE1LDEuMTE1LDAsMCwwLS4wMTUtLjcwOS41MjguNTI4LDAsMCwwLS4zNDEtLjMyLjM0OS4zNDksMCwwLDAtLjA3Ny0uMDI5LjM3Ni4zNzYsMCwwLDAtLjA4NC0uMDFIOTAuN0ExLjI3OCwxLjI3OCwwLDAsMCw5MC4xNDYsNS40MDhabTguMjQ5LDkuMWE0LjY4OSw0LjY4OSwwLDAsMS0yLjk4Mi0uOSwyLjMsMi4zLDAsMCwxLS42MDUtMi4xNDRsMS4zNjYtNS44NDFhMy4xMTgsMy4xMTgsMCwwLDEsMS40ODEtMS45Nyw2LjI0Nyw2LjI0NywwLDAsMSwyLjQ3NC0uOTIzLDIuNTU0LDIuNTU0LDAsMCwxLC4zNTEtLjA0OXEuMTcyLS4wMS4zNDQtLjAxYTMuODU3LDMuODU3LDAsMCwxLDIuNDQxLjYyLDIuNjM3LDIuNjM3LDAsMCwxLC45NDgsMS4zNTgsMi45ODgsMi45ODgsMCwwLDEsLjA3MS42NDksMi42NTgsMi42NTgsMCwwLDEtLjA2Mi41OTJsLS43NDUsMy4xODJoLTQuNzdsLS41NTgsMi4zODdhLjkwOC45MDgsMCwwLDAsLjA2Ni43NjguNTY1LjU2NSwwLDAsMCwuNDY0LjI0M2guMTA3YTEuMTQzLDEuMTQzLDAsMCwwLC41NDEtLjI2MywxLjA1OSwxLjA1OSwwLDAsMCwuMzY2LS42MTNsLjM4Ny0xLjY1aDMuMTkybC0uNDQzLDEuOTA1YTMuMDQ1LDMuMDQ1LDAsMCwxLTEuNTMsMS45LDUuNTM0LDUuNTM0LDAsMCwxLTIuOC43NTlaTTk5Ljg2OSw1LjA3YTEsMSwwLDAsMC0uMzU0LjU1NWwtLjI4OSwxLjI0MkgxMDAuOGwuMjktMS4yNDJhLjY3MS42NzEsMCwwLDAtLjA1Ni0uNTM1LjYuNiwwLDAsMC0uMzU0LS4yNjMuMjcxLjI3MSwwLDAsMS0uMDgyLS4wMDkuMzQ3LjM0NywwLDAsMC0uMDg0LS4wMDhoLS4xMDdBMS4xMjcsMS4xMjcsMCwwLDAsOTkuODY5LDUuMDdaTTAsMTQuMy41NTMuMTlsMy44MTIsMEwzLjIyOCwxMC40MTYsNi45ODMuMTg3aDMuMzg1TDkuMDQxLDEwLjQxNCwxMi43OTQuMTg1aDMuNjg0TDEwLjI2MiwxNC4yOTRINi4xMWwuOTczLTguMDcxTDMuOTgxLDE0LjNabTY4LjE4NiwwTDcwLjgyOCwzaDMuMmwtLjM5LDEuNjdjLjAyLS4wMTUuMDM4LS4wMzEuMDU2LS4wNDdhLjM5NC4zOTQsMCwwLDEsLjA1Ni0uMDQ5Yy4xMTUtLjEyOS4yMjMtLjI1Ni4zMjItLjM3OXMuMTktLjIzNi4yNzItLjMzOWEzLjY5MiwzLjY5MiwwLDAsMSwuNjY5LS42NDIsMS41MjMsMS41MjMsMCwwLDEsLjkyLS4yNTMuODQ2Ljg0NiwwLDAsMSwuMTI2LjAxLDEuMTEsMS4xMSwwLDAsMCwuMTQ2LjAxaC4xQS4xOTMuMTkzLDAsMCwwLDc2LjQsM2guMWwtLjg1MSwzLjY0OGgtLjkxNUExLjQyOCwxLjQyOCwwLDAsMCw3Myw4LjAyMmwtMS40NjUsNi4yN1ptLTQ0LjY0MywwTDI2LjE4NSwyLjk5MmwzLjM0MywwLS4zMjEsMS4zNzhhNC42MTMsNC42MTMsMCwwLDEsMS4xMjctMSwzLjc1MywzLjc1MywwLDAsMSwxLjEwNy0uNDU4LDEuODkzLDEuODkzLDAsMCwxLC4zLS4wNDljLjA5My0uMDA2LjE4NC0uMDEuMjY5LS4wMWEyLjA0OCwyLjA0OCwwLDAsMSwxLjU1Mi42NSwxLjYxMywxLjYxMywwLDAsMSwuNCwxLjU2MkwzMS44LDE0LjI4MkgyOC40NkwzMC4yNTMsNi42NGEuODYzLjg2MywwLDAsMC0uMDU5LS42Ni43MTkuNzE5LDAsMCwwLS4zOS0uMzI5LjM3Ni4zNzYsMCwwLDEtLjA4NC0uMDEuMzUyLjM1MiwwLDAsMC0uMDgyLS4wMWgtLjA1MmEuMS4xLDAsMCwwLS4wNTcuMDIuOTE5LjkxOSwwLDAsMC0uNDkyLjI5MiwxLjQxNCwxLjQxNCwwLDAsMC0uMzYxLjdsLTEuNzg4LDcuNjQ3Wm0yOS4wMjEtLjAxNUw1NS4yMDcsMi45NzdoMy4ybC0uMzksMS42N2EuNjMzLjYzMywwLDAsMCwuMDU2LS4wNDkuMzE4LjMxOCwwLDAsMSwuMDU2LS4wNDljLjExNS0uMTI4LjIyMS0uMjU0LjMyMS0uMzc3cy4xOS0uMjM2LjI3MS0uMzRhMy43NzYsMy43NzYsMCwwLDEsLjY2OS0uNjQxLDEuNTMyLDEuNTMyLDAsMCwxLC45Mi0uMjUyLjcyMS43MjEsMCwwLDEsLjEyNi4wMSwxLjE1NCwxLjE1NCwwLDAsMCwuMTQ4LjAwOWguMTA3YS4yMTIuMjEyLDAsMCwwLC4wOS4wMmguMWwtLjg1NSwzLjY0N0g1OS4xYTEuOTY3LDEuOTY3LDAsMCwwLTEuMTgxLjI3MkExLjk1NSwxLjk1NSwwLDAsMCw1Ny4zNzUsOGwtMS40NjYsNi4yNjlabTkuMTY5LS4wMTNMNjQuMzc2LDIuOTY0SDYyLjFMNjIuNzU3LjE1aDguMDlsLS42NTgsMi44MTVINjcuOTFMNjUuMjY4LDE0LjI1OVptNDIuMTUtLjAyMSwyLjY0MS0xMS4yOTVoMy4ybC0uMzksMS42N2EuNS41LDAsMCwwLC4wNTYtLjA0OS41NTEuNTUxLDAsMCwxLC4wNTYtLjA0N2MuMTE1LS4xMy4yMjMtLjI1Ni4zMjMtLjM3OXMuMTg5LS4yMzYuMjcxLS4zNDFhMy44MzgsMy44MzgsMCwwLDEsLjY2OS0uNjQsMS41MzEsMS41MzEsMCwwLDEsLjkyMi0uMjUzLjg2Ni44NjYsMCwwLDEsLjEyNi4wMSwxLjEwOCwxLjEwOCwwLDAsMCwuMTQ2LjAxaC4xMDdhLjIxNC4yMTQsMCwwLDAsLjA5Mi4wMmguMWwtLjg1MywzLjY0OGgtLjkyMmExLjQyNSwxLjQyNSwwLDAsMC0xLjcyOSwxLjM3N2wtMS40NjYsNi4yNjlaIiBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudCkiLz4KICAgIDwvZz4KICAgIDxwYXRoIGlkPSLot6/lvoRfNjg0IiBkYXRhLW5hbWU9Iui3r+W+hCA2ODQiIGQ9Ik0yLjU4NC0xMS4wNTgsMi44NS0xMi45MmwtLjQ3NS0uNTUxSDYuMTE4bC0uMzQyLDIuNDEzaC42NjVMNi4xOTQtOS4zNjdINS41MjlMNS4yNDQtNy4zMTVsLjUxMy0uMTUyTDUuNDcyLTUuNDkxbC0uNDk0LjE1Mkw0LjM4OS0xLjFhMS4zNzIsMS4zNzIsMCwwLDEtLjUuOSwxLjQ3MiwxLjQ3MiwwLDAsMS0uOTU5LjM1MkgtLjAxOWwxLjI3My0xLjcxLjM4LTIuNzE3TC41Ny0zLjk1MmwuMjg1LTJMMS45MTktNi4yN2wuNDM3LTMuMUgxLjM0OUwxLjYtMTEuMDU4Wm02LjU1NSw5LjEyTDkuNS00LjU2SDYuNjEybC4yNDctMS43MWg5LjM4NkwxNi00LjU2SDEzLjA1M2wtLjM2MSwyLjYyMmgzLjQyTDE1Ljg2NS0uMTcxSDUuNjgxbC4yNDctMS43NjdabTUuMTQ5LTguODE2SDEwLjA1MWwtLjE5LDEuMzNINi43NDVsLjQtMi43MzZoMy4zNjNsLjA5NS0uNjA4TDkuODgtMTMuNDloNC40MDhsLS4xOSwxLjMzaDMuNDJsLS40LDIuNzM2SDE0LjFaTTYuNS02LjYzMSw4LjAzNy05LjAyNWgzLjI2OEw5Ljc2Ni02LjYzMVptNi45NzMsMC0uODkzLTIuMzk0aDMuMjY4bC44OTMsMi4zOTRabTEwLjEwOCw1LjRMMjQuNDM0LTIuM2wuMy0yLjE4NUgyNEwyMy4zNTEuMTcxSDIwLjQ2M2wuNjQ2LTQuNjU1aC0uN0wxOS45NS0xLjIzNUgxNy43ODRsLjctNS4wNTRoMi44ODhsLjA5NS0uNzIySDE4LjI0bC4yNDctMS44aDMuMjQ5TDIxLjg4OC05LjlIMjAuODgxbC0uMTcxLjcyMkgxOC41NDRsLjgxNy0zLjI0OWgyLjE2NmwtLjE5LjcyMmguOGwuMTUyLTEuMDgzLS42MDgtLjcyMmgzLjYxbC0uMjY2LDEuOEgyNy43NEwyNy40OTMtOS45SDI0Ljc3NmwtLjE1MiwxLjA4M2gzLjI0OWwtLjI0NywxLjhIMjQuMzU4bC0uMS43MjJoMi44ODhsLS41ODksNC4yNzVhLjkzOS45MzksMCwwLDEtLjMxNC41NTEuODQ5Ljg0OSwwLDAsMS0uNTguMjI4Wk0yOC4xLS4xNTJsMS42OTEtMS44MDUsMS41LTEwLjY1OS0uNDU2LS41MzJoMy40MkwzMi42LTEuNDQ0YTEuNDYyLDEuNDYyLDAsMCwxLS40OTQuOTIyLDEuNDE2LDEuNDE2LDAsMCwxLS45NjkuMzcxWk0zMC42MDktMTEuNywyOS4yNDEtMS45NTdIMjcuMjY1TDI4LjYzMy0xMS43Wk01MC42MTYtNi42NSw0OS43LS4yMDlIMzUuNzM5bC45MTItNi40NDFabS0xLjA2NC02LjExOCwxLjM0OSw1LjRINDcuODIzbC0uMDc2LS4yODVoLTExbC4xOS0xLjM2OCwyLjczNi00LjAyOC0uNDU2LS40MzdoNC42OTNsLTIuODUsNC4wODVINDcuMzFsLS44MzYtMy4zNjNaTTQ2LjM3OS0yLjAxNGwuNC0yLjg1aC02Ljg0bC0uNCwyLjg1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjc5IDc0MykiIGZpbGw9InVybCgjbGluZWFyLWdyYWRpZW50LTIpIi8+CiAgICA8ZyBpZD0i57uEXzEwMjAiIGRhdGEtbmFtZT0i57uEIDEwMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMi40OTEgNzI4Ljg0NSkiPgogICAgICA8ZyBpZD0i57uEXzQ0NCIgZGF0YS1uYW1lPSLnu4QgNDQ0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDApIj4KICAgICAgICA8cGF0aCBpZD0i6Lev5b6EXzU2MiIgZGF0YS1uYW1lPSLot6/lvoQgNTYyIiBkPSJNLTEyNjUuMTM3LDMwMS4yNzVhNy40NjUsNy40NjUsMCwwLDAtMS41LTQuMDcsNS44MjYsNS44MjYsMCwwLDAtMi4zMTUtMS42LDkuMjQ3LDkuMjQ3LDAsMCwwLTEuNzIyLS41NzIsMi40OTQsMi40OTQsMCwwLDEtMS45NjYtMi41MDcsMi41MDcsMi41MDcsMCwwLDEsMi4xNjQtMi40MTEsMi41LDIuNSwwLDAsMSwyLjY2MywxLjU4MywzLjQzLDMuNDMsMCwwLDEsLjE3MS44Miw3LjcwNSw3LjcwNSwwLDAsMCwxLjMsMy42MTYsNC42NzMsNC42NzMsMCwwLDAsMi4wNjgsMS41NDcsNS4zMTIsNS4zMTIsMCwwLDAsMi4yMDguNTU1LDUuODI5LDUuODI5LDAsMCwwLDEuOTY3LS41MTgsNS4wMDUsNS4wMDUsMCwwLDAsMy4wNjMtMy40NTUsOS41LDkuNSwwLDAsMCwuNC0xLjg4MywyLjQ4MSwyLjQ4MSwwLDAsMSwyLjQ1Mi0yLjI4NiwyLjQ5NCwyLjQ5NCwwLDAsMSwyLjUwOCwyLjIzLDIuNTM0LDIuNTM0LDAsMCwxLTIuMDM2LDIuNzM5LDcuOTI3LDcuOTI3LDAsMCwwLTMuNDQsMS42MjUsNS40NDcsNS40NDcsMCwwLDAtMS42MjEsMi42MzYsNy45MTMsNy45MTMsMCwwLDAtLjM4NSwyLjA5MiwyLjk5LDIuOTksMCwwLDEtMi44NDYsMi44MTUsMywzLDAsMCwxLTMuMS0yLjQ3OUEyLjA2NSwyLjA2NSwwLDAsMS0xMjY1LjEzNywzMDEuMjc1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI3Mi42NDMgLTI5MC4wODgpIiBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudC0zKSIvPgogICAgICAgIDxwYXRoIGlkPSLot6/lvoRfNTYzIiBkYXRhLW5hbWU9Iui3r+W+hCA1NjMiIGQ9Ik0tODMyLjQ1OSwzMDIuNTQ1YTIuNTM4LDIuNTM4LDAsMCwxLDIuMDU0LTIuNDYzLDguMTI5LDguMTI5LDAsMCwwLDMuMzE3LTEuNTI0LDUuNDExLDUuNDExLDAsMCwwLDEuNzQxLTIuNzM4LDguMDQxLDguMDQxLDAsMCwwLC4zOTQtMi4xMzUsMi45NTUsMi45NTUsMCwwLDEsMi44NDUtMi43NTQsMi45ODIsMi45ODIsMCwwLDEsMy4wNzYsMi41LDIuOTcsMi45NywwLDAsMS0yLjc3OCwzLjQ1Miw3LjAyMiw3LjAyMiwwLDAsMC0yLjY2Ny43NTUsNC45NzEsNC45NzEsMCwwLDAtMi42MiwzLjI4OSwxMC4zMTgsMTAuMzE4LDAsMCwwLS40LDEuOTMsMi40NzksMi40NzksMCwwLDEtMi42NzIsMi4xODVBMi41LDIuNSwwLDAsMS04MzIuNDU5LDMwMi41NDVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4NTIuNTA2IC0yOTAuODg4KSIgZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQtMykiLz4KICAgICAgPC9nPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="},"1lGd":function(t,e){},"1rJ0":function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOC42OTgiIGhlaWdodD0iMTcuNDM1IiB2aWV3Qm94PSIwIDAgMTguNjk4IDE3LjQzNSI+CiAgPGcgaWQ9IuetlueVpSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI4LjkzMiAtODc3KSI+CiAgICA8cGF0aCBpZD0i6Lev5b6EXzUxMSIgZGF0YS1uYW1lPSLot6/lvoQgNTExIiBkPSJNMTguNzY3LDQuNDM4LDEwLjUwOC4zMDlhMS41MjEsMS41MjEsMCwwLDAtMS43NDMsMEwuNTA2LDQuNDM4YS4yLjIsMCwwLDEtLjE4My4xODNjLS4wOTIuMzY3LDAsLjczNC4yNzUuODI2TDMuNTMyLDYuOTE2LDEuMDU0LDguMkEuOTM2LjkzNiwwLDAsMCwuNiw4LjkzNWEuODE3LjgxNywwLDAsMCwuNDU2LjczNGwyLjExMSwxLjEtMi4xMTEsMS4xYS45MzYuOTM2LDAsMCwwLS40NTYuNzM0LjgxNy44MTcsMCwwLDAsLjQ1Ni43MzRsNy43MDgsMy44NTRhMS40OCwxLjQ4LDAsMCwwLC44MjYuMjc1LDEuNzcxLDEuNzcxLDAsMCwwLC45MTgtLjI3NWw3LjcwOC0zLjg1NGEuOTM2LjkzNiwwLDAsMCwuNDU2LS43MzQuODE3LjgxNywwLDAsMC0uNDU2LS43MzRMMTYuMSwxMC43N2wyLjExMS0xLjFhLjkzNi45MzYsMCwwLDAsLjQ1Ni0uNzM0LjgxNy44MTcsMCwwLDAtLjQ1Ni0uNzM0TDE1LjgyOCw2LjkxNmwyLjkzNi0xLjQ2OGMuMDkyLS4wOTIuMTgzLS4wOTIuMTgzLS4xODMuMS0uMzY3LDAtLjczNC0uMTgxLS44MjZaTTE3LjAyMywxMi42LDkuOTU3LDE2LjE4M2EuNTg1LjU4NSwwLDAsMS0uNTUsMEwyLjM0LDEyLjZsMi4yOTQtMS4xOTMsNC4yMiwyLjExMWExLjQ4LDEuNDgsMCwwLDAsLjgyNi4yNzUsMS43NzEsMS43NzEsMCwwLDAsLjkxOC0uMjc1bDQuMjIxLTIuMTExLDIuMiwxLjE5M1ptMC0zLjY3MS0yLjI5NCwxLjE5My0xLjM3Ni42NDJMOS44NjYsMTIuNTEyYS41ODUuNTg1LDAsMCwxLS41NSwwTDUuODI5LDEwLjc2OGwtMS4zNzYtLjY0MkwyLjE1OSw4LjkzMyw0LjkxMiw3LjU1N2wzLjk0MiwyLjAyYTEuNTIxLDEuNTIxLDAsMCwwLDEuNzQzLDBsMy45NDYtMi4wMTksMi40NzgsMS4zNzZaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOC42NDQgODc2Ljk2NikiIGZpbGw9IiM1ZDVkNWQiLz4KICAgIDxwYXRoIGlkPSLot6/lvoRfNTQ2IiBkYXRhLW5hbWU9Iui3r+W+hCA1NDYiIGQ9Ik0xOC4xNDIsNC4wNzcsOS43MjguMWEuODgzLjg4MywwLDAsMC0uNzU5LDBMLjU1NSw0LjA3N2ExLjAyMywxLjAyMywwLDAsMCwwLDEuODE5TDguOTY5LDkuODc4YS44ODYuODg2LDAsMCwwLC43NTksMEwxOC4xNDIsNS45YTEuMDIzLDEuMDIzLDAsMCwwLDAtMS44MTlaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOC45MzIgODc2Ljk5KSIgZmlsbD0iIzI1M2Q5MiIvPgogIDwvZz4KPC9zdmc+Cg=="},"4/hK":function(t,e){},"6EWr":function(t,e){},Bfv8:function(t,e){},D8Uw:function(t,e){},DoUX:function(t,e){},EKW2:function(t,e){},GSMS:function(t,e){},GUiZ:function(t,e){},Jwy3:function(t,e){},LxZp:function(t,e){},M8kv:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i={name:"App",mounted:function(){var t=this.$api.getItem("theme"),e="";e=""==t||"black"==t?"./static/css/style_black.css":"./static/css/style_white.css",document.getElementById("theme").href=e}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=s("VU/8")(i,n,!1,function(t){s("juZK")},null,null).exports,l=s("/ocq"),r={name:"Login",data:function(){return{loginid:"",passwd:"",saveuser:!0,loading:!1}},methods:{doLogin:function(){var t=this,e=this,s=e.loginid,a=e.passwd;e.loading=!0,this.$api.login(s,a,function(a){if(a.result<0)e.$alert("用户登录出错："+a.message,"登录失败");else{var i=a.userinfo;localStorage.setItem("last_user",s),localStorage.setItem("save_user",e.saveuser?"true":"false"),t.$store.commit("loginok",{isLogined:!0,loginid:s,userinfo:i}),e.$router.push("/index")}e.loading=!1})}},mounted:function(){this.saveuser="true"==localStorage.getItem("save_user"),this.saveuser&&(this.loginid=localStorage.getItem("last_user"))}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"loginBox"},[a("div",{staticClass:"login"},[a("div",{staticClass:"loginForm"},[a("el-row",{staticClass:"loginLogo"},[a("h2",[a("img",{attrs:{src:s("Unev"),alt:""}})])]),t._v(" "),a("div",{staticClass:"login_lab"},[a("el-row",[a("h1",{staticClass:"login_title"},[t._v("欢迎登录")])]),t._v(" "),a("el-row",[a("el-input",{staticClass:"textarea t-user",attrs:{placeholder:"用户名"},model:{value:t.loginid,callback:function(e){t.loginid=e},expression:"loginid"}})],1),t._v(" "),a("el-row",[a("el-input",{staticClass:"textarea t-password",attrs:{placeholder:"密码",type:"password","show-password":""},model:{value:t.passwd,callback:function(e){t.passwd=e},expression:"passwd"}})],1),t._v(" "),a("el-row",[a("el-checkbox",{staticStyle:{float:"right"},model:{value:t.saveuser,callback:function(e){t.saveuser=e},expression:"saveuser"}},[a("span",{staticStyle:{color:"#9E9E9E"}},[t._v("保存用户名")])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-button",{staticClass:"wt-btn-login",attrs:{type:"primary",plain:""},on:{click:function(e){return t.doLogin()}}},[t._v("登 录")])],1)],1)],1)])])},staticRenderFns:[]};var u=s("VU/8")(r,c,!1,function(t){s("Jwy3")},"data-v-726df336",null).exports,d=s("Dd8w"),f=s.n(d),p=s("NYxO"),m={name:"index",computed:f()({},Object(p.b)(["cache"]),{isAdmin:function(){var t=this.cache.userinfo;return!!t&&("admin"==t.role||"superman"==t.role)},isResearcher:function(){var t=this.cache.userinfo;return!!t&&"researcher"==t.role}}),components:{},data:function(){return{showDlgModPwd:!1,oldpwd:"",newpwd:"",confirmpwd:"",loading:!1,notifies:[],lastNotify:null,showNotifies:!1,btValid:!1}},methods:{switchTheme:function(){var t=this.$api.getItem("theme");t="black"==t?"white":"black",this.$api.setItem("theme",t);var e="";e="black"==t?"./static/css/style_black.css":"./static/css/style_white.css",document.getElementById("theme").href=e},onLogout:function(t){var e=this;this.$confirm("确定要注销登录吗？","注销登录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.commit("logoutok"),e.$router.push("/login")}).catch(function(){})},onModPwd:function(t){this.showDlgModPwd=!0},doModPwd:function(){var t=this,e=this;""!=this.newpwd&&""!=this.oldpwd&&""!=this.confirmpwd?this.newpwd==this.confirmpwd?(this.loading=!0,this.$api.modpwd(this.oldpwd,this.newpwd,function(s){s.result<0?e.$notify.error("密码修改失败："+s.message,"修改密码"):(e.$notify.success("密码修改成功","修改密码"),t.showDlgModPwd=!1),setTimeout(function(){t.loading=!1},150)})):this.$alert("两次输入的新密码不一致"):this.$alert("密码不能为空")},handleNotify:function(t){this.notifies.push(t),this.notifies.length>100&&(this.notifies=this.notifies.slice(this.notifies.length-100)),this.lastNotify=t},onClickScroller:function(t){this.showNotifies=!this.showNotifies},getTitleStyle:function(t){return"成交回报"==t?"title-success":"title-warning"},getIconStyle:function(t){return"成交回报"==t?"el-icon-news":"el-icon-warning-outline"}},mounted:function(){var t=this;this.cache.isLogined||this.$router.push("/login"),this.$nextTick(function(){t.$api.checkBT(function(e){e.result<0?t.btValid=!1:t.btValid=!0})})}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{height:"100%"},attrs:{id:"index"}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticClass:"headerbar",staticStyle:{flex:"0 36px",display:"flex","flex-direction":"row"}},[t._m(0),t._v(" "),s("div",{staticStyle:{flex:"1"}},[s("el-menu",{staticClass:"el-menu-demo",staticStyle:{height:"100%","background-color":"transparent","border-block":"0"},attrs:{"default-active":"1",mode:"horizontal",router:""}},[t.isResearcher?t._e():s("el-menu-item",{staticClass:"navitem",attrs:{index:"1",route:"/monitor"}},[s("i",{staticClass:"el-icon-s-marketing"}),t._v(" "),s("span",[t._v("监控中心")])]),t._v(" "),t.isAdmin?s("el-menu-item",{staticClass:"navitem",attrs:{index:"2",route:"/schedule"}},[s("i",{staticClass:"el-icon-box"}),t._v(" "),s("span",[t._v("调度中心")])]):t._e(),t._v(" "),(t.isResearcher||t.isAdmin)&&t.btValid?s("el-menu-item",{staticClass:"navitem",attrs:{index:"3",route:"/backtest"}},[s("i",{staticClass:"el-icon-data-line"}),t._v(" "),s("span",[t._v("在线回测")])]):t._e(),t._v(" "),t.isAdmin?s("el-menu-item",{staticClass:"navitem",attrs:{index:"4",route:"/admins"}},[s("i",{staticClass:"el-icon-user"}),t._v(" "),s("span",[t._v("用户管理")])]):t._e()],1)],1),t._v(" "),s("div",{staticStyle:{flex:"0 280px",margin:"8px","font-size":"14px",display:"flex","flex-direction":"row"}},[s("div",{staticStyle:{flex:"0 0","margin-right":"8px"}},[s("el-popover",{attrs:{placement:"top-start",width:"240",trigger:"hover"}},[s("div",[s("el-row",{staticStyle:{"font-size":"20px","padding-bottom":"4px"}},[s("i",{staticClass:"el-icon-user",staticStyle:{"padding-right":"4px"}}),s("strong",[t._v("用户信息")])]),t._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[t._v("账户：")]),t._v(" "),s("el-col",{attrs:{span:14}},[t._v(t._s(t.cache.loginid))])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[t._v("姓名：")]),t._v(" "),s("el-col",{attrs:{span:14}},[t._v(t._s(t.cache.userinfo.name))])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[t._v("用户类型：")]),t._v(" "),s("el-col",{attrs:{span:14}},[t._v(t._s(t.isAdmin?"管理员":"风控员"))])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[t._v("登录时间：")]),t._v(" "),s("el-col",{attrs:{span:14}},[t._v(t._s(t.cache.userinfo.logintime))])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[t._v("登录地址：")]),t._v(" "),s("el-col",{attrs:{span:14}},[t._v(t._s(t.cache.userinfo.loginip))])],1)],1),t._v(" "),s("span",{attrs:{slot:"reference"},slot:"reference"},[s("i",{staticClass:"el-icon-user userhead"})])])],1),t._v(" "),s("span",{staticClass:"user"},[t._v(t._s(t.cache.userinfo.name))]),t._v(" "),s("span",{staticClass:"user2"},[t._v(t._s(t.cache.loginid))]),t._v(" "),s("el-divider",{staticClass:"divider1",attrs:{direction:"vertical"}}),t._v(" "),s("el-divider",{staticClass:"divider2",attrs:{direction:"vertical"}}),t._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("更换皮肤")]),t._v(" "),s("i",{staticClass:"el-icon-table-lamp button",on:{click:function(e){return t.switchTheme()}}})]),t._v(" "),s("el-divider",{staticClass:"divider1",attrs:{direction:"vertical"}}),t._v(" "),s("el-divider",{staticClass:"divider2",attrs:{direction:"vertical"}}),t._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("修改密码")]),t._v(" "),s("i",{staticClass:"el-icon-lock button",on:{click:t.onModPwd}})]),t._v(" "),s("el-divider",{staticClass:"divider1",attrs:{direction:"vertical"}}),t._v(" "),s("el-divider",{staticClass:"divider2",attrs:{direction:"vertical"}}),t._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("注销登录")]),t._v(" "),s("i",{staticClass:"el-icon-switch-button button",staticStyle:{color:"#ED3F14"},on:{click:t.onLogout}})])],1)]),t._v(" "),s("div",{staticClass:"bg14",staticStyle:{flex:"1 0 auto",height:"0",overflow:"hidden"}},[s("keep-alive",[s("router-view",{ref:"main",on:{notify:t.handleNotify}})],1)],1),t._v(" "),s("div",{staticClass:"statusbar",staticStyle:{flex:"0 28px"}},[s("div",{staticStyle:{flex:"1",margin:"4px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.lastNotify,expression:"lastNotify"}],staticClass:"scroller",on:{click:t.onClickScroller}},[s("marquee",[s("i",{class:t.getIconStyle(t.lastNotify?t.lastNotify.title:""),staticStyle:{"padding-right":"4px"}}),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.lastNotify?t.lastNotify.time.format("hh:mm:ss"):""))]),t._v(" "),s("span",{staticClass:"group"},[t._v(t._s(t.lastNotify?t.lastNotify.group:""))]),t._v(" "),s("span",{staticClass:"channel"},[t._v(t._s(t.lastNotify?t.lastNotify.channel:""))]),t._v(" "),s("span",{class:t.getTitleStyle(t.lastNotify?t.lastNotify.title:"")},[t._v(t._s(t.lastNotify?t.lastNotify.title:""))]),t._v(" "),s("span",{staticClass:"message"},[t._v(t._s(t.lastNotify?t.lastNotify.message:""))])])],1)]),t._v(" "),t._m(1)])]),t._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:t.showDlgModPwd,width:"360px"},on:{"update:visible":function(e){t.showDlgModPwd=e}}},[s("el-row",{staticStyle:{margin:"8px 0"}},[s("el-input",{attrs:{placeholder:"请输入旧密码","show-password":""},model:{value:t.oldpwd,callback:function(e){t.oldpwd=e},expression:"oldpwd"}})],1),t._v(" "),s("el-row",{staticStyle:{margin:"8px 0"}},[s("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:t.newpwd,callback:function(e){t.newpwd=e},expression:"newpwd"}})],1),t._v(" "),s("el-row",{staticStyle:{margin:"8px 0"}},[s("el-input",{attrs:{placeholder:"请确认新密码","show-password":""},model:{value:t.confirmpwd,callback:function(e){t.confirmpwd=e},expression:"confirmpwd"}})],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"wt-btn-big",attrs:{type:"primary",plain:""},on:{click:function(e){return t.doModPwd()}}},[t._v("确 定")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"通知列表",visible:t.showNotifies,direction:"btt",width:"800px"},on:{"update:visible":function(e){t.showNotifies=e}}},[s("div",{staticStyle:{height:"400px","overflow-y":"scroll",padding:"4px"}},[s("el-table",{attrs:{data:t.notifies,stripe:"","show-header":!1}},[s("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[s("i",{class:t.getIconStyle(e.row.title),staticStyle:{"padding-right":"4px"}}),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(e.row.time.format("hh:mm:ss")))]),t._v(" "),s("span",{staticClass:"group"},[t._v(t._s(e.row.group))]),t._v(" "),s("span",{staticClass:"channel"},[t._v(t._s(e.row.channel))]),t._v(" "),s("span",{class:t.getTitleStyle(e.row.title)},[t._v(t._s(e.row.title))]),t._v(" "),s("span",{staticClass:"message"},[t._v(t._s(e.row.message))])]}}])})],1)],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"0 389px",margin:"8px 0"}},[e("img",{staticStyle:{height:"70%"},attrs:{src:s("0CAg"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"0","margin-top":"4px","min-width":"150px"}},[e("i",{staticClass:"el-icon-connection",staticStyle:{color:"skyblue","padding-right":"8px"}}),e("a",{staticClass:"font-color-A2"},[this._v("推送通道已连接")])])}]};var h=s("VU/8")(m,g,!1,function(t){s("Bfv8")},"data-v-29ce220c",null).exports,v=s("mvHQ"),w=s.n(v),y=s("bOdI"),b=s.n(y),x={name:"stradata",props:{groupid:{type:String,default:function(){return""}}},computed:f()({},Object(p.b)(["cache"]),{isAdmin:function(){var t=this.cache.userinfo;return!!t&&("admin"==t.role||"superman"==t.role)},showPos:function(){var t=(this.showPage-1)*this.pageSize;return this.positions.slice(t,t+this.pageSize)},showTrd:function(){var t=(this.showPage-1)*this.pageSize;return this.trades.slice(t,t+this.pageSize)},showRnd:function(){var t=(this.showPage-1)*this.pageSize;return this.rounds.slice(t,t+this.pageSize)},showSig:function(){var t=(this.showPage-1)*this.pageSize;return this.signals.slice(t,t+this.pageSize)},showFnd:function(){var t=(this.showPage-1)*this.pageSize;return this.funds.slice(t,t+this.pageSize)},dataLength:function(){return"pos"==this.selCat?this.positions.length:"trd"==this.selCat?this.trades.length:"sig"==this.selCat?this.signals.length:"rnd"==this.selCat?this.rounds.length:"fnd"==this.selCat?this.funds.length:0}}),components:{},watch:{groupid:function(t,e){var s=this;t=t||"",e=e||"",0!=t.length&&t!=e&&setTimeout(function(){s.$api.getStrategies(t,function(t){t.result<0?s.$notify.error("获取策略列表出错："+t.message):(s.strategies=t.strategies,"pos"==s.selCat||"fnd"==s.selCat?s.strafilter="all":"all"==s.strafilter&&(s.strafilter=s.strategies[0]),s.showPage=1,s.queryData())})},300)}},data:function(){var t;return t={showPage:1,pageSize:25,pageSizes:[25,35,45],selCat:"pos",strafilter:"all",strategies:[],loading:{trade:!1,signal:!1,round:!1,position:!1,fund:!1},capital:5e6,trades:[],positions:[],signals:[],rounds:[]},b()(t,"strategies",[]),b()(t,"funds",[]),b()(t,"nvChart",null),b()(t,"autoData",!1),b()(t,"dataInterval",0),b()(t,"refreshTime",(new Date).format("yyyy.MM.dd hh:mm:ss")),t},methods:{onPageSizeChange:function(t){this.pageSize=t},onPageChange:function(t){this.showPage=t},handleCheckAutoData:function(t){this.resetDataInterval()},resetDataInterval:function(){var t=this;this.autoData?(0!=this.dataInterval&&clearInterval(this.dataInterval),this.dataInterval=setInterval(function(){t.queryData()},3e4)):0!=this.dataInterval&&clearInterval(this.dataInterval)},getTrdSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(e<3||e>5)a[e]="";else if(3!=e){if(4==e)a[e]=s.length+"笔";else if(5==e){var i=s.map(function(t){return Number(t.volume)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}}else a[e]="本页小计"}),a},getSigSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){e>1?a[e]="":0!=e?1==e&&(a[e]=s.length+"笔"):a[e]="本页小计"}),a},getPosSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(0==e||1==e||2==e||3==e)if(0!=e){if(1==e)a[e]=s.length+"笔";else if(2==e){var i=s.map(function(t){return Number(t.qty)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+Math.abs(e)},0)+"手"}else if(3==e){var n=s.map(function(t){return Number(t.profit)});n.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(1)}}else a[e]="本页小计";else a[e]=""}),a},getRndSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(5==e||6==e||7==e||8==e)if(5!=e)if(6!=e){if(7==e){var i=s.map(function(t){return Number(t.qty)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}else if(8==e){var n=s.map(function(t){return Number(t.profit)});n.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(1)}}else a[e]=s.length+"笔";else a[e]="本页小计";else a[e]=""}),a},handleCatChange:function(t,e){this.selCat!=t.name&&(this.selCat=t.name,"pos"==this.selCat?this.strafilter="all":"all"==this.strafilter&&(this.strafilter=this.strategies[0]),this.showPage=1,this.queryData())},onStraSwitch:function(){this.queryData()},formatAmount:function(t,e){return t[e.property].toFixed(2)},fmtPrice:function(t){for(var e=t.toFixed(4),s=0;s<e.length&&"0"==e[e.length-1-s];s++);"."==e[e.length-1-s]&&s++;var a=e.length-s;return e.substr(0,a)},fmtTime:function(t,e){if(e=e||!1){var s=t+"";return s.substr(2,2)+"."+s.substr(4,2)+"."+s.substr(6,2)+" "+s.substr(8,2)+":"+s.substr(10,2)+":"+s.substr(12,2)+","+s.substr(14,3)}var a=t+"";return a.substr(2,2)+"."+a.substr(4,2)+"."+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)},fmtDate:function(t){var e=t+"";return e.substr(0,4)+"."+e.substr(4,2)+"."+e.substr(6,2)},fmtProfit:function(t){return t>0?"text-danger":t<0?"text-success":""},onClickPaintChart:function(){this.paintChart()},paintChart:function(){null==this.nvChart&&(this.nvChart=this.$echarts.init(document.getElementById("trend")));for(var t={title:{text:"净值走势",textStyle:{color:"#E4E4E4",fontSize:"14"},left:"center"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985",formatter:function(t){var e=t.value+"";return e.substr(0,4)+"."+e.substr(4,2)+"."+e.substr(6,2)}}},formatter:function(t){if(0==t.length)return"收益曲线";var e=t[0].axisValueLabel;for(var s in t)"净值"==t[s].seriesName?e+="<br/>净值: "+t[s].value.toFixed(4):e+="<br/>"+t[s].seriesName+": "+t[s].value;return e}},grid:{top:42,left:"8",right:"8",bottom:"8",containLabel:!0,tooltip:{axisPointer:{type:"line",lineStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(44, 135, 250,0.0)"},{offset:1,color:"rgba(44, 135, 250, 1)"}],global:!1}}}}},xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{textStyle:{color:"#B4B4B5",fontSize:9},formatter:function(t,e){return(t+="").substr(0,4)+"."+t.substr(4,2)+"."+t.substr(6,2)}},axisLine:{lineStyle:{color:"#1B212E"}}},yAxis:[{type:"value",axisLabel:{textStyle:{color:"#B4B4B5",fontSize:9},formatter:function(t,e){return t.toFixed(4)}},axisLine:{lineStyle:{color:"#1B212E"}},splitLine:{lineStyle:{color:"#1B212E",type:"dashed"}},scale:!0}],series:[{name:"净值",type:"line",smooth:!1,stack:"净值",areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(44,135,250,0.5)"},{offset:1,color:"rgba(44,135,250,0.1)"}],globalCoord:!1}}},data:[],lineStyle:{normal:{color:"rgb(44,135,250)",width:1.7}},itemStyle:{normal:{color:"rgb(44,135,250)",borderWidth:1}}}]},e=[],s=[],a=parseInt(this.capital),i=this.funds.length-1;i>=0;i--){var n=this.funds[i];e.push(n.date);var o=a+n.dynbalance;s.push(o/a)}var l=Math.max.apply(null,s),r=Math.min.apply(null,s);if(l==r)l*=1.05,r*=.95;else{var c=l-r;l+=.05*c,r=Math.max(0,r-.05*c)}t.xAxis.data=e,t.series[0].data=s,t.yAxis[0].max=l,t.yAxis[0].min=r,this.nvChart.setOption(t)},queryData:function(t){var e=this;t=t||!1;var s=this,a=this.selCat,i=this.groupid||"",n=this.strafilter||"";0!=i.length?0!=n.length?"trd"==a?(s.loading.trade=!0,setTimeout(function(){e.$api.getTrades(i,n,function(a){a.result<0?e.$notify.error("查询成交出错："+a.message):(a.trades.forEach(function(t){var e="";"OPEN"==t.offset?e+="开":e+="平","LONG"==t.direction?e+="多":e+="空",t.action=e}),s.trades=a.trades,s.trades.reverse()),s.loading.trade=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"sig"==a?(s.loading.signal=!0,setTimeout(function(){e.$api.getSignals(i,n,function(a){a.result<0?e.$notify.error("查询信号出错："+a.message):(s.signals=a.signals,s.signals.reverse()),s.loading.signal=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"rnd"==a?(s.loading.round=!0,setTimeout(function(){e.$api.getRounds(i,n,function(a){a.result<0?e.$notify.error("查询回合出错："+a.message):(s.rounds=a.rounds,s.rounds.reverse()),s.loading.round=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"pos"==a?(s.loading.position=!0,setTimeout(function(){e.$api.getPositions(i,n,function(a){a.result<0?e.$notify.error("查询持仓出错："+a.message):(a.positions.forEach(function(t){t.qty=t.volume*(t.long?1:-1)}),a.positions.sort(function(t,e){return t.strategy!=e.strategy?t.strategy-e.strategy:t.code-e.code}),s.positions=a.positions),s.loading.position=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"fnd"==a&&(s.loading.fund=!0,setTimeout(function(){e.$api.getFunds(i,n,function(a){if(a.result<0)e.$notify.error("查询绩效出错："+a.message);else{if("all"!=n){for(var i=null,o=0;o<a.funds.length;o++){var l=a.funds[o];l.profit=null==i?l.closeprofit:l.closeprofit-i.closeprofit,l.thisfee=null==i?l.fee:l.fee-i.fee,l.addition=l.dynbalance-(null==i?0:i.dynbalance),i=l}a.funds.reverse()}s.funds=a.funds,s.paintChart()}s.loading.fund=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):this.$notify.error("策略ID不能为空"):this.$notify.error("组合ID不能为空")}},mounted:function(){window.onresize+=function(){self.zooming||(self.zooming=!0,setTimeout(function(){self.myChart&&self.nvChart.resize(),self.zooming=!1},300))}}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bord39",staticStyle:{height:"99%",overflow:"auto",padding:"2px"}},[s("el-container",{staticStyle:{height:"100%",overflow:"auto"}},[s("el-header",{staticStyle:{height:"40px","overflow-y":"hidden"}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"row"}},[s("div",{staticStyle:{flex:"0",height:"100%"}},[s("el-tabs",{staticClass:"grp_tabs",staticStyle:{height:"100%",margin:"0",width:"120%"},attrs:{value:t.selCat,"tab-position":"top"},on:{"tab-click":t.handleCatChange}},[s("el-tab-pane",{attrs:{label:"持仓明细",name:"pos"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"成交明细",name:"trd"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"信号明细",name:"sig"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"回合明细",name:"rnd"}}),t._v(" "),t.isAdmin?s("el-tab-pane",{attrs:{label:"每日绩效",name:"fnd"}}):t._e()],1)],1),t._v(" "),s("div",{staticStyle:{flex:"1","margin-top":"4px"}},[s("div",{staticStyle:{float:"right"}},[s("el-row",[s("el-col",{attrs:{span:4}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每隔30秒刷新一次",placement:"top"}},[s("el-checkbox",{staticClass:"checkbox_color",staticStyle:{float:"right","margin-top":"6px"},on:{change:t.handleCheckAutoData},model:{value:t.autoData,callback:function(e){t.autoData=e},expression:"autoData"}},[t._v("自动刷新")])],1)],1),t._v(" "),s("el-col",{attrs:{offset:1,span:12}},[s("el-select",{staticClass:"group_dropdown",attrs:{placeholder:"请选择",size:"mini"},on:{change:t.onStraSwitch},model:{value:t.strafilter,callback:function(e){t.strafilter=e},expression:"strafilter"}},[s("el-option",{directives:[{name:"show",rawName:"v-show",value:"pos"==t.selCat||"fnd"==t.selCat,expression:"selCat=='pos' || selCat=='fnd'"}],attrs:{label:"全部策略",value:"all"}},[s("i",{staticClass:"el-icon-collection"}),t._v(" "),s("span",[t._v("全部策略")])]),t._v(" "),t._l(t.strategies,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}},[s("i",{staticClass:"el-icon-tickets"}),t._v(" "),s("span",[t._v(t._s(e))])])})],2)],1),t._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{staticClass:"wt-btn-Refresh",attrs:{icon:"el-icon-refresh",size:"mini",plain:""},on:{click:function(e){return t.queryData()}}},[t._v("刷新")])],1)],1)],1)])])]),t._v(" "),s("el-main",{staticStyle:{overflow:"auto"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"pos"==t.selCat,expression:"selCat=='pos'"},{name:"loading",rawName:"v-loading",value:t.loading.position,expression:"loading.position"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",data:t.showPos,"summary-method":t.getPosSum,"header-cell-style":{color:"#97979E"},"cell-style":{color:"#FFFFFF"},"border-style":{color:"#3A3C46"},"show-summary":""}},[s("el-table-column",{attrs:{label:"策略",width:"140",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(e.row.strategy))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"品种",width:"160",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.qty>=0?"text-danger":"text-success"},[t._v(t._s(e.row.qty))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"浮盈",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.profit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.profit.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"开仓时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtTime(e.row.opentime)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"开仓价格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtPrice(e.row.price)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"最大浮盈",width:"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"text-danger"},[t._v(t._s(e.row.maxprofit.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"最大浮亏",width:"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"text-success"},[t._v(t._s(e.row.maxloss.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"opentag",label:"标记",sortable:""}})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"trd"==t.selCat,expression:"selCat=='trd'"},{name:"loading",rawName:"v-loading",value:t.loading.trade,expression:"loading.trade"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",data:t.showTrd,"summary-method":t.getTrdSum,"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},"cell-style":{color:"#FFFFFF"},"show-summary":""}},[s("el-table-column",{attrs:{label:"策略",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(e.row.strategy))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"品种",width:"160",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtTime(e.row.time)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"动作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:"开多"==e.row.action||"平空"==e.row.action?"text-danger":"text-success"},[t._v(t._s(e.row.action))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtPrice(e.row.price)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"volume",label:"数量",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"tag",label:"标记",sortable:""}})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"sig"==t.selCat,expression:"selCat=='sig'"},{name:"loading",rawName:"v-loading",value:t.loading.signal,expression:"loading.signal"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",data:t.showSig,"summary-method":t.getSigSum,"cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},"show-summary":""}},[s("el-table-column",{attrs:{label:"策略",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(e.row.strategy))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"品种",width:"160",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"target",label:"目标数量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.fmtProfit(e.row.target)},[t._v(t._s(e.row.target))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"触发价格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtPrice(e.row.sigprice)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"触发时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtTime(e.row.gentime,!0)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"tag",label:"标记",sortable:""}})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"rnd"==t.selCat,expression:"selCat=='rnd'"},{name:"loading",rawName:"v-loading",value:t.loading.round,expression:"loading.round"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"","summary-method":t.getRndSum,"show-summary":"","cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},data:t.showRnd}},[s("el-table-column",{attrs:{label:"策略",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(e.row.strategy))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"品种",width:"160",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"方向",width:"64"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:"LONG"==e.row.direct?"text-danger":"text-success"},[t._v(t._s("LONG"==e.row.direct?"多":"空"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"开仓时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtTime(e.row.opentime)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"开仓价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtPrice(e.row.openprice)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"平仓时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtTime(e.row.closetime)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"平仓价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtPrice(e.row.closeprice)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"qty",label:"数量",width:"64"}}),t._v(" "),s("el-table-column",{attrs:{label:"盈亏",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.profit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.profit.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"entertag",label:"进场标记",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"exittag",label:"出场标记",width:"120"}})],1)],1),t._v(" "),t.isAdmin?s("div",{directives:[{name:"show",rawName:"v-show",value:"fnd"==t.selCat,expression:"selCat=='fnd'"},{name:"loading",rawName:"v-loading",value:t.loading.fund,expression:"loading.fund"}],staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"1",width:"100%",overflow:"auto",height:"50%"}},[s("div",{staticStyle:{"max-height":"100%"}},[s("el-table",{staticClass:"table",attrs:{border:"",data:t.showFnd,"cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"}}},[s("el-table-column",{attrs:{label:"策略",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-nomal"},[t._v(t._s(e.row.strategy))])]}}],null,!1,3764353700)}),t._v(" "),s("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtDate(e.row.date)))])]}}],null,!1,1157224088)}),t._v(" "),s("el-table-column",{attrs:{label:"当日盈亏",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.addition>=0?"text-danger":"text-success"},[t._v(t._s(e.row.addition.toFixed(2)))])]}}],null,!1,766393030)}),t._v(" "),s("el-table-column",{attrs:{label:"平仓盈亏",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.profit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.profit.toFixed(1)))])]}}],null,!1,2406354661)}),t._v(" "),s("el-table-column",{attrs:{label:"浮动盈亏",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.dynprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.dynprofit.toFixed(1)))])]}}],null,!1,103057029)}),t._v(" "),s("el-table-column",{attrs:{label:"累计平仓盈亏",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.closeprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.closeprofit.toFixed(1)))])]}}],null,!1,298912261)}),t._v(" "),s("el-table-column",{attrs:{label:"累计手续费",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.fee.toFixed(2)))])]}}],null,!1,2486503344)}),t._v(" "),s("el-table-column",{attrs:{label:"当日手续费",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.thisfee.toFixed(2)))])]}}],null,!1,2717835670)}),t._v(" "),s("el-table-column",{attrs:{prop:"dynbalance",label:"动态权益"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.dynbalance>=0?"text-danger":"text-success"},[t._v(t._s(e.row.dynbalance.toFixed(1)))])]}}],null,!1,1406323205)})],1)],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"all"!=t.strafilter,expression:"strafilter!='all'"}],staticStyle:{flex:"1",width:"100%",overflow:"auto",display:"flex","flex-direction":"column",margin:"4px"}},[s("div",{staticStyle:{height:"40px",display:"inline-block",flex:"0",margin:"4px"}},[s("el-row",[s("el-col",{staticStyle:{"margin-top":"6px",color:"#2C87FA","margin-right":"-1.5em"},attrs:{span:3}},[s("i",{staticClass:"el-icon-money"}),t._v(" "),s("a",[t._v("资金规模")])]),t._v(" "),s("el-col",{attrs:{span:3}},[s("el-input",{staticClass:"group_dropdown2",attrs:{placeholder:"请输入资金规模",size:"mini",type:"number",min:"1000000",step:"1000000"},model:{value:t.capital,callback:function(e){t.capital=e},expression:"capital"}})],1),t._v(" "),s("el-col",{staticStyle:{"margin-left":"2px"},attrs:{span:2}},[s("el-button",{staticClass:"wt-btn-Refresh",staticStyle:{"font-size":"12px","margin-left":"5px"},attrs:{size:"mini",plain:""},on:{click:t.onClickPaintChart}},[t._v("重新绘图")])],1)],1)],1),t._v(" "),s("div",{staticStyle:{flex:"1",width:"100%"}},[s("div",{staticStyle:{width:"98%",height:"98%"},attrs:{id:"trend"}})])])]):t._e()]),t._v(" "),s("el-footer",{staticClass:"footer-bg"},[s("el-row",[s("span",{staticStyle:{"font-size":"12px",color:"gray","line-height":"24px"}},[t._v("数据刷新时间: "+t._s(t.refreshTime))]),t._v(" "),s("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.showPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",size:"mini",total:t.dataLength},on:{"size-change":t.onPageSizeChange,"current-change":t.onPageChange}})],1)],1)],1)],1)},staticRenderFns:[]};var _=s("VU/8")(x,M,!1,function(t){s("D8Uw")},"data-v-70ddc53d",null).exports,S={name:"tradedata",props:{groupid:{type:String,default:function(){return""}}},computed:{showPos:function(){var t=(this.showPage-1)*this.pageSize;return this.positions.slice(t,t+this.pageSize)},showTrd:function(){var t=(this.showPage-1)*this.pageSize;return this.trades.slice(t,t+this.pageSize)},showOrd:function(){var t=(this.showPage-1)*this.pageSize;return this.orders.slice(t,t+this.pageSize)},showFnd:function(){var t=(this.showPage-1)*this.pageSize;return this.funds.slice(t,t+this.pageSize)},dataLength:function(){return"pos"==this.selCat?this.positions.length:"trd"==this.selCat?this.trades.length:"ord"==this.selCat?this.orders.length:"fnd"==this.selCat?this.funds.length:0}},components:{},watch:{groupid:function(t,e){var s=this;t=t||"",e=e||"",0!=t.length&&t!=e&&setTimeout(function(){s.$api.getChannels(t,function(t){if(t.result<0)s.$notify.error("拉取组合交易通道出错："+t.message);else{s.channels=t.channels;var e=s.showAllChannels(s.selCat);s.chnlfilter=e?"all":s.channels[0],setTimeout(function(){s.showPage=1,s.queryData()},300)}})},300)}},data:function(){return{showPage:1,pageSize:25,pageSizes:[25,35,45],selCat:"pos",chnlfilter:"all",channels:[],loading:{trade:!1,order:!1,position:!1,fund:!1},trades:[],orders:[],positions:[],funds:[],autoData:!1,dataInterval:0,refreshTime:(new Date).format("yyyy.MM.dd hh:mm:ss")}},methods:{onPageSizeChange:function(t){this.pageSize=t},onPageChange:function(t){this.showPage=t},showAllChannels:function(t){return"fnd"==t||"pos"==t},getPosSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(0==e||1==e||2==e||3==e)if(0!=e){if(1==e)a[e]=s.length+"笔";else if(2==e){var i=s.map(function(t){return Number(t.long.newvol)}),n=s.map(function(t){return Number(t.long.prevol)});a[e]="昨"+n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手 | 今"+i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}else if(3==e){var o=s.map(function(t){return Number(t.short.newvol)}),l=s.map(function(t){return Number(t.short.prevol)});a[e]="昨"+l.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手 | 今"+o.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}}else a[e]="总计";else a[e]=""}),a},getTrdSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(e<4||e>6)a[e]="";else if(4!=e){if(5==e)a[e]=s.length+"笔";else if(6==e){var i=s.map(function(t){return Number(t.volume)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}}else a[e]="总计"}),a},getOrdSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(e<4||e>7)a[e]="";else if(4!=e){if(5==e)a[e]=s.length+"笔";else if(6==e){var i=s.map(function(t){return Number(t.total)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}else if(7==e){var n=s.map(function(t){return Number(t.traded)});n.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}}else a[e]="总计"}),a},getFndSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(0!=e){if(1==e)a[e]=s.length+"条";else if(2==e){var i=s.map(function(t){return Number(t.prebalance)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}else if(3==e){var n=s.map(function(t){return Number(t.balance)});n.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}else if(4==e){var o=s.map(function(t){return Number(t.closeprofit)});o.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=o.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}else if(5==e){var l=s.map(function(t){return Number(t.dynprofit)});l.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=l.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}else if(6==e){var r=s.map(function(t){return Number(t.margin)});r.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=r.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}else if(7==e){var c=s.map(function(t){return Number(t.fee)});c.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=c.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}else if(8==e){var u=s.map(function(t){return Number(t.available)});u.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=u.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}else if(9==e){var d=s.map(function(t){return Number(t.moneyio)});d.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=d.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}}else a[e]="总计"}),a},handleCheckAutoData:function(t){this.resetDataInterval()},resetDataInterval:function(){var t=this;this.autoData?(0!=this.dataInterval&&clearInterval(this.dataInterval),this.dataInterval=setInterval(function(){t.queryData()},3e4)):0!=this.dataInterval&&clearInterval(this.dataInterval)},getActClr:function(t){return"开多"==t||"平空"==t||"平今空"==t?"text-danger":"text-success"},handleCatChange:function(t,e){if(this.selCat!=t.name){this.selCat=t.name;var s=this.showAllChannels(this.selCat);s||"all"!=this.chnlfilter?s&&(this.chnlfilter="all"):this.chnlfilter=this.channels[0],this.showPage=1,this.queryData()}},onChnlSwitch:function(){this.showPage=1,this.queryData()},formatTime:function(t,e){var s=t[e.property],a=new Date;return a.setTime(s),a.format("yyyy/MM/dd hh:mm:ss")},fmtPrice:function(t,e){for(var s=t[e.property].toFixed(4),a=0;a<s.length&&"0"==s[s.length-1-a];a++);"."==s[s.length-1-a]&&a++;var i=s.length-a;return s.substr(0,i)},fmtAmount:function(t,e){return t[e.property].toFixed(2)},queryData:function(t){var e=this;t=t||!1;var s=this,a=this.selCat,i=this.groupid||"",n=this.chnlfilter||"";0!=i.length?0!=n.length?"trd"==a?(s.loading.trade=!0,setTimeout(function(){e.$api.getChnlTrades(i,n,function(a){a.result<0?e.$notify.error("查询成交出错："+a.message):(a.trades.forEach(function(t){var e;t.action="OL"==(e=t.action)?"开多":"OS"==e?"开空":"CL"==e?"平多":"CS"==e?"平空":"CNL"==e?"平今多":"CNS"==e?"平今空":"CPL"==e?"平昨多":"CPS"==e?"平昨空":e}),s.trades=a.trades,s.trades.reverse()),s.loading.trade=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"ord"==a?(s.loading.order=!0,setTimeout(function(){e.$api.getChnlOrders(i,n,function(a){a.result<0?e.$notify.error("查询订单出错："+a.message):(a.orders.forEach(function(t){var e;t.action="OL"==(e=t.action)?"开多":"OS"==e?"开空":"CL"==e?"平多":"CS"==e?"平空":"CNL"==e?"平今多":"CNS"==e?"平今空":"CPL"==e?"平昨多":"CPS"==e?"平昨空":e}),s.orders=a.orders,s.orders.reverse()),s.loading.order=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"pos"==a?(s.loading.position=!0,setTimeout(function(){e.$api.getChnlPositions(i,n,function(a){if(a.result<0)e.$notify.error("查询持仓出错："+a.message);else{var i=[];a.positions.forEach(function(t){t.long.newvol+t.long.prevol+t.short.newvol+t.short.prevol!=0&&i.push(t)}),e.positions=i}s.loading.position=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"fnd"==a&&(s.loading.fund=!0,setTimeout(function(){e.$api.getChnlFunds(i,n,function(a){if(a.result<0)e.$notify.error("查询资金出错："+a.message);else{var i=[];for(var n in a.funds){var o=a.funds[n];for(var l in o){var r=o[l];r.channel=n,r.currency=l,r.moneyio=r.deposit-r.withdraw,r.dynprofit=r.dynprofit||0,i.push(r)}}s.funds=i}s.loading.fund=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):this.$notify.error("通道ID不能为空"):this.$notify.error("组合ID不能为空")}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bord39",staticStyle:{height:"99%",padding:"2px"}},[s("el-container",{staticStyle:{height:"100%"}},[s("el-header",{staticStyle:{height:"40px","overflow-y":"hidden"}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"row"}},[s("div",{staticStyle:{flex:"0",height:"100%"}},[s("el-tabs",{staticClass:"grp_tabs",staticStyle:{height:"100%",margin:"0",width:"120%"},attrs:{value:t.selCat,"tab-position":"top"},on:{"tab-click":t.handleCatChange}},[s("el-tab-pane",{attrs:{label:"持仓明细",name:"pos"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"成交明细",name:"trd"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"订单明细",name:"ord"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"资金明细",name:"fnd"}})],1)],1),t._v(" "),s("div",{staticStyle:{flex:"1","margin-top":"4px"}},[s("div",{staticStyle:{float:"right"}},[s("el-row",[s("el-col",{attrs:{span:4}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每隔30秒刷新一次",placement:"top"}},[s("el-checkbox",{staticClass:"checkbox_color",staticStyle:{float:"right","margin-top":"6px"},on:{change:t.handleCheckAutoData},model:{value:t.autoData,callback:function(e){t.autoData=e},expression:"autoData"}},[t._v("自动刷新")])],1)],1),t._v(" "),s("el-col",{attrs:{offset:1,span:12}},[s("el-select",{staticClass:"group_dropdown",attrs:{placeholder:"请选择",size:"mini"},on:{change:t.onChnlSwitch},model:{value:t.chnlfilter,callback:function(e){t.chnlfilter=e},expression:"chnlfilter"}},[s("el-option",{directives:[{name:"show",rawName:"v-show",value:t.showAllChannels(t.selCat),expression:"showAllChannels(selCat)"}],attrs:{label:"全部通道",value:"all"}},[s("i",{staticClass:"el-icon-tickets"}),t._v(" "),s("span",[t._v("全部通道")])]),t._v(" "),t._l(t.channels,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}},[s("i",{staticClass:"el-icon-tickets"}),t._v(" "),s("span",[t._v(t._s(e))])])})],2)],1),t._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{staticClass:"wt-btn-Refresh",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",plain:""},on:{click:function(e){return t.queryData()}}},[t._v("刷新")])],1)],1)],1)])])]),t._v(" "),s("el-main",{staticClass:"bottom-line",staticStyle:{overflow:"auto"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"pos"==t.selCat,expression:"selCat=='pos'"},{name:"loading",rawName:"v-loading",value:t.loading.position,expression:"loading.position"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",data:t.showPos,"summary-method":t.getPosSum,"show-summary":"","cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"}}},[s("el-table-column",{attrs:{prop:"channel",label:"通道",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{label:"品种",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"long",label:"多头",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("a",{staticClass:"text-danger"},[s("span",[t._v("昨"+t._s(e.row.long.prevol)+"["+t._s(e.row.long.preavail)+"]")]),t._v(" "),s("span",[t._v("|")]),t._v(" "),s("span",[t._v("今"+t._s(e.row.long.newvol)+"["+t._s(e.row.long.newavail)+"]")])])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"short",label:"空头",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("a",{staticClass:"text-success"},[s("span",[t._v("昨"+t._s(e.row.short.prevol)+"["+t._s(e.row.short.preavail)+"]")]),t._v(" "),s("span",[t._v("|")]),t._v(" "),s("span",[t._v("今"+t._s(e.row.short.newvol)+"["+t._s(e.row.short.newavail)+"]")])])]}}])})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"trd"==t.selCat,expression:"selCat=='trd'"},{name:"loading",rawName:"v-loading",value:t.loading.trade,expression:"loading.trade"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",data:t.showTrd,"summary-method":t.getTrdSum,"show-summary":"","cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"}}},[s("el-table-column",{attrs:{prop:"channel",label:"通道",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{label:"品种",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"time",label:"时间",width:"150",sortable:"",formatter:t.formatTime}}),t._v(" "),s("el-table-column",{attrs:{prop:"localid",label:"本地单号",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{label:"动作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.getActClr(e.row.action)},[t._v(t._s(e.row.action))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"价格",width:"80",formatter:t.fmtPrice}}),t._v(" "),s("el-table-column",{attrs:{prop:"volume",label:"数量",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"tradeid",label:"成交单号",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"orderid",label:"委托单号",width:"100"}})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"ord"==t.selCat,expression:"selCat=='ord'"},{name:"loading",rawName:"v-loading",value:t.loading.order,expression:"loading.order"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",data:t.showOrd,"summary-method":t.getOrdSum,"cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},"show-summary":""}},[s("el-table-column",{attrs:{prop:"channel",label:"通道",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{label:"品种",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"time",label:"委托时间",width:"150",sortable:"",formatter:t.formatTime}}),t._v(" "),s("el-table-column",{attrs:{prop:"localid",label:"本地单号",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{label:"动作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.getActClr(e.row.action)},[t._v(t._s(e.row.action))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"价格",width:"80",formatter:t.fmtPrice}}),t._v(" "),s("el-table-column",{attrs:{prop:"total",label:"数量",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"traded",label:"成交",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"orderid",label:"委托单号",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{label:"撤销",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:"TRUE"==e.row.canceled?"text-danger":"text-info"},[t._v(t._s("TRUE"==e.row.canceled?"是":"否"))])]}}])})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"fnd"==t.selCat,expression:"selCat=='fnd'"},{name:"loading",rawName:"v-loading",value:t.loading.fund,expression:"loading.fund"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",data:t.showFnd,"summary-method":t.getFndSum,"cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},"show-summary":""}},[s("el-table-column",{attrs:{prop:"channel",label:"通道",width:"120",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"currency",label:"币种",width:"64"}}),t._v(" "),s("el-table-column",{attrs:{prop:"prebalance",label:"上日结存",width:"120",sortable:"",formatter:t.fmtAmount}}),t._v(" "),s("el-table-column",{attrs:{prop:"balance",label:"静态权益",width:"120",sortable:"",formatter:t.fmtAmount}}),t._v(" "),s("el-table-column",{attrs:{label:"平仓盈亏",width:"110",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.closeprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.closeprofit.toFixed(2)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"浮动盈亏",width:"110",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.dynprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.dynprofit.toFixed(2)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"margin",label:"保证金",width:"120",sortable:"",formatter:t.fmtAmount}}),t._v(" "),s("el-table-column",{attrs:{prop:"fee",label:"手续费",width:"100",sortable:"",formatter:t.fmtAmount}}),t._v(" "),s("el-table-column",{attrs:{prop:"available",label:"可用资金",width:"120",sortable:"",formatter:t.fmtAmount}}),t._v(" "),s("el-table-column",{attrs:{label:"出入金",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.moneyio>=0?"text-danger":"text-success"},[t._v(t._s(e.row.moneyio.toFixed(2)))])]}}])})],1)],1)]),t._v(" "),s("el-footer",{staticClass:"footer-bg"},[s("el-row",[s("span",{staticStyle:{"font-size":"12px",color:"gray","line-height":"24px"}},[t._v("数据1刷新时间: "+t._s(t.refreshTime))]),t._v(" "),s("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.showPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",size:"mini",total:t.dataLength},on:{"size-change":t.onPageSizeChange,"current-change":t.onPageChange}})],1)],1)],1)],1)},staticRenderFns:[]};var C=s("VU/8")(S,L,!1,function(t){s("tV8Q")},"data-v-f3d95bac",null).exports,N={name:"portdata",props:{groupid:{type:String,default:function(){return""}}},computed:f()({},Object(p.b)(["cache"]),{isAdmin:function(){var t=this.cache.userinfo;return!!t&&("admin"==t.role||"superman"==t.role)},showPos:function(){var t=(this.showPage-1)*this.pageSize;return this.positions.slice(t,t+this.pageSize)},showTrd:function(){var t=(this.showPage-1)*this.pageSize;return this.trades.slice(t,t+this.pageSize)},showRnd:function(){var t=(this.showPage-1)*this.pageSize;return this.rounds.slice(t,t+this.pageSize)},showFnd:function(){var t=(this.showPage-1)*this.pageSize;return this.funds.slice(t,t+this.pageSize)},dataLength:function(){return"pos"==this.selCat?this.positions.length:"trd"==this.selCat?this.trades.length:"rnd"==this.selCat?this.rounds.length:"fnd"==this.selCat?this.funds.length:0}}),components:{},watch:{groupid:function(t,e){var s=this;t=t||"",e=e||"",0!=t.length&&t!=e&&setTimeout(function(){s.showPage=1,s.queryData()},300)}},data:function(){return{showPage:1,pageSize:25,pageSizes:[25,35,45],selCat:"pos",loading:{risk:!1,performance:!1,position:!1,fund:!1},capital:5e6,performances:[],positions:[],filters:{},funds:[],rtFund:{closeprofit:0,dynprofit:0,fee:0,profit:0},trades:[],rounds:[],nvChart:null,pieChart:null,autoData:!1,dataInterval:0,refreshTime:(new Date).format("yyyy.MM.dd hh:mm:ss")}},methods:{onPageSizeChange:function(t){this.pageSize=t},onPageChange:function(t){this.showPage=t},getRndSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(e<4)a[e]="";else if(4!=e)if(5!=e){if(6==e){var i=s.map(function(t){return Number(t.qty)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}else if(7==e){var n=s.map(function(t){return Number(t.profit)});n.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(1)}}else a[e]=s.length+"笔";else a[e]="本页小计"}),a},getTrdSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(e<2)a[e]="";else if(2!=e){if(3==e)a[e]=s.length+"笔";else if(4==e){var i=s.map(function(t){return Number(t.volume)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}else if(5==e){var n=s.map(function(t){return Number(t.fee)});n.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(2)}}else a[e]="本页小计"}),a},handleCheckAutoData:function(t){this.resetDataInterval()},resetDataInterval:function(){var t=this;this.autoData?(0!=this.dataInterval&&clearInterval(this.dataInterval),this.dataInterval=setInterval(function(){"pos"==t.selCat&&t.queryData()},3e4)):0!=this.dataInterval&&clearInterval(this.dataInterval)},getPosSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(0==e||1==e||2==e||3==e)if(0!=e){if(1==e)s.map(function(t){return Number(t.qty)}).every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=s.length+"笔";else if(2==e){var i=s.map(function(t){return Number(t.qty)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+Math.abs(e)},0)+"手"}else if(3==e){var n=s.map(function(t){return Number(t.profit)});n.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(1)}}else a[e]="本页小计";else a[e]=""}),a},handleCatChange:function(t,e){this.selCat!=t.name&&(this.selCat=t.name,this.showPage=1,this.queryData())},formatAmount:function(t,e){return t[e.property].toFixed(2)},fmtFundTime:function(t){var e=Math.floor(t/1e3)+"";return e.length<6&&(e="0"+e),e.substr(0,2)+":"+e.substr(2,2)},fmtFundDate:function(t){var e=t+"";return e.substr(2,2)+"."+e.substr(4,2)+"."+e.substr(6,2)},fmtPrice:function(t){for(var e=t.toFixed(4),s=0;s<e.length&&"0"==e[e.length-1-s];s++);"."==e[e.length-1-s]&&s++;var a=e.length-s;return e.substr(0,a)},fmtTime:function(t,e){if(e=e||!1){var s=t+"";return s.substr(2,2)+"."+s.substr(4,2)+"."+s.substr(6,2)+" "+s.substr(8,2)+":"+s.substr(10,2)+":"+s.substr(12,2)+","+s.substr(14,3)}var a=t+"";return a.substr(2,2)+"."+a.substr(4,2)+"."+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)},fmtDate:function(t){var e=t+"";return e.substr(0,4)+"."+e.substr(4,2)+"."+e.substr(6,2)},fmtProfit:function(t){return t>0?"text-danger":t<0?"text-success":""},onClickResetCapital:function(){var t=parseInt(this.capital);this.funds.forEach(function(e){e.capital=t}),this.paintChart()},paintChart:function(){null==this.nvChart&&(this.nvChart=this.$echarts.init(document.getElementById("grptrend")));for(var t={title:{text:"净值走势",textStyle:{color:"#E4E4E4",fontSize:"14"},left:"center"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985",formatter:function(t){var e=t.value+"";return e.substr(0,4)+"."+e.substr(4,2)+"."+e.substr(6,2)}}},formatter:function(t){if(0==t.length)return"收益曲线";var e=t[0].axisValueLabel;for(var s in t)"净值"==t[s].seriesName?e+="<br/>净值: "+t[s].value.toFixed(4):e+="<br/>"+t[s].seriesName+": "+t[s].value;return e}},grid:{top:42,left:"8",right:"8",bottom:"8",containLabel:!0,tooltip:{axisPointer:{type:"line",lineStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(44, 135, 250,0.0)"},{offset:1,color:"rgba(44, 135, 250, 1)"}],global:!1}}}}},xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{textStyle:{color:"#B4B4B5",fontSize:9},formatter:function(t,e){return(t+="").substr(0,4)+"."+t.substr(4,2)+"."+t.substr(6,2)}},axisLine:{lineStyle:{color:"#1B212E"}}},yAxis:[{type:"value",axisLabel:{textStyle:{color:"#B4B4B5",fontSize:9},formatter:function(t,e){return t.toFixed(4)}},axisLine:{lineStyle:{color:"#1B212E"}},splitLine:{lineStyle:{color:"#1B212E",type:"dashed"}},scale:!0}],series:[{name:"净值",type:"line",smooth:!1,stack:"净值",areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(44,135,250,0.5)"},{offset:1,color:"rgba(44,135,250,0.1)"}],globalCoord:!1}}},data:[],lineStyle:{normal:{color:"rgb(44,135,250)",width:1.7}},itemStyle:{normal:{color:"rgb(44,135,250)",borderWidth:1}}}]},e=[],s=[],a=parseInt(this.capital),i=this.funds.length-1;i>=0;i--){var n=this.funds[i];e.push(n.date);var o=a+n.dynbalance;s.push(o/a)}var l=Math.max.apply(null,s),r=Math.min.apply(null,s);if(l==r)l*=1.05,r*=.95;else{var c=l-r;l+=.05*c,r=Math.max(0,r-.05*c)}t.xAxis.data=e,t.series[0].data=s,t.yAxis[0].max=l,t.yAxis[0].min=r,this.nvChart.setOption(t)},paintBars:function(){if(this.isAdmin){null==this.pieChart&&(this.pieChart=this.$echarts.init(document.getElementById("pie")));var t=[],e=[];for(var s in this.performances){var a=this.performances[s],i=a.closeprofit+a.dynprofit;t.push({name:s,value:i,itemStyle:{color:i>0?"#C23531":"#228B22"}})}t.sort(function(t,e){return t.name.localeCompare(e.name)}),t.forEach(function(t){e.push(t.name)});var n={title:{text:"组合绩效归因",textStyle:{color:"#E4E4E4",fontSize:"14"},subtext:"按品种",left:"center"},grid:{left:"13%",right:"3%",bottom:"13%"},xAxis:{type:"category",data:e,axisLine:{lineStyle:{color:"#1B212E"}},axisLabel:{textStyle:{color:"#B4B4B5",fontSize:9}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#1B212E"}},axisLabel:{textStyle:{color:"#B4B4B5",fontSize:9}},splitLine:{lineStyle:{color:"#1B212E"}}},legend:{show:!1},tooltip:{trigger:"item",formatter:function(t){return t.name+": "+(t.value/1e4).toFixed(2)+"万"}},series:[{name:"分品种绩效",type:"bar",data:t}]};this.pieChart.setOption(n)}},queryPerf:function(){var t=this,e=this.groupid||"";this.$api.getPortPerfs(e,function(e){e.result<0?t.$notify.error("查询绩效归因出错："+e.message,"查询失败"):(t.performances=e.performance,setTimeout(function(){t.paintBars()},300))})},checkAllFilters:function(t,e){for(var s in this.filters[t])this.filters[t][s]=e},onAddCodeFilter:function(){var t=this;t.$prompt("请输入品种代码，格式如CFFEX.IF","新增代码过滤器",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var s=e.value;if(void 0!=t.filters.code_filters[s])return t.$alert("该品种代码已存在"),!0;t.filters.code_filters[s]=!0,t.$forceUpdate()}).catch(function(){})},onDelCodeFilter:function(t){var e=this;this.$confirm("确定要删除该代码过滤器吗?","删除代码过滤器",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){delete e.filters.code_filters[t],e.$forceUpdate()}).catch(function(){})},onCommitFilters:function(){var t=this,e=this;this.$confirm("确定要提交最新的过滤器配置吗?","提交过滤器",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s=t.groupid||"";e.$api.commitPortFilters(s,e.filters,function(e){e.result<0?t.$notify.error("提交过滤器出错："+e.message):t.$notify({message:"过滤器提交成功"})})}).catch(function(){})},queryRtFund:function(){var t=this,e=this.groupid||"",s=this,a=parseInt(s.capital);this.$api.getPortFunds(e,function(e){if(e.result<0)t.$notify.error("查询绩效出错："+e.message);else{var i=null,n=0,o=0;e.funds.forEach(function(t){t.dynbalance=t.balance+t.dynprofit,t.capital=a,t.profit=t.closeprofit+t.dynprofit-(null==i?0:i.dynprofit)-t.fee,o+=t.closeprofit,n+=t.fee,t.totalfee=n,t.totalprofit=o,i=t}),e.funds.length>0&&(s.rtFund=e.funds[e.funds.length-1])}})},queryData:function(t){var e=this;t=t||!1;var s=this,a=this.selCat,i=this.groupid||"";0!=i.length?"pos"==a?(s.loading.position=!0,setTimeout(function(){e.$api.getPortPositions(i,function(a){a.result<0?e.$notify.error("查询持仓出错："+a.message):(a.positions.forEach(function(t){t.qty=t.volume*(t.long?1:-1)}),s.positions=a.positions.sort(function(t,e){return t.code.localeCompare(e.code)})),s.loading.position=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()}),e.queryPerf(),e.queryRtFund()},300)):"fnd"==a?(s.loading.fund=!0,setTimeout(function(){var a=parseInt(s.capital);e.$api.getPortFunds(i,function(i){if(i.result<0)e.$notify.error("查询绩效出错："+i.message);else{var n=null,o=0,l=0;i.funds.forEach(function(t){t.dynbalance=t.balance+t.dynprofit,t.capital=a,t.profit=t.closeprofit+t.dynprofit-(null==n?0:n.dynprofit)-t.fee,l+=t.closeprofit,o+=t.fee,t.totalfee=o,t.totalprofit=l,n=t}),s.funds=i.funds,s.funds.reverse(),s.paintChart()}s.loading.fund=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"rsk"==a?(s.loading.risk=!0,setTimeout(function(){parseInt(s.capital);e.$api.getPortFilters(i,function(a){a.result<0?e.$notify.error("查询过滤器出错："+a.message):(a.filters.strategy_filters=a.filters.strategy_filters||{},a.filters.code_filters=a.filters.code_filters||{},a.filters.channel_filters=a.filters.executer_filters||{},s.filters=a.filters),s.loading.risk=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"trd"==a?(s.loading.trade=!0,setTimeout(function(){parseInt(s.capital);e.$api.getPortTrades(i,function(a){a.result<0?e.$notify.error("查询成交出错："+a.message):(a.trades.forEach(function(t){var e="";"OPEN"==t.offset?e+="开":e+="平","LONG"==t.direction?e+="多":e+="空",t.action=e}),s.trades=a.trades,s.trades.reverse()),s.loading.trade=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):"rnd"==a&&(s.loading.round=!0,setTimeout(function(){parseInt(s.capital);e.$api.getPortRounds(i,function(a){a.result<0?e.$notify.error("查询回合出错："+a.message):(s.rounds=a.rounds,s.rounds.reverse()),s.loading.round=!1,s.refreshTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),t&&s.resetDataInterval()})},300)):this.$notify.error("组合ID不能为空")}},mounted:function(){var t=this;window.onresize=function(){t.zooming||(t.zooming=!0,setTimeout(function(){t.myChart&&t.nvChart.resize(),t.pieChart&&t.pieChart.resize(),t.zooming=!1},300))},t.$nextTick(function(){t.$on("resize",function(){t.zooming||(t.zooming=!0,setTimeout(function(){t.myChart&&t.nvChart.resize(),t.pieChart&&t.pieChart.resize(),t.zooming=!1},150))})})}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bord39",staticStyle:{height:"99%",overflow:"auto",padding:"2px"}},[a("el-container",{staticStyle:{height:"100%",overflow:"auto"}},[a("el-header",{staticStyle:{height:"40px","overflow-y":"hidden"}},[a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"row"}},[a("div",{staticStyle:{flex:"0",height:"100%"}},[a("el-tabs",{staticClass:"grp_tabs",staticStyle:{height:"100%",margin:"0",width:"120%"},attrs:{value:t.selCat,"tab-position":"top"},on:{"tab-click":t.handleCatChange}},[a("el-tab-pane",{attrs:{label:"持仓明细",name:"pos"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"组合风控",name:"rsk"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"组合成交",name:"trd"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"组合回合",name:"rnd"}}),t._v(" "),t.isAdmin?a("el-tab-pane",{attrs:{label:"组合绩效",name:"fnd"}}):t._e()],1)],1),t._v(" "),a("div",{staticStyle:{flex:"1","margin-top":"4px"}},[a("div",{staticStyle:{float:"right"}},[a("el-row",[a("el-col",{attrs:{offset:7,span:4}},[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:"pos"==t.selCat,expression:"selCat=='pos'"}],staticClass:"item",attrs:{effect:"dark",content:"每隔30秒刷新一次",placement:"top"}},[a("el-checkbox",{staticClass:"checkbox_color",staticStyle:{float:"right","margin-top":"6px"},on:{change:t.handleCheckAutoData},model:{value:t.autoData,callback:function(e){t.autoData=e},expression:"autoData"}},[t._v("自动刷新")])],1)],1),t._v(" "),a("el-col",{attrs:{offset:1,span:4}},[a("el-button",{staticClass:"wt-btn-Refresh",attrs:{icon:"el-icon-refresh",size:"mini",plain:""},on:{click:function(e){return t.queryData()}}},[t._v("刷新")])],1)],1)],1)])])]),t._v(" "),a("el-main",{staticStyle:{overflow:"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"pos"==t.selCat,expression:"selCat=='pos'"},{name:"loading",rawName:"v-loading",value:t.loading.position,expression:"loading.position"}],staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("div",{staticClass:"bottom-line",staticStyle:{flex:"1",height:"100%",overflow:"auto",width:"100%"}},[a("div",[a("el-table",{staticClass:"table",attrs:{border:"",data:t.showPos,"summary-method":t.getPosSum,"show-summary":"","cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"}}},[a("el-table-column",{attrs:{label:"品种",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"数量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.qty>=0?"text-danger":"text-success"},[t._v(t._s(e.row.qty))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"开仓价格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.fmtPrice(e.row.price)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"浮盈",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.profit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.profit.toFixed(1)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"开仓时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.fmtTime(e.row.opentime)))])]}}])})],1)],1)]),t._v(" "),t.isAdmin?a("div",{staticStyle:{flex:"1",overflow:"auto",width:"100%"}},[a("div",{staticStyle:{width:"100%",height:"100%"}},[a("div",{staticStyle:{width:"98%",height:"98%"},attrs:{id:"pie"}})])]):t._e(),t._v(" "),a("div",{staticStyle:{flex:"0",width:"100%","font-size":"16px",color:"gray"}},[a("el-row",{staticStyle:{"margin-left":"16px"}},[a("span",{staticStyle:{"font-weight":"bold","margin-right":"8px"}},[t._v("组合实时盈亏")]),t._v(" "),a("span",{staticStyle:{"margin-right":"4px"}},[t._v("平仓盈亏:")]),t._v(" "),a("span",{class:t.rtFund.closeprofit>=0?"text-danger":"text-success",staticStyle:{"margin-right":"8px"}},[t._v(t._s(t.rtFund.closeprofit.toFixed(1)))]),t._v(" "),a("span",{staticStyle:{"margin-right":"4px"}},[t._v("浮动盈亏:")]),t._v(" "),a("span",{class:t.rtFund.dynprofit>=0?"text-danger":"text-success",staticStyle:{"margin-right":"8px"}},[t._v(t._s(t.rtFund.dynprofit.toFixed(1)))]),t._v(" "),a("span",{staticStyle:{"margin-right":"4px"}},[t._v("佣金:")]),t._v(" "),a("span",{class:t.rtFund.fee>=0?"text-danger":"text-success",staticStyle:{"margin-right":"8px"}},[t._v(t._s(t.rtFund.fee.toFixed(2)))]),t._v(" "),a("span",{staticStyle:{"margin-right":"4px"}},[t._v("当日盈亏:")]),t._v(" "),a("span",{class:t.rtFund.profit>=0?"text-danger":"text-success",staticStyle:{"margin-right":"8px"}},[t._v(t._s(t.rtFund.profit.toFixed(2)))])])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rsk"==t.selCat,expression:"selCat=='rsk'"},{name:"loading",rawName:"v-loading",value:t.loading.risk,expression:"loading.risk"}],staticStyle:{height:"100%",overflow:"auto"}},[a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("div",{staticStyle:{flex:"1",display:"flex","flex-direction":"row"}},[a("div",{staticClass:"filter-pane el-card is-always-shadow bord39 bgc14"},[a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("div",{staticClass:"bottom-line",staticStyle:{flex:"0 1 44px",padding:"18px 20px","box-sizing":"border-box"}},[a("span",{staticClass:"filter font-nomal"},[t._v("策略过滤器")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"1px"},attrs:{type:"danger",size:"mini",plain:""},on:{click:function(e){return t.checkAllFilters("strategy_filters",!0)}}},[t._v("一键过滤")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"1px"},attrs:{type:"success",size:"mini",plain:""},on:{click:function(e){return t.checkAllFilters("strategy_filters",!1)}}},[t._v("一键通过")])],1),t._v(" "),a("div",{staticStyle:{flex:"1 0 0",overflow:"auto",padding:"20px"}},t._l(t.filters.strategy_filters,function(e,i){return a("el-row",{key:i,staticClass:"filter-row"},[a("el-col",{attrs:{span:12}},[a("img",{attrs:{src:s("1rJ0")}}),a("span",{staticClass:"filter-strategy"},[t._v(t._s(i))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-switch",{attrs:{"active-text":"过滤","inactive-text":"通过","inactive-color":"#13ce66","active-color":"#19B969"},model:{value:t.filters.strategy_filters[i],callback:function(e){t.$set(t.filters.strategy_filters,i,e)},expression:"filters['strategy_filters'][id]"}})],1)],1)}),1)])]),t._v(" "),a("div",{staticClass:"filter-pane el-card is-always-shadow bord39 bgc14"},[a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("div",{staticClass:"bottom-line",staticStyle:{flex:"0 1 44px",padding:"18px 20px","box-sizing":"border-box"}},[a("span",{staticClass:"filter",attrs:{"font-nomal":""}},[t._v("代码过滤器")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"1px"},attrs:{type:"danger",size:"mini",plain:""},on:{click:function(e){return t.checkAllFilters("code_filters",!0)}}},[t._v("一键过滤")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"1px"},attrs:{type:"success",size:"mini",plain:""},on:{click:function(e){return t.checkAllFilters("code_filters",!1)}}},[t._v("一键通过")])],1),t._v(" "),a("div",{staticStyle:{flex:"1 0 0",overflow:"auto",padding:"20px"}},[t._l(t.filters.code_filters,function(e,s){return a("el-row",{key:s,staticClass:"filter-row"},[a("el-col",{staticStyle:{"margin-top":"4px"},attrs:{span:10}},[a("i",{staticClass:"el-icon-collection"}),a("span",{staticClass:"filter-code"},[t._v(t._s(s))])]),t._v(" "),a("el-col",{staticStyle:{"margin-top":"4px"},attrs:{span:10}},[a("el-switch",{staticStyle:{float:"right"},attrs:{"active-text":"过滤","inactive-text":"通过","inactive-color":"#13ce66","active-color":"#ff4949"},model:{value:t.filters.code_filters[s],callback:function(e){t.$set(t.filters.code_filters,s,e)},expression:"filters['code_filters'][id]"}})],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("删除代码过滤器")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",circle:"",icon:"el-icon-delete"},on:{click:function(e){return t.onDelCodeFilter(s)}}})],1)],1)],1)}),t._v(" "),a("el-row",{staticClass:"filter-row"},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("添加代码过滤器")]),t._v(" "),a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:function(e){return t.onAddCodeFilter()}}})],1)],1)],2)])]),t._v(" "),a("div",{staticClass:"filter-pane el-card is-always-shadow bord39 bgc14"},[a("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("div",{staticClass:"bottom-line",staticStyle:{flex:"0 1 44px",padding:"18px 20px","box-sizing":"border-box"}},[a("span",{staticClass:"filter font-nomal"},[t._v("通道过滤器")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"1px"},attrs:{type:"danger",size:"mini",plain:""},on:{click:function(e){return t.checkAllFilters("channel_filters",!0)}}},[t._v("一键过滤")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"1px"},attrs:{type:"success",size:"mini",plain:""},on:{click:function(e){return t.checkAllFilters("channel_filters",!1)}}},[t._v("一键通过")])],1),t._v(" "),a("div",{staticStyle:{flex:"1 0 0",overflow:"auto",padding:"20px"}},t._l(t.filters.channel_filters,function(e,s){return a("el-row",{key:s,staticClass:"filter-row"},[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-link"}),a("span",{staticClass:"filter-channel"},[t._v(t._s(s))])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-switch",{attrs:{"active-text":"过滤","inactive-text":"通过","inactive-color":"#13ce66","active-color":"#ff4949"},model:{value:t.filters.channel_filters[s],callback:function(e){t.$set(t.filters.channel_filters,s,e)},expression:"filters['channel_filters'][id]"}})],1)],1)}),1)])])]),t._v(" "),a("div",{staticStyle:{flex:"0 28px",margin:"2px 0"}},[a("span",{staticStyle:{"font-size":"12px",color:"gray","line-height":"24px"}},[t._v("\n                            当过滤器生效时，相关的信号都会被过滤掉！修改完过滤器，一定要记得"),a("strong",[t._v("提交")]),t._v("！提交以后会在"),a("strong",[t._v("1分钟内")]),t._v("生效！\n                        ")]),t._v(" "),a("el-button",{staticClass:"wt-btn-submit",staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:function(e){return t.onCommitFilters()}}},[t._v("提交")])],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"trd"==t.selCat,expression:"selCat=='trd'"},{name:"loading",rawName:"v-loading",value:t.loading.trade,expression:"loading.trade"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[a("el-table",{staticClass:"table",attrs:{border:"",data:t.showTrd,"summary-method":t.getTrdSum,"cell-style":{color:"#FFFFFF"},"show-summary":"","header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"}}},[a("el-table-column",{attrs:{label:"品种",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtTime(e.row.time)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"动作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:"开多"==e.row.action||"平空"==e.row.action?"text-danger":"text-success"},[t._v(t._s(e.row.action))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.fmtPrice(e.row.price)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"volume",label:"数量",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fee",label:"手续费",width:"80"}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"rnd"==t.selCat,expression:"selCat=='rnd'"},{name:"loading",rawName:"v-loading",value:t.loading.round,expression:"loading.round"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[a("el-table",{staticClass:"table",attrs:{border:"","summary-method":t.getRndSum,"show-summary":"","cell-style":{color:"#FFFFFF"},data:t.showRnd,"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"}}},[a("el-table-column",{attrs:{label:"品种",width:"180",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"方向",width:"64"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:"LONG"==e.row.direct?"text-danger":"text-success"},[t._v(t._s("LONG"==e.row.direct?"多":"空"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"开仓时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtTime(e.row.opentime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"开仓价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.fmtPrice(e.row.openprice)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平仓时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"font-nomal"},[t._v(t._s(t.fmtTime(e.row.closetime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平仓价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.fmtPrice(e.row.closeprice)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"qty",label:"数量",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"盈亏",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.profit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.profit.toFixed(1)))])]}}])})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"fnd"==t.selCat,expression:"selCat=='fnd'"},{name:"loading",rawName:"v-loading",value:t.loading.fund,expression:"loading.fund"}],staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[a("div",{staticClass:"top-line",staticStyle:{height:"40px",display:"inline-block",flex:"0",margin:"-4px",padding:"10px"}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"2px",color:"#2C87FA","margin-right":"1em"},attrs:{span:2}},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("a",[t._v("资金规模")])]),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{staticClass:"group_dropdown2",attrs:{placeholder:"请输入资金规模",size:"mini",type:"number",min:"1000000",step:"1000000"},model:{value:t.capital,callback:function(e){t.capital=e},expression:"capital"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"2px"},attrs:{span:2}},[a("el-button",{staticClass:"wt-btn-Refresh",staticStyle:{"font-size":"12px","margin-left":"5px"},attrs:{size:"mini",plain:""},on:{click:t.onClickResetCapital}},[t._v("刷新数据")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{flex:"1",width:"100%",overflow:"auto",height:"50%"}},[a("div",{staticStyle:{"max-height":"100%"}},[a("el-table",{staticClass:"table",attrs:{border:"","header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},"cell-style":{color:"#FFFFFF"},data:t.showFnd}},[a("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.fmtDate(e.row.date)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当日盈亏",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.profit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.profit.toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平仓盈亏",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.closeprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.closeprofit.toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"累计平仓盈亏",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.totalprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.totalprofit.toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"浮动盈亏",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.dynprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.dynprofit.toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"fee",label:"手续费",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.fee.toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"累计手续费",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalfee.toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"动态权益",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.dynbalance+e.row.capital>=0?"text-danger":"text-success"},[t._v(t._s((e.row.dynbalance+e.row.capital).toFixed(2)))])]}}])})],1)],1)]),t._v(" "),t.isAdmin?a("div",{staticStyle:{flex:"1",width:"100%",overflow:"auto",display:"flex","flex-direction":"column",margin:"4px"}},[a("div",{staticStyle:{flex:"1",width:"100%"}},[a("div",{staticStyle:{width:"98%",height:"98%"},attrs:{id:"grptrend"}})])]):t._e()])]),t._v(" "),a("el-footer",{staticClass:"footer-bg"},[a("el-row",[a("span",{staticStyle:{"font-size":"12px",color:"gray","line-height":"24px"}},[t._v("数据刷新时间: "+t._s(t.refreshTime))]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":t.showPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",size:"mini",total:t.dataLength},on:{"size-change":t.onPageSizeChange,"current-change":t.onPageChange}})],1)],1)],1)],1)},staticRenderFns:[]};var D=s("VU/8")(N,k,!1,function(t){s("fePL")},"data-v-67810dbc",null).exports,j=s("E5Az"),T=(s("tWbI"),s("uqUb"),s("5IAE"),s("4/hK"),s("Yokd"),s("GUiZ"),s("Z6qg"),s("aGTD"),s("7Xsf"),s("THjC"),s("Kk9m"),s("fo6W"),s("U3HU"),s("soCA"),s("aX1R"),s("vq+x"),s("Yklg"),{name:"editor",props:{groupid:{type:String,default:function(){return""}}},computed:{curFilePath:function(){return null==this.curFile?"":this.curFile.path}},components:{codemirror:j.codemirror},watch:{groupid:function(t,e){t=t||"",e=e||"",0!=t.length&&t!=e&&this.queryFiles()}},data:function(){return{folders:[],edit:!1,filename:"",content_s:"",content_backup:"",curFile:null,fileOnway:!1,cmOptions:{mode:"python",keyMap:"sublime",lineNumbers:!0,smartIndent:!0,indentUnit:4,indentWithTabs:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],foldGutter:!0,autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,readOnly:!0,theme:"ayu-dark"}}},methods:{queryFiles:function(){var t=this,e=this;e.$api.getGroupDir(e.groupid,function(s){s.result<0?e.$notify.error("获取组合目录结构失败："+s.message):t.folders=[s.tree]})},handleFileClick:function(t){var e=this;if(t.isfile){var s=t.path.split("."),a=s[s.length-1].toLowerCase();if(-1==["py","json","js","csv","yaml"].indexOf(a))return void this.$notify.error("该文件不可查看");e.fileOnway=!0,e.curFile=t,e.$api.getGroupFile(this.groupid,t.path,function(t){t.result<0?e.$notify.error("获取文件内容失败"+t.message):(e.content_s=t.content,e.cmOptions.mode=function(t){return"py"==t?"python":"yaml"==t?"text/yaml":"json"==t?{name:"javascript",json:!0}:"js"==t?"javascript":"text/plain"}(a),e.fileOnway=!1)})}},onClickEdit:function(){this.content_backup=this.content_s,this.cmOptions.readOnly=!1,this.edit=!0},onClickCancel:function(){var t=this;this.content_s!=this.content_backup?this.$confirm("内容已被修改，确定要放弃修改吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.content_s=t.content_backup,t.cmOptions.readOnly=!0,t.edit=!1}).catch(function(){}):(this.content_s=this.content_backup,this.cmOptions.readOnly=!0,this.edit=!1)},onClickCommit:function(){var t=this;this.loading=!0,this.$api.commitGroupFile(this.groupid,this.curFile.path,this.content_s,function(e){e.result<0?t.$message.error("文件提交失败:"+e.message):t.$message({message:"文件提交成功",type:"success"}),t.edit=!1,t.cmOptions.readOnly=!0,t.loading=!1})}},mounted:function(){}}),I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bord39",staticStyle:{height:"99%",width:"100%",display:"flex","flex-direction":"row",padding:"2px"}},[s("div",{staticStyle:{flex:"0 320px","min-width":"320px",margin:"4px"}},[s("div",{staticClass:"bord39",staticStyle:{height:"98%",overflow:"auto","border-radius":"2px"}},[s("el-tree",{staticStyle:{"background-color":"transparent",color:"#97979E"},attrs:{data:t.folders},on:{"node-click":t.handleFileClick}})],1)]),t._v(" "),s("div",{staticStyle:{flex:"1",margin:"4px",display:"flex","flex-direction":"column",overflow:"auto"}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fileOnway,expression:"fileOnway"}],staticClass:"bord39",staticStyle:{flex:"1 0 auto",height:"0",width:"100%",overflow:"auto","border-radius":"2px"}},[s("codemirror",{ref:"mycode",staticStyle:{height:"100%"},attrs:{options:t.cmOptions},model:{value:t.content_s,callback:function(e){t.content_s=e},expression:"content_s"}})],1),t._v(" "),s("div",{staticStyle:{flex:"0 36px","margin-top":"4px"}},[s("span",{staticStyle:{"font-size":"12px",color:"gray",float:"left"}},[t._v("当前文件:"+t._s(t.curFilePath))]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],staticClass:"wt-btn-Refresh",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){return t.onClickEdit()}}},[s("i",{staticClass:"el-icon-edit"}),t._v("修改\n            ")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"wt-btn-Refresh",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){return t.onClickCommit()}}},[s("i",{staticClass:"el-icon-set-up"}),t._v("提交\n            ")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"wt-btn-Cancel",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){return t.onClickCancel()}}},[s("i",{staticClass:"el-icon-refresh-left"}),t._v("取消\n            ")])],1)])])},staticRenderFns:[]};var z={name:"empty",components:{StrategyData:_,ChannelData:C,PorfolioData:D,Editor:s("VU/8")(T,I,!1,function(t){s("duJY"),s("w7/U")},"data-v-d1a89864",null).exports},computed:f()({},Object(p.b)(["cache"]),{isAdmin:function(){var t=this.cache.userinfo;return!!t&&("admin"==t.role||"superman"==t.role)},groupid:function(){return null==this.groupinfo?"":this.groupinfo.id}}),props:{groupinfo:{type:Object,default:function(){return{id:"",name:"",path:"",info:"",gtype:"cta",datmod:"auto"}}}},watch:{groupinfo:function(t,e){var s=this;null!=t&&(null!=e&&t.id==e.id||(this.logScroll="auto"==t.datmod,setTimeout(function(){s.queryLogs(!0)},300)))}},data:function(){return{selData:"sdata",logs:"",logfilter:"total",logCache:"",logLines:0,logScroll:!0,logOnway:!1,autoLog:!1,logInterval:0,logTime:(new Date).format("yyyy.MM.dd hh:mm:ss")}},methods:{handleClickTab:function(t,e){var s=this;this.selData=t.name,"pdata"==t.name&&setTimeout(function(){s.$refs.portfolio.$emit("resize")},150)},handleClickQryLog:function(){var t=this;setTimeout(function(){t.queryLogs(!0)},300)},handleCheckAutoLog:function(t){this.resetLogInterval()},resetLogInterval:function(){var t=this;this.autoLog?(0!=this.logInterval&&clearInterval(this.logInterval),this.logInterval=setInterval(function(){t.queryLogs()},15e3)):0!=this.logInterval&&clearInterval(this.logInterval)},queryLogs:function(t){var e=this;t=t||!1;var s=this;""!=this.groupinfo.id&&(s.logOnway=!0,this.$api.getLogs(this.groupinfo.id,this.logfilter,function(a){a.result<0?(e.logs="",e.logLines=0,e.$notify.error("组合日志拉取失败："+a.message),s.$nextTick(function(){s.$refs.logs.scrollTo(0,0)})):(e.logs=a.content,e.logLines=a.lines||0,s.$nextTick(function(){var t=s.$refs.logs.scrollHeight;s.$refs.logs.scrollTo(0,t)})),s.logTime=(new Date).format("yyyy.MM.dd hh:mm:ss"),s.logOnway=!1,t&&s.resetLogInterval()}))},processLog:function(t){var e=this,s=t.message||"";if(s.length>0){var a=0==e.logCache.length,i="["+new Date(t.time).format("yyyy.MM.dd hh:mm:ss")+" - "+t.tag+" ] "+s+"\n";e.logCache+=i,e.logLines++,a&&e.$nextTick(function(){e.logLines>=200&&(e.logs="",e.logLines=0),e.logs+=e.logCache,e.logCache="",e.$nextTick(function(){var t=e.$refs.logs.scrollHeight;e.$refs.logs.scrollTo(0,t)})})}},processEvent:function(t){var e=t.evttype||"";if(""!=e)if("notify"==e)this.$message({title:"订单回报",type:"error",message:"交易通道{0}错误：{1}".format(t.channel,t.data),duration:0,showClose:!0});else if("order"==e){if(!t.data.canceled)return;this.$notify({title:"订单回报",type:"error",message:"交易通道{0}订单已撤销，本地订单号：{1}".format(t.channel,t.data.localid)})}else if("trade"==e){var s=(t.data.isopen?"开":"平")+(t.data.islong?"多":"空");this.$notify({title:"成交回报",type:"success",message:"交易通道：{0}，操作：{1}，代码：{2}，数量：{3}，成交价：{4}，本地订单号：{5}".format(t.channel,s,t.data.code,t.data.volume,t.data.price,t.data.localid)})}}},mounted:function(){var t=this;t.$on("notify",function(e){if(e.groupid==t.groupinfo.id)if("gplog"==e.type){if(!t.logScroll)return;t.processLog(e)}else"chnlevt"==e.type&&t.processEvent(e)})}},A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"100vh",width:"100%","margin-top":"5px"}},[s("el-row",{staticStyle:{height:"100%"}},[s("el-col",{staticStyle:{height:"100%"},attrs:{span:8}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0",margin:"2px 4px 0px 4px","min-height":"39px",display:"flex","flex-direction":"row"}},[s("div",{staticClass:"simtab",staticStyle:{flex:"0"}},[s("span",{staticClass:"font-nomal"},[t._v("滚动日志")])]),t._v(" "),s("div",{staticStyle:{flex:"1","margin-top":"6px"}}),t._v(" "),s("div",{staticStyle:{flex:"0 160px","margin-top":"6px",display:"inline-block"}},[s("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.logScroll,expression:"!logScroll"}]},[s("el-col",{attrs:{span:11}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每个15秒刷新一次",placement:"top"}},[s("el-checkbox",{staticClass:"checkbox_color",staticStyle:{float:"right","margin-top":"6px"},on:{change:t.handleCheckAutoLog},model:{value:t.autoLog,callback:function(e){t.autoLog=e},expression:"autoLog"}},[t._v("自动刷新")])],1)],1),t._v(" "),s("el-col",{attrs:{offset:1,span:12}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",plain:""},on:{click:function(e){return t.handleClickQryLog()}}},[t._v("刷新")])],1)],1)],1)]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.logOnway,expression:"logOnway"}],staticClass:"no-top-line",staticStyle:{flex:"1",margin:"0 4px"}},[s("textarea",{ref:"logs",staticClass:"el-textarea__inner",attrs:{readonly:"readonly",autocomplete:"off",placeholder:"这里是日志内容"},domProps:{value:t.logs}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.logScroll,expression:"!logScroll"}],staticStyle:{flex:"0 24px","align-items":"right"}},[s("span",{staticStyle:{"font-size":"12px",color:"gray"}},[t._v("日志刷新时间: "+t._s(t.logTime))])])])]),t._v(" "),s("el-col",{staticClass:"left-line",staticStyle:{height:"100%"},attrs:{span:16}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0",margin:"2px 4px 0px 4px","min-height":"44px"}},[s("el-tabs",{staticClass:"grp_tabs",staticStyle:{height:"100%",border:"0"},attrs:{value:t.selData,type:"card"},on:{"tab-click":t.handleClickTab}},[s("el-tab-pane",{attrs:{label:"策略管理",name:"sdata"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"组合管理",name:"pdata"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"通道管理",name:"tdata"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"配置管理",name:"editor"}})],1)],1),t._v(" "),s("div",{staticStyle:{flex:"1","margin-top":"-4px",overflow:"auto"}},[s("StrategyData",{directives:[{name:"show",rawName:"v-show",value:"sdata"==t.selData,expression:"selData=='sdata'"}],attrs:{groupid:t.groupid}}),t._v(" "),s("ChannelData",{directives:[{name:"show",rawName:"v-show",value:"tdata"==t.selData,expression:"selData=='tdata'"}],attrs:{groupid:t.groupid}}),t._v(" "),s("PorfolioData",{directives:[{name:"show",rawName:"v-show",value:"pdata"==t.selData,expression:"selData=='pdata'"}],ref:"portfolio",attrs:{groupid:t.groupid}}),t._v(" "),s("Editor",{directives:[{name:"show",rawName:"v-show",value:"editor"==t.selData,expression:"selData=='editor'"}],attrs:{groupid:t.groupid}})],1)])])],1)],1)},staticRenderFns:[]};var E=s("VU/8")(z,A,!1,function(t){s("1lGd")},"data-v-45a3c652",null).exports,O={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"empty-box"},[e("div",{staticClass:"content"},[e("h2",[this._v("尚未添加组合")])])])}]};var F=s("VU/8")({name:"empty",components:{},data:function(){return{}},methods:{}},O,!1,function(t){s("cNKU")},"data-v-a9c83ba8",null).exports,$={name:"schedule",computed:f()({},Object(p.b)(["folders"])),props:{fixinfo:{type:Boolean,default:function(){return!1}},forapp:{type:Boolean,default:function(){return!1}},config:{type:Object,default:function(){return{id:"",folder:"",path:"",param:"",mqurl:"",span:3,guard:!1,redirect:!1,schedule:{active:!0,weekflag:"0111110",weekmask:[!1,!0,!0,!0,!0,!0,!1],tasks:[{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0}]}}}}},data:function(){return{showfolders:!1,selfolder:"",actions:["启动","停止","重启"]}},methods:{onLinkPython:function(){var t=this;this.$api.getPythonPath(function(e){e.result<0?t.$alert(e.message):t.config.path=e.path})},handlePickFolder:function(t){var e=this,s=this;s.selfolder="",0==s.folders.length?this.$api.getFolders(function(t){t.result<0?s.$alert(t.message):(e.$store.commit("setfolders",{folders:[t.tree]}),s.showfolders=!0)}):s.showfolders=!0},handleFolderPicked:function(){""==this.selfolder?this.$alert("请选择目录"):(this.config.folder=this.selfolder,this.showfolders=!1)},handleFolderClick:function(t){this.selfolder=t.path},onConfigCommit:function(){var t=this,e=JSON.parse(w()(this.config));if(0!=e.path.length)if(0!=e.id.length)if(0!=e.folder.length){e.schedule.weekflag="";for(var s=0;s<7;s++)e.schedule.weekflag+=e.schedule.weekmask[s]?"1":"0";for(var a=0;a<6;a++){var i=e.schedule.tasks[a].time;i=i.replace(":",""),e.schedule.tasks[a].time=parseInt(i)}e.redirect=!this.forapp,e.isapp=this.forapp,this.$confirm("确定要提交该调度配置?","自动调度",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){delete e.schedule.weekmask,t.$api.commitMonCfg({config:e},function(e){e.result<0?t.$message.error(e.message):(t.$message({message:"监控配置已提交成功",type:"success"}),t.$emit("cfgudt"))})})}else this.$alert("执行目录不能为空");else this.$alert("应用ID不能为空");else this.$alert("执行程序路径不能为空")}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dark-inner bgc14 font-namol",staticStyle:{display:"flex","flex-direction":"column",padding:"4px 20px"}},[t._m(0),t._v(" "),a("el-row",{staticClass:"moncfg-tile-bg"},[a("span",{staticClass:"font-nomal"},[a("img",{attrs:{src:s("1rJ0")}}),t._v("任务信息")])]),t._v(" "),a("div",{staticClass:"config-label"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("a",[t._v("任务ID：")])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{size:"mini",disabled:t.fixinfo},model:{value:t.config.id,callback:function(e){t.$set(t.config,"id",e)},expression:"config.id"}})],1),t._v(" "),a("el-col",{attrs:{span:4,offset:2}},[a("a",[t._v("启动参数：")])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{size:"mini",placeholder:"run.py"},model:{value:t.config.param,callback:function(e){t.$set(t.config,"param",e)},expression:"config.param"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("a",[t._v("执行程序：")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{size:"mini",placeholder:"python执行程序所在目录，请上服务器查询"},model:{value:t.config.path,callback:function(e){t.$set(t.config,"path",e)},expression:"config.path"}},[a("el-tooltip",{attrs:{slot:"append",effect:"dark",content:"直接获取python路径",placement:"top"},slot:"append"},[a("el-button",{staticClass:"icon-link-btn",attrs:{icon:"el-icon-link"},on:{click:t.onLinkPython}})],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("a",[t._v("工作目录：")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{size:"mini",disabled:t.fixinfo},model:{value:t.config.folder,callback:function(e){t.$set(t.config,"folder",e)},expression:"config.folder"}},[a("el-tooltip",{attrs:{slot:"append",effect:"dark",content:"选择组合所在的目录",placement:"top"},slot:"append"},[a("el-button",{staticClass:"icon-link-btn",attrs:{icon:"el-icon-folder",disabled:t.fixinfo},on:{click:t.handlePickFolder}})],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("a",[t._v("消息地址：")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入消息队列的URL",disabled:t.forapp},model:{value:t.config.mqurl,callback:function(e){t.$set(t.config,"mqurl",e)},expression:"config.mqurl"}})],1)],1)],1),t._v(" "),a("el-row",{staticClass:"moncfg-tile-bg"},[a("span",{staticClass:"font-nomal"},[a("img",{attrs:{src:s("1rJ0")}}),t._v("监控设置")])]),t._v(" "),a("div",{staticClass:"config-row"},[a("div",{staticStyle:{flex:"0","margin-top":"6px","padding-right":"16px"}},[a("el-checkbox",{model:{value:t.config.guard,callback:function(e){t.$set(t.config,"guard",e)},expression:"config.guard"}},[t._v("进程守护")])],1),t._v(" "),a("div",{staticStyle:{flex:"0:display:inline"}},[a("span",{staticClass:"config-label"},[t._v("检测间隔")]),t._v(" "),a("el-input-number",{attrs:{size:"mini",min:1,max:100,label:"检测间隔"},model:{value:t.config.span,callback:function(e){t.$set(t.config,"span",e)},expression:"config.span"}}),t._v(" "),a("span",{staticClass:"config-label"},[t._v("s")])],1),t._v(" "),a("div",{staticStyle:{flex:"1"}}),t._v(" "),a("div",{staticStyle:{flex:"0","margin-top":"6px"}},[a("el-checkbox",{model:{value:t.config.schedule.active,callback:function(e){t.$set(t.config.schedule,"active",e)},expression:"config.schedule.active"}},[t._v("计划任务")])],1)]),t._v(" "),a("el-row",{staticClass:"moncfg-tile-bg"},[a("span",{staticClass:"font-nomal"},[a("img",{attrs:{src:s("1rJ0")}}),t._v("计划任务")])]),t._v(" "),a("div",{staticClass:"config-row",staticStyle:{"margin-left":"5em"}},[a("div",{staticClass:"week-marker"},[a("el-checkbox",{attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.weekmask[0],callback:function(e){t.$set(t.config.schedule.weekmask,0,e)},expression:"config.schedule.weekmask[0]"}},[t._v("周日")])],1),t._v(" "),a("div",{staticClass:"week-marker"},[a("el-checkbox",{attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.weekmask[1],callback:function(e){t.$set(t.config.schedule.weekmask,1,e)},expression:"config.schedule.weekmask[1]"}},[t._v("周一")])],1),t._v(" "),a("div",{staticClass:"week-marker"},[a("el-checkbox",{attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.weekmask[2],callback:function(e){t.$set(t.config.schedule.weekmask,2,e)},expression:"config.schedule.weekmask[2]"}},[t._v("周二")])],1),t._v(" "),a("div",{staticClass:"week-marker"},[a("el-checkbox",{attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.weekmask[3],callback:function(e){t.$set(t.config.schedule.weekmask,3,e)},expression:"config.schedule.weekmask[3]"}},[t._v("周三")])],1),t._v(" "),a("div",{staticClass:"week-marker"},[a("el-checkbox",{attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.weekmask[4],callback:function(e){t.$set(t.config.schedule.weekmask,4,e)},expression:"config.schedule.weekmask[4]"}},[t._v("周四")])],1),t._v(" "),a("div",{staticClass:"week-marker"},[a("el-checkbox",{attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.weekmask[5],callback:function(e){t.$set(t.config.schedule.weekmask,5,e)},expression:"config.schedule.weekmask[5]"}},[t._v("周五")])],1),t._v(" "),a("div",{staticClass:"week-marker"},[a("el-checkbox",{attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.weekmask[6],callback:function(e){t.$set(t.config.schedule.weekmask,6,e)},expression:"config.schedule.weekmask[6]"}},[t._v("周六")])],1)]),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-left":"5em"},attrs:{span:5}},[a("el-checkbox",{staticStyle:{"margin-top":"0.4em"},attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.tasks[0].active,callback:function(e){t.$set(t.config.schedule.tasks[0],"active",e)},expression:"config.schedule.tasks[0].active"}},[t._v("任务一")])],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"-1em"},attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入时间","suffix-icon":"el-icon-time",size:"mini",type:"time",disabled:!t.config.schedule.tasks[0].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[0].time,callback:function(e){t.$set(t.config.schedule.tasks[0],"time",e)},expression:"config.schedule.tasks[0].time"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"2em"},attrs:{span:5,offset:1}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:!t.config.schedule.tasks[0].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[0].action,callback:function(e){t.$set(t.config.schedule.tasks[0],"action",e)},expression:"config.schedule.tasks[0].action"}},t._l(t.actions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-left":"5em"},attrs:{span:5}},[a("el-checkbox",{staticStyle:{"margin-top":"0.4em"},attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.tasks[1].active,callback:function(e){t.$set(t.config.schedule.tasks[1],"active",e)},expression:"config.schedule.tasks[1].active"}},[t._v("任务二")])],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"-1em"},attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入时间","suffix-icon":"el-icon-time",size:"mini",type:"time",disabled:!t.config.schedule.tasks[1].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[1].time,callback:function(e){t.$set(t.config.schedule.tasks[1],"time",e)},expression:"config.schedule.tasks[1].time"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"2em"},attrs:{span:5,offset:1}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:!t.config.schedule.tasks[1].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[1].action,callback:function(e){t.$set(t.config.schedule.tasks[1],"action",e)},expression:"config.schedule.tasks[1].action"}},t._l(t.actions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-left":"5em"},attrs:{span:5}},[a("el-checkbox",{staticStyle:{"margin-top":"0.4em"},attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.tasks[2].active,callback:function(e){t.$set(t.config.schedule.tasks[2],"active",e)},expression:"config.schedule.tasks[2].active"}},[t._v("任务三")])],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"-1em"},attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入时间","suffix-icon":"el-icon-time",size:"mini",type:"time",disabled:!t.config.schedule.tasks[2].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[2].time,callback:function(e){t.$set(t.config.schedule.tasks[2],"time",e)},expression:"config.schedule.tasks[2].time"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"2em"},attrs:{span:5,offset:1}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:!t.config.schedule.tasks[2].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[2].action,callback:function(e){t.$set(t.config.schedule.tasks[2],"action",e)},expression:"config.schedule.tasks[2].action"}},t._l(t.actions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-left":"5em"},attrs:{span:5}},[a("el-checkbox",{staticStyle:{"margin-top":"0.4em"},attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.tasks[3].active,callback:function(e){t.$set(t.config.schedule.tasks[3],"active",e)},expression:"config.schedule.tasks[3].active"}},[t._v("任务四")])],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"-1em"},attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入时间","suffix-icon":"el-icon-time",size:"mini",type:"time",disabled:!t.config.schedule.tasks[3].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[3].time,callback:function(e){t.$set(t.config.schedule.tasks[3],"time",e)},expression:"config.schedule.tasks[3].time"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"2em"},attrs:{span:5,offset:1}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:!t.config.schedule.tasks[3].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[3].action,callback:function(e){t.$set(t.config.schedule.tasks[3],"action",e)},expression:"config.schedule.tasks[3].action"}},t._l(t.actions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-left":"5em"},attrs:{span:5}},[a("el-checkbox",{staticStyle:{"margin-top":"0.4em"},attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.tasks[4].active,callback:function(e){t.$set(t.config.schedule.tasks[4],"active",e)},expression:"config.schedule.tasks[4].active"}},[t._v("任务五")])],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"-1em"},attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入时间","suffix-icon":"el-icon-time",size:"mini",type:"time",disabled:!t.config.schedule.tasks[4].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[4].time,callback:function(e){t.$set(t.config.schedule.tasks[4],"time",e)},expression:"config.schedule.tasks[4].time"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"2em"},attrs:{span:5,offset:1}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:!t.config.schedule.tasks[4].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[4].action,callback:function(e){t.$set(t.config.schedule.tasks[4],"action",e)},expression:"config.schedule.tasks[4].action"}},t._l(t.actions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"margin-left":"5em"},attrs:{span:5}},[a("el-checkbox",{staticStyle:{"margin-top":"0.4em"},attrs:{disabled:!t.config.schedule.active},model:{value:t.config.schedule.tasks[5].active,callback:function(e){t.$set(t.config.schedule.tasks[5],"active",e)},expression:"config.schedule.tasks[5].active"}},[t._v("任务六")])],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"-1em"},attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入时间","suffix-icon":"el-icon-time",size:"mini",type:"time",disabled:!t.config.schedule.tasks[5].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[5].time,callback:function(e){t.$set(t.config.schedule.tasks[5],"time",e)},expression:"config.schedule.tasks[5].time"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"2em"},attrs:{span:5,offset:1}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:!t.config.schedule.tasks[5].active||!t.config.schedule.active},model:{value:t.config.schedule.tasks[5].action,callback:function(e){t.$set(t.config.schedule.tasks[5],"action",e)},expression:"config.schedule.tasks[5].action"}},t._l(t.actions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1)],1),t._v(" "),a("div",{staticStyle:{padding:"8px 4px"}},[a("el-row",{staticStyle:{width:"100%",flex:"1",display:"inline",left:"30%"}},[a("el-button",{staticClass:"wt-btn-big",staticStyle:{"background-color":"#0093FF",color:"#EDF8FF",border:"0",width:"200px",height:"40px"},attrs:{size:"mini",plain:""},on:{click:function(e){return t.onConfigCommit()}}},[t._v("提交设置")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择目录",visible:t.showfolders,width:"25%"},on:{"update:visible":function(e){t.showfolders=e}}},[a("div",{staticClass:"Select-Directory"},[a("el-tree",{attrs:{data:t.folders},on:{"node-click":t.handleFolderClick}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showfolders=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.handleFolderPicked}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"moncfg-tile"},[e("h4",{staticStyle:{"margin-left":"15px"}},[this._v("调度设置")])])}]};var G=s("VU/8")($,U,!1,function(t){s("6EWr")},"data-v-235975fc",null).exports,Y={name:"monitor",computed:f()({},Object(p.b)(["folders","cache"]),{grpname:function(){return null==this.curGroup?"组合基本信息":this.curGroup.name},isAdmin:function(){var t=this.cache.userinfo;return!!t&&("admin"==t.role||"superman"==t.role)}}),components:{Group:E,Empty:F,Schedule:G},data:function(){return{groups:[],cmdid:"",selectedIdx:"",schedule:!1,baseinfo:!1,showgrpdlg:!1,curGroup:null,addGroup:!1,editGroup:!1,capital:5e6,copyGroup:{id:"",name:"",path:"",info:"",gtype:"cta",datmod:"mannual",env:"product",mqurl:""},showfolders:!1,selfolder:"",monitors:{},curMonCfg:{id:"",folder:"",path:"",param:"",span:3,guard:!1,redirect:!1,schedule:{active:!1,weekflag:"0111110",weekmask:[!1,!0,!0,!0,!0,!0,!1],tasks:[{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0}]}}}},methods:{handlePickFolder:function(t){var e=this,s=this;s.selfolder="",0==s.folders.length?this.$api.getFolders(function(t){t.result<0?s.$notify.error("查询目录结构出错："+t.message):(e.$store.commit("setfolders",{folders:[t.tree]}),s.showfolders=!0)}):s.showfolders=!0},handleFolderPicked:function(){""==this.selfolder?this.$alert("请选择目录"):(this.copyGroup.path=this.selfolder,this.showfolders=!1)},handleFolderClick:function(t){this.selfolder=t.path},handleTabSel:function(t){var e=this;e.selectedIdx=t,e.groups.forEach(function(s){if(s.id==t)return e.curGroup=s,!0}),e.$pusher.subscribe(e.curGroup.id),console.log("subscribe to "+e.curGroup.id)},handleClickSchedule:function(t){var e=this,s=this,a=t.id;s.monitors[a]?(s.curMonCfg=s.monitors[a],s.schedule=!0):s.$api.getMonCfg(a,function(i){if(i.result<0)s.$notify.error(i.message);else if(i.config){var n=i.config;n.schedule.weekmask=[];for(var o=0;o<n.schedule.weekflag.length;o++)n.schedule.weekmask.push("1"==n.schedule.weekflag[o]);for(var l=0;l<6;l++){var r=n.schedule.tasks[l].time+"";1==r.length?n.schedule.tasks[l].time="00:0"+r:2==r.length?n.schedule.tasks[l].time="00:"+r:3==r.length?n.schedule.tasks[l].time="0"+r[0]+":"+r.substr(1):n.schedule.tasks[l].time=r.substr(0,2)+":"+r.substr(2)}s.monitors[a]=n,s.curMonCfg=n,s.schedule=!0}else e.$confirm("该组合尚未配置自动调度，马上去配置?","自动调度",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:"",folder:"",path:"",param:"",span:3,guard:!1,redirect:!1,mqurl:"",schedule:{active:!1,weekflag:"0111110",weekmask:[!1,!0,!0,!0,!0,!0,!1],tasks:[{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0}]}};e.id=t.id,e.folder=t.path,e.redirect=!0,e.mqurl=t.mqurl,s.curMonCfg=e,s.schedule=!0})})},onAddGroup:function(t){this.copyGroup={id:"",name:"",path:"",info:"",gtype:"cta",datmod:"mannual",env:"product",mqurl:""},this.addGroup=!0,this.showgrpdlg=!0,this.editGroup=!0},onDeleteGroup:function(t){var e=this;this.addGroup=!1,this.showgrpdlg=!1,this.$confirm("确定要删除组合["+t.name+"]?","组合管理",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delGroup(t.id,function(e){if(e.result<0)self.$notify.error("删除组合失败："+e.message);else for(var s=0;s<self.groups.length;s++)if(self.groups[s].id==t.id){self.groups.splice(s,1),s;break}})})},onCommitGroup:function(){var t=this,e=this,s=this.copyGroup;this.$api.commitGroup(s,this.addGroup?"add":"mod",function(a){a.result<0?e.$notify.error("提交组合信息失败："+a.message):(t.addGroup&&e.groups.push(s),e.showgrpdlg=!1,null==e.curGroup&&(e.curGroup=s))})},onCloseGrpDlg:function(t){t()},handleViewGroup:function(t){null!=t&&(this.copyGroup=JSON.parse(w()(t)),this.copyGroup.datmod=this.copyGroup.datmod||"mannual",this.addGroup=!1,this.editGroup=!1,this.showgrpdlg=!0)},handleStartGroup:function(t){var e=this;if(null!=t&&""!=t.id)if(t.running)this.$notify("组合正在运行");else{var s=this,a=t.id;s.monitors[a]?this.$api.startGroup(t.id,function(t){t.result<0&&e.$notify.error("启动组合失败："+t.message)}):s.$api.getMonCfg(a,function(i){if(i.result<0)s.$notify.error(i.message);else if(i.config){var n=i.config;n.schedule.weekmask=[];for(var o=0;o<n.schedule.weekflag.length;o++)n.schedule.weekmask.push("1"==n.schedule.weekflag[o]);for(var l=0;l<6;l++){var r=n.schedule.tasks[l].time+"";1==r.length?n.schedule.tasks[l].time="00:0"+r:2==r.length?n.schedule.tasks[l].time="00:"+r:3==r.length?n.schedule.tasks[l].time="0"+r[0]+":"+r.substr(1):n.schedule.tasks[l].time=r.substr(0,2)+":"+r.substr(2)}s.monitors[a]=n,e.$api.startGroup(t.id,function(t){t.result<0&&e.$notify.error(t.message)})}else s.$alert("该组合尚未配置调度，不能启动")})}},handleStopGroup:function(t){var e=this;null!=t&&""!=t.id&&(t.running?this.$confirm("确定要停止该组合吗?","手动停止",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.stopGroup(t.id,function(t){t.result<0&&e.$notify.error(t.message)})}):this.$notify("组合已经处于停止状态"))},refreshAllGrpFunds:function(){for(var t=this,e=this,s=function(s){var a=t.groups[s].id,i=t.groups[s];e.$api.getPortFunds(a,function(t){if(t.result<0)e.$notify.error("查询绩效出错："+t.message);else{var s=null,a=0,n=0;t.funds.forEach(function(t){t.dynbalance=t.balance+t.dynprofit,t.profit=t.closeprofit+t.dynprofit-(null==s?0:s.dynprofit)-t.fee,n+=t.closeprofit,a+=t.fee,t.totalfee=a,t.totalprofit=n,s=t}),t.funds.length>0?i.lastFund=t.funds[t.funds.length-1]:i.lastFund=null}})},a=0;a<this.groups.length;a++)s(a)}},mounted:function(){var t=this,e=this;setTimeout(function(){e.$api.getGroups(function(s){s.result<0?e.$notify.error("查询组合出错："+s.message):function(){s.groups.sort(function(t,e){return t.name.localeCompare(e.name)});for(var a=s.groups,i=e.capital,n=function(t){var s=a[t].id,n=a[t];e.$api.getPortFunds(s,function(t){if(t.result<0)e.$notify.error("查询绩效出错："+t.message);else{var s=null,a=0,o=0;t.funds.forEach(function(t){t.dynbalance=t.balance+t.dynprofit,t.capital=i,t.profit=t.closeprofit+t.dynprofit-(null==s?0:s.dynprofit)-t.fee,o+=t.closeprofit,a+=t.fee,t.totalfee=a,t.totalprofit=o,s=t}),t.funds.length>0?n.lastFund=t.funds[t.funds.length-1]:n.lastFund=null}})},o=0;o<a.length;o++)n(o);setTimeout(function(){e.groups=a,e.groups.length>0&&(e.selectedIdx=e.groups[0].id,e.curGroup=e.groups[0]),t.$store.commit("setgroups",{groups:a}),e.$pusher.on("connect",function(t){console.log("ws连接成功"),e.curGroup&&e.$pusher.subscribe(e.curGroup.id),console.log("subscribe to "+e.curGroup.id)})},500),e.$pusher.on("message",function(t){if("gpevt"==t.type&&("start"==t.evttype?setTimeout(function(){e.$notify({message:"组合"+t.groupid+"已启动",type:"success"})},300):"stop"==t.evttype&&setTimeout(function(){e.$notify.error("组合"+t.groupid+"已停止")},300)),"chnlevt"==t.type){var s=null,a=t.evttype||"",i=null;if(e.groups.forEach(function(e){e.id==t.groupid&&(i=e)}),null!=i){if("notify"==a)s={time:new Date,group:i.name,channel:t.channel,title:"事件通知",type:"error",message:"错误：{1}".format(t.channel,t.data)};else if("order"==a)t.data.canceled&&(s={time:new Date,group:i.name,channel:t.channel,title:"订单回报",type:"danger",message:"订单已撤销，本地订单号：{1}".format(t.channel,t.data.localid)});else if("trade"==a){var n=(t.data.isopen?"开":"平")+(t.data.islong?"多":"空");s={time:new Date,group:i.name,channel:t.channel,title:"成交回报",type:"success",message:"操作：{1}，代码：{2}，数量：{3}，成交价：{4}，本地订单号：{5}".format(t.channel,n,t.data.code,t.data.volume,t.data.price,t.data.localid)}}null!=s&&e.$emit("notify",s)}}null!=e.curGroup&&t.groupid==e.curGroup.id&&("gplog"==t.type||"chnlevt"==t.type?e.$refs.group&&e.$refs.group.$emit("notify",t):"gpevt"==t.type&&("start"==t.evttype?e.curGroup.running=!0:"stop"==t.evttype&&(e.curGroup.running=!1)))}),e.$pusher.init("ws://"+window.location.host,["auth","trade","order","notify"])}()})},300)}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"100%",height:"99%"}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"row"}},[s("div",{staticClass:"bgc1d",staticStyle:{flex:"0 260px",display:"flex","flex-direction":"column",height:"101%"}},[s("div",{staticClass:"bottom-line",staticStyle:{flex:"0 24px","line-height":"24px",padding:"10px 0","margin-top":"4px"}},[s("span",{staticClass:"font-nomal",staticStyle:{"font-size":"16px",padding:"10px","font-weight":"500"}},[t._v("组合列表")]),t._v(" "),t.isAdmin?s("el-tooltip",{staticClass:"item",staticStyle:{height:"24px","margin-top":"-7px","padding-bottom":"10px"},attrs:{effect:"dark",content:"刷新组合资金",placement:"top-start"}},[s("el-button",{staticClass:"font-nomal",staticStyle:{float:"right","margin-right":"5pt","font-size":"15px","padding-left":"0"},attrs:{type:"text ",icon:"el-icon-refresh"},on:{click:function(e){return t.refreshAllGrpFunds()}}})],1):t._e(),t._v(" "),t.isAdmin?s("el-tooltip",{staticClass:"item",staticStyle:{height:"24px","margin-top":"-7px","padding-bottom":"10px"},attrs:{effect:"dark",content:"添加组合",placement:"top-start"}},[s("el-button",{staticClass:"font-nomal",staticStyle:{float:"right","margin-right":"5pt","font-size":"15px","padding-left":"0"},attrs:{type:"text ",icon:"el-icon-plus"},on:{click:function(e){return t.onAddGroup()}}})],1):t._e()],1),t._v(" "),s("div",{staticStyle:{flex:"1",overflow:"auto"}},t._l(t.groups,function(e,a){return s("el-card",{key:a,staticClass:"grpmgr_card font-nomal bgc1d",staticStyle:{opacity:"1","margin-top":"1em",border:"0"},attrs:{index:e.id}},[s("el-row",{staticClass:"policyManagement"},[s("el-button",{staticClass:"title-btn",staticStyle:{float:"left","margin-left":"8pt"},attrs:{type:"primary"},on:{click:function(s){return t.handleTabSel(e.id)}}},[s("span",{class:e.id==t.selectedIdx?"grp-selected":""},[t._v(t._s(e.name))])]),t._v(" "),e.lastFund&&e.lastFund.profit?s("span",{class:e.lastFund.profit>=0?"text-rise":"text-fall",staticStyle:{float:"right","margin-right":"10px","margin-top":"7px"}},[t._v("\n                            "+t._s(e.lastFund.profit.toFixed(2))+"\n                        ")]):t._e()],1),t._v(" "),s("el-row",{staticStyle:{position:"relative","margin-bottom":"9px"}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.running,expression:"item.running==true"}],staticClass:"stopgrp",staticStyle:{"margin-left":"10pt"},on:{click:function(s){return t.handleStopGroup(e)}}},[s("div",{staticStyle:{"margin-left":"-1.1em","margin-top":"-0.5em"}},[s("i",{staticClass:"el-icon-switch-button font-white"}),s("span",{staticClass:"btntext"},[t._v("停止")])])]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.running,expression:"item.running==false"}],staticClass:"startgrp",staticStyle:{"margin-left":"10pt"},on:{click:function(s){return t.handleStartGroup(e)}}},[s("div",{staticStyle:{"margin-left":"-1.1em","margin-top":"-0.5em"}},[s("i",{staticClass:"el-icon-switch-button font-white"}),s("span",{staticClass:"btntext"},[t._v("启动")])])]),t._v(" "),t.isAdmin?s("el-tooltip",{staticClass:"item menu-item3",attrs:{effect:"dark",content:"配置策略组合的自动调度",placement:"top-start"}},[s("el-button",{staticClass:"font-nomal",staticStyle:{float:"right","margin-right":"5pt","font-size":"15px","padding-left":"0"},attrs:{type:"text ",icon:"el-icon-set-up"},on:{click:function(s){return t.handleClickSchedule(e)}}})],1):t._e(),t._v(" "),s("el-tooltip",{staticClass:"item menu-item2",attrs:{effect:"dark",content:"查看策略组合的基本信息",placement:"top-start"}},[s("el-button",{staticClass:"font-nomal",staticStyle:{float:"right","margin-right":"-5pt","font-size":"15px","margin-left":"0"},attrs:{type:"text ",icon:"el-icon-postcard"},on:{click:function(s){return t.handleViewGroup(e)}}})],1),t._v(" "),s("el-tooltip",{staticClass:"item menu-item1",attrs:{effect:"dark",content:"删除该组合",placement:"top-start"}},[s("el-button",{staticClass:"font-nomal",staticStyle:{float:"right","margin-right":"3pt","font-size":"15px","margin-left":"0"},attrs:{type:"text ",icon:"el-icon-delete"},on:{click:function(s){return t.onDeleteGroup(e)}}})],1)],1),t._v(" "),s("div",[s("el-divider",{staticClass:"divider1"}),t._v(" "),s("el-divider",{staticClass:"divider2"})],1)],1)}),1)]),t._v(" "),s("div",{staticClass:"bgc1d",staticStyle:{flex:"1",height:"101%"}},[s("div",{staticStyle:{height:"100%",width:"100%"}},[s("Empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groups.length,expression:"groups.length==0"}],staticStyle:{height:"100%",width:"100%"}}),t._v(" "),s("Group",{directives:[{name:"show",rawName:"v-show",value:0!=t.groups.length,expression:"groups.length!=0"}],ref:"group",staticStyle:{height:"100%",width:"100%"},attrs:{groupinfo:t.curGroup}})],1)])]),t._v(" "),s("el-drawer",{attrs:{title:"计划任务","with-header":!1,visible:t.schedule,direction:"rtl",size:"636px"},on:{"update:visible":function(e){t.schedule=e}}},[s("Schedule",{attrs:{config:t.curMonCfg,fixinfo:!0}})],1),t._v(" "),s("el-dialog",{attrs:{title:"选择目录",visible:t.showfolders,width:"25%"},on:{"update:visible":function(e){t.showfolders=e}}},[s("div",{staticClass:"all-line",staticStyle:{width:"100%",height:"300px",overflow:"auto"}},[s("el-tree",{attrs:{data:t.folders},on:{"node-click":t.handleFolderClick}})],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.showfolders=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.handleFolderPicked}},[t._v("确 定")])],1)]),t._v(" "),s("el-dialog",{staticClass:"dialog-group",attrs:{title:t.addGroup?"添加组合":"修改组合",visible:t.showgrpdlg,width:"25%","before-close":t.onCloseGrpDlg},on:{"update:visible":function(e){t.showgrpdlg=e}}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("组合ID：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{size:"mini",disabled:!t.editGroup},model:{value:t.copyGroup.id,callback:function(e){t.$set(t.copyGroup,"id",e)},expression:"copyGroup.id"}})],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("组合名称：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{size:"mini",disabled:!t.editGroup},model:{value:t.copyGroup.name,callback:function(e){t.$set(t.copyGroup,"name",e)},expression:"copyGroup.name"}})],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("组合路径：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{size:"mini",disabled:!t.editGroup},model:{value:t.copyGroup.path,callback:function(e){t.$set(t.copyGroup,"path",e)},expression:"copyGroup.path"}},[s("el-tooltip",{attrs:{slot:"append",effect:"dark",content:"选择组合所在的目录",placement:"top"},slot:"append"},[s("el-button",{attrs:{icon:"el-icon-folder",disabled:!t.editGroup},on:{click:t.handlePickFolder}})],1)],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("组合类型：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-radio",{attrs:{label:"cta",disabled:!t.editGroup},model:{value:t.copyGroup.gtype,callback:function(e){t.$set(t.copyGroup,"gtype",e)},expression:"copyGroup.gtype"}},[t._v("CTA组合")]),t._v(" "),s("el-radio",{attrs:{label:"hft",disabled:!t.editGroup},model:{value:t.copyGroup.gtype,callback:function(e){t.$set(t.copyGroup,"gtype",e)},expression:"copyGroup.gtype"}},[t._v("HFT组合")]),t._v(" "),s("el-radio",{attrs:{label:"sel",disabled:!t.editGroup},model:{value:t.copyGroup.gtype,callback:function(e){t.$set(t.copyGroup,"gtype",e)},expression:"copyGroup.gtype"}},[t._v("SEL组合")])],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("数据模式：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"组合会自动向监控服务推送数据",placement:"top"}},[s("el-radio",{attrs:{label:"auto",disabled:!t.editGroup},model:{value:t.copyGroup.datmod,callback:function(e){t.$set(t.copyGroup,"datmod",e)},expression:"copyGroup.datmod"}},[t._v("自动")])],1),t._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"监控服务只在有请求的时候去读取数据",placement:"top"}},[s("el-radio",{attrs:{label:"mannual",disabled:!t.editGroup},model:{value:t.copyGroup.datmod,callback:function(e){t.$set(t.copyGroup,"datmod",e)},expression:"copyGroup.datmod"}},[t._v("手动")])],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("消息地址：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"消息订阅地址要和配置文件中的notifier一致",placement:"top"}},[s("el-input",{attrs:{size:"mini",disabled:!t.editGroup||"auto"!=t.copyGroup.datmod,placeholder:"请输入消息队列的订阅地址"},model:{value:t.copyGroup.mqurl,callback:function(e){t.$set(t.copyGroup,"mqurl",e)},expression:"copyGroup.mqurl"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("组合环境：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-radio",{attrs:{label:"product",disabled:!t.editGroup},model:{value:t.copyGroup.env,callback:function(e){t.$set(t.copyGroup,"env",e)},expression:"copyGroup.env"}},[t._v("生产环境")]),t._v(" "),s("el-radio",{attrs:{label:"backtest",disabled:!t.editGroup},model:{value:t.copyGroup.env,callback:function(e){t.$set(t.copyGroup,"env",e)},expression:"copyGroup.env"}},[t._v("回测环境")])],1)],1),t._v(" "),s("el-row",{staticStyle:{height:"60px"}},[s("el-col",{attrs:{span:6}},[s("a",[t._v("组合介绍：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{staticClass:"textarea_a",attrs:{type:"textarea",disabled:!t.editGroup},model:{value:t.copyGroup.info,callback:function(e){t.$set(t.copyGroup,"info",e)},expression:"copyGroup.info"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.addGroup&&!t.editGroup,expression:"!addGroup && !editGroup"}],staticClass:"wt-btn-Refresh",attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-edit"},on:{click:function(e){t.editGroup=!0}}},[t._v("编辑")]),t._v(" "),s("el-button",{staticClass:"wt-btn-Refresh",attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-upload2"},on:{click:function(e){return t.onCommitGroup()}}},[t._v("提交")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"选择目录",visible:t.showfolders,width:"25%"},on:{"update:visible":function(e){t.showfolders=e}}},[s("div",{staticClass:"all-line",staticStyle:{width:"100%",height:"300px",overflow:"auto"}},[s("el-tree",{attrs:{data:t.folders},on:{"node-click":t.handleFolderClick}})],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showfolders=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{staticClass:"wt-btn-Refresh",attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.handleFolderPicked}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var Q=s("VU/8")(Y,P,!1,function(t){s("0/Yr")},"data-v-7239c96b",null).exports,B={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loginBox"},[e("div",{staticClass:"login"},[this._v("\n        在线部署功能建设中，敬请期待\n    ")])])}]};var W=s("VU/8")({name:"Deploy",data:function(){return{}},methods:{},mounted:function(){}},B,!1,function(t){s("DoUX")},"data-v-0cbbd64e",null).exports,q=(s("jQeI"),s("CK2l"),s("c+I8"),s("iHuw"),s("RkhK"),s("LxZp"),{name:"BTComp",props:{btInfo:{type:Object,default:function(){return null}},straInfo:{type:Object,default:function(){return null}}},watch:{btInfo:function(t,e){var s=this;null!=t&&(null!=e&&t.id==e.id||setTimeout(function(){s.queryTrades(),s.queryRounds(),s.queryFunds(),s.querySignals()},300))}},data:function(){return{loading:{signal:!1,round:!1,fund:!1,trade:!1},selCat:"summary",signals:[],rounds:[],funds:[],trades:[],kChart:null,tChart:null,bars:[]}},methods:{fmtBtTime:function(t){return(t+="").substr(0,4)+"."+t.substr(4,2)+"."+t.substr(6,2)+" "+t.substr(8,2)+":"+t.substr(10,2)},onCatSel:function(t,e){var s=this;this.selCat!=t.name&&(this.selCat=t.name,"kline"==t.name&&this.kChart?setTimeout(function(){s.kChart.resize()},300):"summary"==t.name&&this.tChart&&setTimeout(function(){s.tChart.resize()},300))},queryBars:function(){var t=this;if(null!=this.btInfo){var e=this.btInfo.state.code,s=this.btInfo.state.stime,a=this.btInfo.state.etime,i=this.btInfo.state.period;this.$api.getBtBars(e,i,s,a,function(e){e.result<0?t.$notify.error("拉取K线出错："+e.message):(t.bars=e.bars,t.paintChart(!1))})}},querySignals:function(){var t=this,e=this.straInfo.id,s=this.btInfo.id;this.loading.signal=!0,this.$api.getBtSignals(e,s,function(e){e.result<0?t.$notify.error("查询信号出错："+e.message):(t.signals=e.signals,t.signals.reverse()),t.loading.signal=!1})},queryTrades:function(){var t=this,e=this.straInfo.id,s=this.btInfo.id;this.loading.trade=!0,this.$api.getBtTrades(e,s,function(e){e.result<0?t.$notify.error("查询成交出错："+e.message):(e.trades.forEach(function(t){var e="";"OPEN"==t.offset?e+="开":e+="平","LONG"==t.direction?e+="多":e+="空",t.action=e}),t.trades=e.trades,t.trades.reverse()),t.loading.trade=!1,setTimeout(function(){t.queryBars()},300)})},queryRounds:function(){var t=this,e=this.straInfo.id,s=this.btInfo.id;this.loading.round=!1,this.$api.getBtRounds(e,s,function(e){e.result<0?t.$notify.error("查询回合出错："+e.message):(t.rounds=e.rounds,t.rounds.reverse()),t.loading.round=!1})},queryFunds:function(){var t=this,e=this.straInfo.id,s=this.btInfo.id;this.loading.fund=!0,this.$api.getBtFunds(e,s,function(e){e.result<0?t.$notify.error("查询绩效出错："+e.message):(t.funds=e.funds,t.funds.reverse(),t.paintTrend()),t.loading.fund=!1})},getTrdSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(e<3||e>5)a[e]="";else if(3!=e){if(4==e)a[e]=s.length+"笔";else if(5==e){var i=s.map(function(t){return Number(t.volume)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}}else a[e]="总计"}),a},getSigSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){e>1?a[e]="":0!=e?1==e&&(a[e]=s.length+"笔"):a[e]="总计"}),a},getRndSum:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(5==e||6==e||7==e||8==e)if(5!=e)if(6!=e){if(7==e){var i=s.map(function(t){return Number(t.qty)});i.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=i.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0)+"手"}else if(8==e){var n=s.map(function(t){return Number(t.profit)});n.every(function(t){return isNaN(t)})?a[e]="N/A":a[e]=n.reduce(function(t,e){var s=Number(e);return isNaN(s)?t:t+e},0).toFixed(1)}}else a[e]=s.length+"笔";else a[e]="总计";else a[e]=""}),a},paintChart:function(t){var e=this.bars||[];t=t||!1;null==this.kChart&&(this.kChart=this.$echarts.init(document.getElementById("bt_kline")));var s=[],a=[];e.forEach(function(e,i){var n=e.date+"";if(n=n.substr(0,4)+"/"+parseInt(n.substr(4,2))+"/"+parseInt(n.substr(6,2)),!t){var o=e.time%1e4+"";3==o.length&&(o="0"+o),n+=" "+o.substr(0,2)+":"+o.substr(2,2)}s.push(n),a.push([e.open,e.close,e.low,e.high])});var i=[],n=[],o="";JSON.parse(w()(this.trades)).reverse().forEach(function(t){var e=t.time+"";e=e.substr(0,4)+"/"+parseInt(e.substr(4,2))+"/"+parseInt(e.substr(6,2))+" "+e.substr(8,2)+":"+e.substr(10,2);var s="开多"==t.action||"平空"==t.action||"OL"==t.action||"CS"==t.action,a="开"==t.action[0]||"O"==t.action[0];if(o==e){var l=i[i.length-1];l.data.volume+=t.volume,l.data.flag+=a?1:2}else i.push({value:[e,t.price],symbol:"triangle",symbolRotate:s?0:180,symbolOffset:[0,s?"50%":"-50%"],itemStyle:{color:s?"#f00":"#0f0"},data:{isBuy:s,volume:t.volume,price:t.price,flag:a?1:2}});var r=i[i.length-1],c=i[i.length-2];if(r.data.flag>=2){var u=(r.data.price-c.data.price)*(s?-1:1)>=0;n.push({source:i.length-2,target:i.length-1,lineStyle:{color:u?"#f00":"#0f0",type:"solid",width:1}})}o=e});var l={title:{text:this.btInfo.state.code+" "+this.btInfo.state.period},toolbox:{show:!0,orient:"horizontal",feature:{saveAsImage:{},restore:{}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(t){t.sort(function(t,e){return t.seriesIndex-e.seriesIndex});var e,s=t[0].axisValue,a=t[0].data,i=s+"<br/><br/>";if(i+=t[0].marker+"开: "+a[1].toFixed(2)+"<br/>",i+=t[0].marker+"高: "+a[4].toFixed(2)+"<br/>",i+=t[0].marker+"低: "+a[3].toFixed(2)+"<br/>",i+=t[0].marker+"收: "+a[2].toFixed(2)+"<br/>",t.length>1){var n=t[1].data.data,o=(e=n).isBuy?3==e.flag?"翻多: +":2==e.flag?"平空: +":"开多: +":3==e.flag?"翻空: -":2==e.flag?"平多: -":"开空: -";i+=t[1].marker+o+n.volume+"@"+n.price+"<br/>"}return i}},axisPointer:{link:{xAxisIndex:"all"},label:{backgroundColor:"#777"}},grid:{left:"4%",right:"4%",bottom:"10%"},xAxis:{type:"category",data:s,scale:!0,boundaryGap:!0,axisLine:{onZero:!1},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},yAxis:{scale:!0,splitArea:{show:!0}},dataZoom:[{type:"inside",start:90,end:100},{show:!0,type:"slider",y:"95%",start:90,end:100}],series:[{name:"K线",type:"candlestick",data:a,yAxisIndex:"0",itemStyle:{normal:{color:"#ec0000",color0:"#00da3c",borderColor:"#8A0000",borderColor0:"#008F28"}},markLine:{symbol:["none","none"],data:[{name:"min line on close",type:"min",valueDim:"close"},{name:"max line on close",type:"max",valueDim:"close"}]}},{type:"graph",layout:"none",coordinateSystem:"cartesian2d",data:i,links:n,symbolSize:20,zlevel:9}]};this.kChart.setOption(l)},fmtDate:function(t){var e=t+"";return e.substr(0,4)+"."+e.substr(4,2)+"."+e.substr(6,2)},fmtProfit:function(t){return t>0?"text-danger":t<0?"text-success":""},fmtTime:function(t,e){if(e=e||!1){var s=t+"";return s.substr(2,2)+"."+s.substr(4,2)+"."+s.substr(6,2)+" "+s.substr(8,2)+":"+s.substr(10,2)+":"+s.substr(12,2)+","+s.substr(14,3)}var a=t+"";return a.substr(2,2)+"."+a.substr(4,2)+"."+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)},formatAmount:function(t,e){return t[e.property].toFixed(2)},fmtPrice:function(t){for(var e=t.toFixed(4),s=0;s<e.length&&"0"==e[e.length-1-s];s++);"."==e[e.length-1-s]&&s++;var a=e.length-s;return e.substr(0,a)},paintTrend:function(){null==this.tChart&&(this.tChart=this.$echarts.init(document.getElementById("bt_fund")));for(var t={title:{text:"净值走势"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985",formatter:function(t){var e=t.value+"";return e.substr(0,4)+"."+e.substr(4,2)+"."+e.substr(6,2)}}},formatter:function(t){if(0==t.length)return"收益曲线";var e=t[0].axisValueLabel;for(var s in t)"净值"==t[s].seriesName?e+="<br/>净值: "+t[s].value.toFixed(4):e+="<br/>"+t[s].seriesName+": "+t[s].value;return e}},grid:{top:42,left:"8",right:"8",bottom:"8",containLabel:!0},xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{textStyle:{color:"#000"},formatter:function(t,e){return(t+="").substr(0,4)+"."+t.substr(4,2)+"."+t.substr(6,2)}},axisLine:{lineStyle:{color:"#000"}}},yAxis:[{type:"value",axisLabel:{textStyle:{color:"#000"},formatter:function(t,e){return t.toFixed(4)}},axisLine:{lineStyle:{color:"#000"}},scale:!0}],series:[{name:"净值",type:"line",stack:"净值",areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(102,156,214,0.5)"},{offset:1,color:"rgba(242,242,242,0.3)"}],globalCoord:!1}}},data:[],lineStyle:{normal:{color:"rgb(102,156,214)",width:2}},itemStyle:{normal:{color:"rgb(102,156,214)",borderWidth:1}}}]},e=[],s=[],a=parseInt(this.btInfo.capital),i=this.funds.length-1;i>=0;i--){var n=this.funds[i];e.push(n.date);var o=a+n.dynbalance;s.push(o/a)}var l=Math.max.apply(null,s),r=Math.min.apply(null,s);if(l==r)l*=1.05,r*=.95;else{var c=l-r;l+=.05*c,r=Math.max(0,r-.05*c)}t.xAxis.data=e,t.series[0].data=s,t.yAxis[0].max=l,t.yAxis[0].min=r,this.tChart.setOption(t)},getClass:function(t){return t>=0?"text-danger":"text-success"}},mounted:function(){window.onresize=function(){var t=this;t.zooming||(t.zooming=!0,setTimeout(function(){t.kChart&&t.kChart.resize(),t.tChart&&t.tChart.resize(),t.zooming=!1},300))}}}),R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"100%",width:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0 44px"}},[s("el-tabs",{staticStyle:{height:"100%",margin:"0"},attrs:{value:t.selCat,"tab-position":"top"},on:{"tab-click":t.onCatSel}},[s("el-tab-pane",{attrs:{label:"绩效概览",name:"summary"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"信号分析",name:"kline"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"成交明细",name:"trd"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"信号明细",name:"sig"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"回合明细",name:"rnd"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"每日绩效",name:"fnd"}})],1)],1),t._v(" "),s("div",{staticStyle:{flex:"1",overflow:"auto",width:"100%"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"kline"==t.selCat,expression:"selCat=='kline'"}],staticStyle:{height:"100%",width:"100%",overflow:"auto"}},[t._m(0)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"summary"==t.selCat,expression:"selCat=='summary'"}],staticStyle:{height:"100%",width:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0 200px",width:"100%"}},[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("回测天数")]),t._v(" "),s("p",{staticClass:"panel-val text-info"},[t._v(t._s(t.btInfo?t.btInfo.perform.days:0)+"天")])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("开始时间")]),t._v(" "),s("p",{staticClass:"panel-val text-info"},[t._v(t._s(t.btInfo?t.fmtBtTime(t.btInfo.state.stime):"-"))])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("结束时间")]),t._v(" "),s("p",{staticClass:"panel-val text-info"},[t._v(t._s(t.btInfo?t.fmtBtTime(t.btInfo.state.etime):"-"))])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("初始资金")]),t._v(" "),s("p",{staticClass:"panel-val text-info"},[t._v(t._s(t.btInfo?t.btInfo.capital.toFixed(1):0))])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("总收益率")]),t._v(" "),s("p",{staticClass:"panel-val",class:t.getClass(t.btInfo?t.btInfo.perform.total_return:0)},[t._v(t._s(t.btInfo?t.btInfo.perform.total_return.toFixed(2):"0.00")+"%")])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("胜率")]),t._v(" "),s("p",{staticClass:"panel-val text-danger"},[t._v(t._s(t.btInfo?t.btInfo.perform.win_rate.toFixed(2):"0.00")+"%")])])])],1),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("年化收益率")]),t._v(" "),s("p",{staticClass:"panel-val",class:t.getClass(t.btInfo?t.btInfo.perform.annual_return:0)},[t._v(t._s(t.btInfo?t.btInfo.perform.annual_return.toFixed(2):"0.00")+"%")])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("最大回撤")]),t._v(" "),s("p",{staticClass:"panel-val text-success"},[t._v(t._s(t.btInfo?t.btInfo.perform.max_falldown.toFixed(2):"0.00")+"%")])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("最大盈利")]),t._v(" "),s("p",{staticClass:"panel-val text-danger"},[t._v(t._s(t.btInfo?t.btInfo.perform.max_profratio.toFixed(2):"0.00")+"%")])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("夏普率")]),t._v(" "),s("p",{staticClass:"panel-val text-info"},[t._v(t._s(t.btInfo?t.btInfo.perform.sharpe_ratio.toFixed(2):"0.00"))])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("索提诺比率")]),t._v(" "),s("p",{staticClass:"panel-val text-info"},[t._v(t._s(t.btInfo?t.btInfo.perform.sortino_ratio.toFixed(2):"0.00"))])])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-tag"},[t._v("卡尔玛比率")]),t._v(" "),s("p",{staticClass:"panel-val text-info"},[t._v(t._s(t.btInfo?t.btInfo.perform.calmar_ratio.toFixed(2):"0.00"))])])])],1)],1),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),t._m(1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"sig"==t.selCat,expression:"selCat=='sig'"},{name:"loading",rawName:"v-loading",value:t.loading.signal,expression:"loading.signal"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",stripe:"",data:t.signals}},[s("el-table-column",{attrs:{prop:"code",label:"品种",width:"120",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{prop:"target",label:"目标数量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.fmtProfit(e.row.target)},[t._v(t._s(e.row.target))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"触发价格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtPrice(e.row.sigprice)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"触发时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtTime(e.row.gentime,!0)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"tag",label:"标记",sortable:"",width:"180"}})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"rnd"==t.selCat,expression:"selCat=='rnd'"},{name:"loading",rawName:"v-loading",value:t.loading.round,expression:"loading.round"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",stripe:"",data:t.rounds}},[s("el-table-column",{attrs:{prop:"code",label:"品种",width:"120",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{label:"方向",width:"64"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:"LONG"==e.row.direct?"text-danger":"text-success"},[t._v(t._s("LONG"==e.row.direct?"多":"空"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"开仓时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtTime(e.row.opentime)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"开仓价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtPrice(e.row.openprice)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"平仓时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtTime(e.row.closetime)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"平仓价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtPrice(e.row.closeprice)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"qty",label:"数量",width:"64"}}),t._v(" "),s("el-table-column",{attrs:{label:"盈亏",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.profit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.profit.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"潜在盈利",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"text-danger"},[t._v(t._s(e.row.maxprofit.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"潜在亏损",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"text-success"},[t._v(t._s(e.row.maxloss.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"entertag",label:"进场标记",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"exittag",label:"出场标记",width:"100"}})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"fnd"==t.selCat,expression:"selCat=='fnd'"},{name:"loading",rawName:"v-loading",value:t.loading.fund,expression:"loading.fund"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",stripe:"",data:t.funds}},[s("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtDate(e.row.date)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"平仓盈亏",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.closeprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.closeprofit.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"浮动盈亏",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.dynprofit>=0?"text-danger":"text-success"},[t._v(t._s(e.row.dynprofit.toFixed(1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"fee",label:"手续费",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"dynbalance",label:"动态权益",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.dynbalance>=0?"text-danger":"text-success"},[t._v(t._s(e.row.dynbalance.toFixed(1)))])]}}])})],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"trd"==t.selCat,expression:"selCat=='trd'"},{name:"loading",rawName:"v-loading",value:t.loading.trade,expression:"loading.trade"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",stripe:"",data:t.trades,"summary-method":t.getTrdSum,"show-summary":""}},[s("el-table-column",{attrs:{prop:"code",label:"品种",width:"120",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{label:"时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtTime(e.row.time)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"动作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:"开多"==e.row.action||"平空"==e.row.action?"text-danger":"text-success"},[t._v(t._s(e.row.action))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtPrice(e.row.price)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"volume",label:"数量",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"tag",label:"标记",sortable:""}})],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%",width:"100%"},attrs:{id:"bt_kline"}},[e("p",[this._v("这里绘制K线和信号列表")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"1",width:"100%"}},[e("div",{staticStyle:{height:"100%",width:"100%"}},[e("div",{staticStyle:{height:"100%",width:"100%"},attrs:{id:"bt_fund"}},[e("p",[this._v("这里绘制每日收益曲线")])])])])}]};var Z=s("VU/8")(q,R,!1,function(t){s("M8kv")},"data-v-17d6f230",null).exports,V={name:"Backtest",components:{codemirror:j.codemirror,BTComp:Z},data:function(){var t=this;return{btConfig:{startTime:(new Date).addDays(-92),endTime:new Date,capital:5e5,slippage:0},pickerOption:{format:"yyyy-MM-dd HH:mm"},selData:"editor",strategies:[],strasOnWay:!1,showBTCfg:!1,curStra:null,curBT:null,backtests:[],edit:!1,content:"",content_bak:"",cmOptions:{mode:"python",keyMap:"sublime",lineNumbers:!0,smartIndent:!0,indentUnit:4,indentWithTabs:!1,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],foldGutter:!0,autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,theme:"ayu-dark",extraKeys:{"Ctrl-S":function(){t.onSaveCode()}}}}},methods:{fmtTime:function(t){return(t+="").substr(0,4)+"."+t.substr(4,2)+"."+t.substr(6,2)+" "+t.substr(8,2)+":"+t.substr(10,2)},onDelBacktest:function(t){var e=this;100==t.progress?this.$confirm("确定要删除该回测记录吗","删除回测",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$api.delBacktest(t.id,function(s){if(s.result<0)e.$message.error("回测任务删除失败:"+s.message);else{e.$message({message:"回测任务删除成功",type:"success"});for(var a=0;a<e.backtests.length;a++)if(e.backtests[a].id==t.id){e.backtests.splice(a,1);break}}})}).catch(function(){}):this.$message({message:"回测任务尚未结束，无法删除",type:"danger"})},onViewBacktest:function(t){this.curBT=t,this.selData="backtest"},onAddStrategy:function(){var t=this;this.$prompt("请输入策略名称","新建策略",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){t.$api.addBtStrategy(e.value,function(e){e.result<0?t.$message.error("新建策略失败:"+e.message):t.strategies.push(e.strategy)})}).catch(function(){})},onRunBacktest:function(t){var e=this;this.$confirm("确定要启动回测任务吗","启动回测",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var t=e.curStra.id,s=e.btConfig.startTime.format("yyyyMMdd"),a=e.btConfig.endTime.format("yyyyMMdd"),i=e.btConfig.capital,n=e.btConfig.slippage;e.$api.runBacktest(t,s,a,i,n,function(t){t.result<0?e.$message.error("回测任务启动失败:"+t.message):(e.$message({message:"回测任务启动成功",type:"success"}),e.backtests.push(t.backtest)),e.showBTCfg=!1})}).catch(function(){})},onSaveCode:function(t){var e=this;null!=this.curStra&&this.content!=this.content_bak&&this.$api.commitBtStraCode(this.curStra.id,this.content,function(t){t.result<0?e.$message.error("策略代码提交失败:"+t.message):(e.$message({message:"策略代码保存成功",type:"success"}),e.content_bak=e.content)})},onDelStrategy:function(t){var e=this;this.$confirm("确定要删除该策略吗","删除策略",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){e.$api.delBtStrategy(t,function(t){t.result<0?e.$message.error("删除策略失败:"+t.message):(e.$message.success("删除策略成功"),e.refreshStras())})}).catch(function(){})},onRefreshStrategy:function(){this.refreshStras()},onOpenStrategy:function(t){var e=this;this.curStra=t,this.$api.getBtStraCode(t.id,function(t){t.result<0?e.$message.error("拉取策略代码失败:"+t.message):(e.content_bak=t.content,e.content=t.content)}),this.$api.getBacktests(t.id,function(t){t.result<0?e.$message.error("拉取策略回测记录失败:"+t.message):e.backtests=t.backtests})},handleClickTab:function(t,e){this.selData=t.name},onClickCancel:function(){var t=this;this.content!=this.content_bak?this.$confirm("内容已被修改，确定要放弃修改吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.content=t.content_bak,t.cmOptions.readOnly=!0,t.edit=!1}).catch(function(){}):(this.content=this.content_bak,this.cmOptions.readOnly=!0,this.edit=!1)},onClickCommit:function(){var t=this;null!=this.curStra&&this.content!=this.content_bak&&(this.loading=!0,this.$api.commitBtStraCode(this.curStra.id,this.content,function(e){e.result<0?t.$message.error("策略代码提交失败:"+e.message):t.$message({message:"策略代码提交成功",type:"success"}),t.edit=!1,t.cmOptions.readOnly=!0,t.loading=!1}))},refreshStras:function(){var t=this;this.strasOnWay=!0,this.$api.getBtStrategies(function(e){e.result<0?t.$message.error("拉取策略列表失败:"+e.message):t.strategies=e.strategies,t.strasOnWay=!1})}},mounted:function(){var t=this;this.$nextTick(function(){setTimeout(function(){t.refreshStras()},300)})}},J={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{height:"100%",width:"100%"}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"row"}},[s("div",{staticStyle:{height:"100%",flex:"0 320px"}},[s("div",{staticStyle:{display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0 40px",display:"flex","flex-direction":"row"}},[t._m(0),t._v(" "),s("div",{staticStyle:{flex:"1","border-bottom":"1px solid #343435","margin-top":"10px","margin-right":"6px"}},[s("el-tooltip",{staticStyle:{float:"right"},attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("刷新列表")]),t._v(" "),s("i",{staticClass:"el-icon-refresh button btn-mini",staticStyle:{float:"right"},on:{click:t.onRefreshStrategy}})]),t._v(" "),s("el-tooltip",{staticStyle:{float:"right"},attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("新建策略")]),t._v(" "),s("i",{staticClass:"el-icon-plus button btn-mini",staticStyle:{float:"right"},on:{click:t.onAddStrategy}})])],1)]),t._v(" "),s("div",{staticStyle:{flex:"1 1"}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.strasOnWay,expression:"strasOnWay"}],staticClass:"stra-list",staticStyle:{overflow:"auto"}},t._l(t.strategies,function(e,a){return s("div",{key:a,staticClass:"stra-item"},[s("el-row",{staticClass:"stra-line"},[s("i",{staticClass:"el-icon-cpu"}),t._v(" "),s("span",{staticClass:"stra-title"},[t._v(t._s(e.name))]),t._v(" "),s("el-tooltip",{staticStyle:{float:"right"},attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("删除策略")]),t._v(" "),s("i",{staticClass:"el-icon-delete button",staticStyle:{float:"right"},on:{click:function(s){return t.onDelStrategy(e.id)}}})]),t._v(" "),s("el-tooltip",{staticStyle:{float:"right"},attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("查看策略")]),t._v(" "),s("i",{staticClass:"el-icon-view button",staticStyle:{float:"right"},on:{click:function(s){return t.onOpenStrategy(e)}}})])],1),t._v(" "),s("el-row",{staticClass:"stra-line"},[s("el-col",{attrs:{span:12}},[s("span",{staticClass:"stra-label"},[t._v("年化：")]),t._v(" "),s("span",{staticClass:"stra-return"},[t._v(t._s(e.perform.annual_return.toFixed(2))+"%")])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("span",{staticClass:"stra-label"},[t._v("最大回撤：")]),t._v(" "),s("span",{staticClass:"stra-mdd"},[t._v(t._s(e.perform.max_falldown.toFixed(2))+"%")])])],1)],1)}),0)])])]),t._v(" "),s("div",{staticStyle:{height:"100%","border-left":"1px solid #393939",flex:"1 0"}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0 44px",margin:"2px 4px 0px 4px"}},[s("el-tabs",{staticClass:"grp_tabs",staticStyle:{height:"100%"},attrs:{value:t.selData,type:"card"},on:{"tab-click":t.handleClickTab}},[s("el-tab-pane",{attrs:{label:"策略查看",name:"editor"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"回测详情",name:"backtest"}})],1)],1),t._v(" "),s("div",{staticStyle:{flex:"1",overflow:"auto",margin:"-4px 0 0 4px",padding:"6px 0 0 6px",border:"1px solid #393939"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"editor"==t.selData,expression:"selData=='editor'"}],staticStyle:{height:"100%",width:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"2",width:"100%",overflow:"auto"}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0"}},[s("span",{staticStyle:{color:"gray"}},[t._v("快捷操作：")]),t._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("提交代码")]),t._v(" "),s("i",{staticClass:"el-icon-upload2 toolbar",on:{click:function(e){return t.onClickCommit()}}})]),t._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("放弃修改")]),t._v(" "),s("i",{staticClass:"el-icon-refresh-left toolbar",on:{click:function(e){return t.onClickCancel()}}})]),t._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("启动回测")]),t._v(" "),s("i",{staticClass:"el-icon-video-play toolbar",on:{click:function(e){t.showBTCfg=!0}}})]),t._v(" "),s("span",{staticStyle:{color:"gray",float:"right"}},[t._v("当前策略:"+t._s(t.curStra?t.curStra.name:""))])],1),t._v(" "),s("div",{staticStyle:{flex:"1",overflow:"auto",margin:"20px",border:"1px solid gray","border-radius":"2px"}},[s("div",{staticStyle:{height:"100%"}},[s("div",{staticStyle:{height:"100%"}},[s("codemirror",{ref:"mycode",staticStyle:{height:"100% !important"},attrs:{options:t.cmOptions},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])])])]),t._v(" "),s("div",{staticClass:"divider"}),t._v(" "),s("div",{staticStyle:{flex:"1",overflow:"auto"}},[s("div",{staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"",stripe:"",data:t.backtests}},[s("el-table-column",{attrs:{prop:"runtime",label:"回测时间",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{label:"开始时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtTime(e.row.state.stime)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"结束时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.fmtTime(e.row.state.etime)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"累计收益率%",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.perform.total_return.toFixed(2)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"年化收益率%",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.perform.annual_return.toFixed(2)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"最大回撤%",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.perform.max_falldown.toFixed(2)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"夏普率",width:"72"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.perform.sharpe_ratio.toFixed(2)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"卡尔玛比率",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.perform.calmar_ratio.toFixed(2)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"回测进度"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("el-progress",{attrs:{percentage:t.row.state.progress,color:"#409eff"}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"耗时s",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s((e.row.state.elapse/1e9).toFixed(2)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("删除该回测记录")]),t._v(" "),s("i",{staticClass:"el-icon-delete btopt-btn",on:{click:function(s){return t.onDelBacktest(e.row)}}})]),t._v(" "),s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v("查看回测详情")]),t._v(" "),s("i",{staticClass:"el-icon-view btopt-btn",on:{click:function(s){return t.onViewBacktest(e.row)}}})])]}}])})],1)],1)])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"backtest"==t.selData,expression:"selData=='backtest'"}],staticStyle:{height:"100%",width:"100%"}},[s("BTComp",{staticStyle:{height:"100%"},attrs:{btInfo:t.curBT,straInfo:t.curStra}})],1)])])])]),t._v(" "),s("el-dialog",{attrs:{title:"回测配置",visible:t.showBTCfg,width:"300px"},on:{"update:visible":function(e){t.showBTCfg=e}}},[s("el-row",{staticStyle:{margin:"8px 0"}},[s("el-col",{attrs:{span:8}},[s("span",[t._v("开始时间：")])]),t._v(" "),s("el-col",{attrs:{span:16}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",format:"yyyy-MM-dd",placeholder:"选择开始时间"},model:{value:t.btConfig.startTime,callback:function(e){t.$set(t.btConfig,"startTime",e)},expression:"btConfig.startTime"}})],1)],1),t._v(" "),s("el-row",{staticStyle:{margin:"8px 0"}},[s("el-col",{attrs:{span:8}},[s("span",[t._v("结束时间：")])]),t._v(" "),s("el-col",{attrs:{span:16}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",format:"yyyy-MM-dd",placeholder:"选择结束时间"},model:{value:t.btConfig.endTime,callback:function(e){t.$set(t.btConfig,"endTime",e)},expression:"btConfig.endTime"}})],1)],1),t._v(" "),s("el-row",{staticStyle:{margin:"8px 0"}},[s("el-col",{attrs:{span:8}},[s("span",[t._v("初始资金：")])]),t._v(" "),s("el-col",{attrs:{span:16}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini",min:1e5,max:2e6,step:1e4,label:"初始资金"},model:{value:t.btConfig.capital,callback:function(e){t.$set(t.btConfig,"capital",e)},expression:"btConfig.capital"}})],1)],1),t._v(" "),s("el-row",{staticStyle:{margin:"8px 0"}},[s("el-col",{attrs:{span:8}},[s("span",[t._v("价格滑点：")])]),t._v(" "),s("el-col",{attrs:{span:16}},[s("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini",min:0,max:20,label:"价格滑点"},model:{value:t.btConfig.slippage,callback:function(e){t.$set(t.btConfig,"slippage",e)},expression:"btConfig.slippage"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:t.onRunBacktest}},[t._v("启动")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"simtab",staticStyle:{flex:"0"}},[e("span",{staticStyle:{color:"#FFFFFF"}},[this._v("我的策略")])])}]};var H=s("VU/8")(V,J,!1,function(t){s("EKW2"),s("GSMS")},"data-v-9281519c",null).exports,K=s("fZjL"),X=s.n(K),tt={name:"Schedule",components:{MoniforCfg:G},data:function(){return{selCat:"list",showfolders:!1,selfolder:"",loading:!1,committing:!1,addApp:!1,monitors:[],logs:"",logLines:0,logOnway:!1,curMonCfg:{id:"",folder:"",path:"",param:"",type:0,span:3,guard:!1,redirect:!1,schedule:{active:!1,weekflag:"0111110",weekmask:[!1,!0,!0,!0,!0,!0,!1],tasks:[{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0}]}}}},methods:{handleClickTab:function(t,e){this.selCat=t.name,"logs"==t.name&&this.queryLogs()},onCfgUpdated:function(){this.queryData()},handleSelectApp:function(t){console.log(t);var e=JSON.parse(w()(t));e.schedule.weekmask=[];for(var s=0;s<e.schedule.weekflag.length;s++)e.schedule.weekmask.push("1"==e.schedule.weekflag[s]);for(var a=0;a<6;a++){var i=e.schedule.tasks[a].time+"";1==i.length?e.schedule.tasks[a].time="00:0"+i:2==i.length?e.schedule.tasks[a].time="00:"+i:3==i.length?e.schedule.tasks[a].time="0"+i[0]+":"+i.substr(1):e.schedule.tasks[a].time=i.substr(0,2)+":"+i.substr(2)}this.curMonCfg=e},resetConf:function(){this.curMonCfg={id:"",folder:"",path:"",param:"",span:3,guard:!1,redirect:!1,schedule:{active:!1,weekflag:"0111110",weekmask:[!1,!0,!0,!0,!0,!0,!1],tasks:[{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0},{active:!1,time:"00:00",action:0}]}}},queryLogs:function(){var t=this,e=this;e.logOnway=!0,this.$api.getMonLogs(function(s){s.result<0?t.$alert(s.message):(t.logs=s.content,t.logLines=s.lines||0,e.$nextTick(function(){var t=e.$refs.logs.scrollHeight;e.$refs.logs.scrollTo(0,t)})),e.logOnway=!1})},queryData:function(){var t=this;t.resetConf(),t.loading=!0,setTimeout(function(){t.$api.getMonApps(function(e){if(e.result<0)t.$message.error(e.message);else{for(var s=[],a=X()(e.schedules),i=0;i<a.length;i++){var n=a[i],o=e.schedules[n];o.state=o.running?"运行中":"未启动",o.guardstr=o.guard?"是":"否",o.task=o.schedule.active?"是":"否",s.push(o)}t.monitors=s}t.loading=!1})},300)},handleAppCommand:function(t){var e=this,s=this;"add"==t?(this.resetConf(),this.addApp=!0):"del"==t?this.$confirm("确定要删除该调度任务吗?","调度管理",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delApp(s.curMonCfg.id,function(t){if(t.result<0)s.$alert(t.message);else for(var e=0;e<s.monitors.length;e++)if(s.monitors[e].id==s.curMonCfg.id){s.monitors.splice(e,1),e;break}})}):"refresh"==t?this.queryData():"start"==t?this.$api.startApp(this.curMonCfg.id,function(t){if(t.result<0)e.$message.error(t.message);else for(var s=0;s<e.monitors.length;s++)if(e.monitors[s].id==e.curMonCfg.id){e.monitors[s].state="运行中",e.monitors[s].running=!0;break}}):"stop"==t&&this.$api.stopApp(this.curMonCfg.id,function(t){if(t.result<0)e.$message.error(t.message);else for(var s=0;s<e.monitors.length;s++)if(e.monitors[s].id==e.curMonCfg.id){e.monitors[s].state="未启动",e.monitors[s].running=!1;break}})}},mounted:function(){var t=this;this.$nextTick(function(){t.queryData(),t.queryLogs()})}},et={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bgc1d",staticStyle:{height:"100%",width:"100%","padding-top":"5px"}},[s("el-row",{staticStyle:{height:"100%"}},[s("el-col",{staticStyle:{height:"100%"},attrs:{span:16}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0",margin:"2px 4px 0px 4px","min-height":"39px",display:"flex","flex-direction":"row","margin-bottom":"-0.78em"}},[s("div",{staticStyle:{flex:"0",height:"100%"}},[s("el-tabs",{staticClass:"grp_tabs",staticStyle:{height:"100%",margin:"0"},attrs:{value:t.selCat,type:"card","tab-position":"top"},on:{"tab-click":t.handleClickTab}},[s("el-tab-pane",{attrs:{label:"调度列表",name:"list"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"调度日志",name:"logs"}})],1)],1),t._v(" "),s("div",{staticClass:"mgr-groupdown",staticStyle:{flex:"1","margin-top":"6px",height:"34px"}},[s("el-dropdown",{staticStyle:{float:"right"},attrs:{"split-button":"",size:"mini",trigger:"click"},on:{command:t.handleAppCommand}},[s("i",{staticClass:"el-icon-edit-outline"}),t._v("管理\n                                "),s("el-dropdown-menu",{staticClass:"option-bg",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{staticClass:"font-color-CF",attrs:{command:"add"}},[s("i",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加应用")]),t._v(" "),s("el-dropdown-item",{staticClass:"font-color-CF",attrs:{command:"del"}},[s("i",{staticClass:"el-icon-delete"}),t._v("删除应用")]),t._v(" "),s("el-dropdown-item",{staticClass:"font-color-CF",attrs:{command:"refresh"}},[s("i",{staticClass:"el-icon-refresh"}),t._v("刷新列表")]),t._v(" "),s("el-dropdown-item",{staticClass:"text-success",attrs:{command:"start"}},[s("i",{staticClass:"el-icon-video-play"}),t._v("启动应用")]),t._v(" "),s("el-dropdown-item",{staticClass:"text-danger",attrs:{command:"stop"}},[s("i",{staticClass:"el-icon-switch-button"}),t._v("停止应用")])],1)],1)],1)]),t._v(" "),s("div",{staticStyle:{flex:"1",margin:"10px 4px",height:"100%"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"logs"==t.selCat,expression:"selCat=='logs'"},{name:"loading",rawName:"v-loading",value:t.logOnway,expression:"logOnway"}],staticStyle:{height:"100%"}},[s("textarea",{ref:"logs",staticClass:"el-textarea__inner",attrs:{readonly:"readonly",autocomplete:"off",placeholder:"这里是日志内容"},domProps:{value:t.logs}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"list"==t.selCat,expression:"selCat=='list'"}],staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table",attrs:{border:"","cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},data:t.monitors,"highlight-current-row":""},on:{"current-change":t.handleSelectApp}},[s("el-table-column",{attrs:{label:"名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("i",{class:e.row.group?"el-icon-data-analysis":"el-icon-monitor"}),t._v(" "),s("a",{staticStyle:{"padding-left":"8px"}},[t._v(t._s(e.row.id))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.running?"text-success":"text-danger"},[t._v(t._s(e.row.state))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"内存",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(((e.row.memory||0)/1024/1024).toFixed(2))+"M")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"守护",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:"是"==e.row.guard?"text-success":"text-danger"},[t._v(t._s(e.row.guardstr))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"任务",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:"是"==e.row.task?"text-success":"text-danger"},[t._v(t._s(e.row.task))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"参数",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticStyle:{color:"#F5A447"}},[t._v(t._s(e.row.param))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"间隔(s)",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-aqua"},[t._v(t._s(e.row.span))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"path",label:"路径"}}),t._v(" "),s("el-table-column",{attrs:{prop:"folder",label:"目录"}})],1)],1)])])]),t._v(" "),s("el-col",{staticClass:"main-right-bg",attrs:{span:8}},[s("MoniforCfg",{attrs:{config:t.curMonCfg,fixinfo:!t.addApp,forapp:0==t.curMonCfg.type},on:{cfgudt:t.onCfgUpdated}})],1)],1)],1)},staticRenderFns:[]};var st=s("VU/8")(tt,et,!1,function(t){s("ieHM")},"data-v-17b1cada",null).exports,at={name:"Login",computed:f()({},Object(p.b)(["groups"])),data:function(){return{users:[],actions:[],curUser:{loginid:"",name:"",remark:"",role:"admin",passwd:"",iplist:"",products:[]},daterange:[],showUserDlg:!1,addUser:!0,loading_user:!1}},methods:{handleSelectUser:function(t){this.curUser=JSON.parse(w()(t))},handleDtRangeChange:function(){},onClickQryActions:function(){var t=this;0==this.daterange.length&&this.$alert("请选选择日期范围");var e=this.daterange[0].format("yyyy-MM-dd 00:00:00"),s=this.daterange[1].format("yyyy-MM-dd 23:59:59");this.$api.getActions(e,s,function(e){e.result>=0&&(t.actions=e.actions)})},onCommitUser:function(){var t=this;this.$api.commitUser(this.curUser,this.addUser?"add":"mod",function(e){e.result<0?t.$notify.error(e.message):(t.$notify({message:"用户信息提交成功",type:"success"}),t.showUserDlg=!1,t.queryUsers())})},queryUsers:function(){var t=this;this.loading_user=!0,this.$api.getUsers(function(e){e.result>=0?t.users=e.users:t.$notify.error(e.message),t.loading_user=!1})},handleUserCmd:function(t){var e=this;if("add"==t)this.curUser={loginid:"",name:"",remark:"",role:"admin",passwd:"",iplist:"",products:[]},this.addUser=!0,this.showUserDlg=!0;else if("mod"==t){if(""==this.curUser.loginid)return void this.$alert("请选择要修改的用户");this.curUser.passwd="********",this.addUser=!1,this.showUserDlg=!0}else if("del"==t){if(""==this.curUser.loginid)return void this.$alert("请选择要删除的用户");this.$confirm("确定要删除用户"+this.curUser.loginid+"吗?","删除用户",{confirmButtonText:"确定",cancelButtonText:"取消",type:"danger"}).then(function(){e.$api.delUser(e.curUser.loginid,function(t){t.result<0?e.$notify.error(t.message):(e.$notify({message:"用户已删除",type:"success"}),e.queryUsers())})})}else if("reset"==t){if(""==this.curUser.loginid)return void this.$alert("请选择要重置密码的用户");this.$prompt("请输入新的密码","重置密码",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then(function(t){var s=t.value;e.$confirm("确定要重置用户"+e.curUser.loginid+"的密码吗?","重置密码",{confirmButtonText:"确定",cancelButtonText:"取消",type:"danger"}).then(function(){e.$api.resetpwd(e.curUser.loginid,s,function(t){t.result<0?e.$notify.error(t.message):e.$notify({message:"密码重置成功",type:"success"})})})}).catch(function(){})}else"refresh"==t&&this.queryUsers()}},mounted:function(){var t=this;this.$nextTick(function(){t.queryUsers()})}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bgc1d",staticStyle:{height:"100%",width:"100%","margin-top":"5px"}},[s("el-row",{staticStyle:{height:"100%"}},[s("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0",margin:"2px 4px 0px 4px","min-height":"39px",display:"flex","flex-direction":"row","margin-bottom":"-0.9em"}},[s("div",{staticClass:"simtab",staticStyle:{flex:"0"}},[s("span",[t._v("用户列表")])]),t._v(" "),s("div",{staticClass:"mgr-groupdown",staticStyle:{flex:"1","margin-top":"6px"}},[s("el-dropdown",{staticStyle:{float:"right"},attrs:{"split-button":"",type:"danger",size:"mini",trigger:"click"},on:{command:t.handleUserCmd}},[s("i",{staticClass:"el-icon-edit-outline"}),t._v("管理\n                                "),s("el-dropdown-menu",{staticClass:"option-bg",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{staticClass:"font-nomal",attrs:{command:"add"}},[s("i",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加用户")]),t._v(" "),s("el-dropdown-item",{staticClass:"font-nomal",attrs:{command:"mod"}},[s("i",{staticClass:"el-icon-edit-outline"}),t._v("修改用户")]),t._v(" "),s("el-dropdown-item",{staticClass:"font-nomal",attrs:{command:"del"}},[s("i",{staticClass:"el-icon-delete"}),t._v("删除用户")]),t._v(" "),s("el-dropdown-item",{staticClass:"font-nomal",attrs:{command:"reset"}},[s("i",{staticClass:"el-icon-switch-button"}),t._v("重置密码")]),t._v(" "),s("el-dropdown-item",{staticClass:"font-nomal",attrs:{command:"refresh"}},[s("i",{staticClass:"el-icon-refresh"}),t._v("刷新数据")])],1)],1)],1)]),t._v(" "),s("div",{staticStyle:{flex:"1",margin:"10px 4px",height:"100%"}},[s("div",{staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_user,expression:"loading_user"}],staticClass:"table",attrs:{border:"","cell-style":{color:"#FFFFFF"},"header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},data:t.users,"highlight-current-row":""},on:{"update:data":function(e){t.users=e},"current-change":t.handleSelectUser}},[s("el-table-column",{attrs:{prop:"loginid",label:"登录名",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"createtime",label:"创建时间",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"createby",label:"创建人",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"modifytime",label:"修改时间",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"modifyby",label:"修改人",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1)])])]),t._v(" "),s("el-col",{staticClass:"left-line",staticStyle:{height:"100%"},attrs:{span:12}},[s("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[s("div",{staticStyle:{flex:"0",margin:"2px 4px 0px 4px","min-height":"39px",display:"flex","flex-direction":"row","margin-bottom":"-0.9em"}},[s("div",{staticClass:"simtab",staticStyle:{flex:"0"}},[s("span",[t._v("操作日志")])]),t._v(" "),s("div",{staticClass:"dark-picker",staticStyle:{flex:"1","margin-top":"6px"}},[s("el-row",{staticStyle:{height:"100%"}},[s("el-col",{attrs:{span:12,offset:9}},[s("el-date-picker",{staticStyle:{float:"right"},attrs:{type:"daterange",align:"right",size:"mini","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.handleDtRangeChange},model:{value:t.daterange,callback:function(e){t.daterange=e},expression:"daterange"}})],1),t._v(" "),s("el-col",{attrs:{span:3}},[s("el-button",{staticClass:"wt-btn-Refresh",staticStyle:{float:"right"},attrs:{icon:"el-icon-refresh",size:"mini",plain:""},on:{click:t.onClickQryActions}},[t._v("刷新")])],1)],1)],1)]),t._v(" "),s("div",{staticStyle:{flex:"1",margin:"10px 4px",height:"100%"}},[s("div",{staticStyle:{"max-height":"100%",overflow:"auto"}},[s("el-table",{staticClass:"table",attrs:{border:"","header-cell-style":{background:"linear-gradient(360deg, #010101 0%, #232323 100%)",color:"#97979E"},"cell-style":{color:"#FFFFFF"},data:t.actions}},[s("el-table-column",{attrs:{prop:"loginid",label:"登录名",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"actiontime",label:"操作时间",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"actionip",label:"来源IP",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"action",label:"类型",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1)])])])],1),t._v(" "),s("el-dialog",{staticClass:"dialog-user",attrs:{title:t.addUser?"添加用户":"修改用户",visible:t.showUserDlg,width:"25%"},on:{"update:visible":function(e){t.showUserDlg=e}}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("登录名：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{size:"mini",disabled:!t.addUser},model:{value:t.curUser.loginid,callback:function(e){t.$set(t.curUser,"loginid",e)},expression:"curUser.loginid"}})],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("用户姓名：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{size:"mini"},model:{value:t.curUser.name,callback:function(e){t.$set(t.curUser,"name",e)},expression:"curUser.name"}})],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("用户类型：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-tooltip",{attrs:{effect:"dark",content:"拥有全部的管理权限",placement:"top-start"}},[s("el-radio",{attrs:{label:"admin"},model:{value:t.curUser.role,callback:function(e){t.$set(t.curUser,"role",e)},expression:"curUser.role"}},[t._v("管理员")])],1),t._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"拥有风控权限",placement:"top-start"}},[s("el-radio",{attrs:{label:"risker"},model:{value:t.curUser.role,callback:function(e){t.$set(t.curUser,"role",e)},expression:"curUser.role"}},[t._v("风控员")])],1),t._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"拥有研究权限",placement:"top-start"}},[s("el-radio",{attrs:{label:"researcher"},model:{value:t.curUser.role,callback:function(e){t.$set(t.curUser,"role",e)},expression:"curUser.role"}},[t._v("研究员")])],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("登录密码：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{size:"mini",type:"password","show-password":"",disabled:!t.addUser},model:{value:t.curUser.passwd,callback:function(e){t.$set(t.curUser,"passwd",e)},expression:"curUser.passwd"}})],1)],1),t._v(" "),s("el-row",{staticStyle:{height:"60px"}},[s("el-col",{attrs:{span:6}},[s("a",[t._v("IP限制: ")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:t.curUser.iplist,callback:function(e){t.$set(t.curUser,"iplist",e)},expression:"curUser.iplist"}})],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:6}},[s("a",[t._v("组合权限: ")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-checkbox-group",{model:{value:t.curUser.products,callback:function(e){t.$set(t.curUser,"products",e)},expression:"curUser.products"}},t._l(t.groups,function(e){return s("el-checkbox",{key:e.id,staticStyle:{width:"100%"},attrs:{label:e.id}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),s("el-row",{staticStyle:{height:"60px"}},[s("el-col",{attrs:{span:6}},[s("a",[t._v("备注信息：")])]),t._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{staticStyle:{"min-height":"80px"},attrs:{type:"textarea"},model:{value:t.curUser.remark,callback:function(e){t.$set(t.curUser,"remark",e)},expression:"curUser.remark"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.onCommitUser}},[t._v("提交数据")])],1)],1)],1)},staticRenderFns:[]};var nt=s("VU/8")(at,it,!1,function(t){s("qkp2")},"data-v-74cfd8b9",null).exports;a.default.use(l.a);var ot=new l.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:u},{path:"/index",name:"Index",component:h,redirect:"/monitor",children:[{path:"/monitor",name:"monitor",component:Q},{path:"/deploy",name:"deploy",component:W},{path:"/backtest",name:"backtest",component:H},{path:"/schedule",name:"schedule",component:st},{path:"/admins",name:"admins",component:nt}]}]});a.default.use(p.a);var lt=new p.a.Store({state:{cache:{userinfo:{loginid:"",name:"",loginip:"",logintime:""},isLogined:!1,loginid:""},folders:[],groups:[]},getters:{cache:function(t){return t.cache},folders:function(t){return t.folders},groups:function(t){return t.groups}},modules:{},actions:{},mutations:{loginok:function(t,e){t.cache.userinfo=e.userinfo,t.cache.isLogined=!0,t.cache.loginid=e.loginid},logoutok:function(t){t.cache.userinfo={loginid:"",name:"",loginip:"",logintime:""},t.cache.isLogined=!1,t.cache.loginid=""},setfolders:function(t,e){t.folders=e.folders},setgroups:function(t,e){t.groups=e.groups}}}),rt=s("mtWM"),ct=s.n(rt),ut=s("aLYK"),dt=s("zL8q"),ft=s.n(dt),pt=(s("wLZQ"),s("XLwt")),mt=s.n(pt),gt=(s("vTGl"),s("woOf")),ht=s.n(gt),vt=s("pFYg"),wt=s.n(vt),yt=s("NC6I"),bt=s.n(yt);Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t},Date.prototype.addDays=function(t){var e=this.valueOf();return new Date(e+=864e5*t)},String.prototype.format=function(t){if(arguments.length>0){var e=this;if(1==arguments.length&&"object"==(void 0===t?"undefined":wt()(t)))for(var s in t){var a=new RegExp("({"+s+"})","g");e=e.replace(a,t[s])}else for(var i=0;i<arguments.length;i++){if(void 0==arguments[i])return"";var n=new RegExp("({["+i+"]})","g");e=e.replace(n,arguments[i])}return e}return this};a.default.prototype.$echarts=mt.a,a.default.config.productionTip=!1,a.default.use(ft.a),a.default.use(ut.a,ct.a);var xt=new function(){this.setItem=function(t,e){return window.localStorage.setItem(t,e)},this.getItem=function(t){return window.localStorage.getItem(t)||""},this.token=this.getItem("token"),this.removeItem=function(t){return window.localStorage.removeItem(t)},this.checkBT=function(t){a.default.axios.post("/hasbt",{}).then(function(e){200!=e.status?t({result:-9999,message:textStatus}):t(e.data)},function(e){t({result:-9999,message:e.message})})},this.login=function(t,e,s){var i={loginid:t,passwd:bt()(e)};a.default.axios.post("/mgr/login",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.modpwd=function(t,e,s){var i={oldpwd:bt()(t),newpwd:bt()(e)};a.default.axios.post("/mgr/modpwd",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.resetpwd=function(t,e,s){var i={loginid:t,passwd:bt()(e)};a.default.axios.post("/mgr/resetpwd",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getGroups=function(t){a.default.axios.post("/mgr/qrygrp",{}).then(function(e){200!=e.status?t({result:-9999,message:textStatus}):t(e.data)},function(e){t({result:-9999,message:e.message})})},this.startGroup=function(t,e){var s={groupid:t||""};a.default.axios.post("/mgr/startgrp",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.stopGroup=function(t,e){var s={groupid:t||""};a.default.axios.post("/mgr/stopgrp",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.delGroup=function(t,e){var s={groupid:t||""};a.default.axios.post("/mgr/delgrp",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getFolders=function(t){a.default.axios.post("/mgr/qrydir",{}).then(function(e){200!=e.status?t({result:-9999,message:textStatus}):t(e.data)},function(e){t({result:-9999,message:e.message})})},this.commitGroup=function(t,e,s){var i=JSON.parse(w()(t));i.groupid=t.id,i.action=e,a.default.axios.post("/mgr/addgrp",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getGroupDir=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qrygrpdir",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getGroupFile=function(t,e,s){var i={groupid:t,path:e};a.default.axios.post("/mgr/qrygrpfile",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.commitGroupFile=function(t,e,s,i){var n={groupid:t,path:e,content:s};a.default.axios.post("/mgr/cmtgrpfile",n).then(function(t){200!=t.status?i({result:-9999,message:textStatus}):i(t.data)},function(t){i({result:-9999,message:t.message})})},this.getLogs=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={id:t,type:e};a.default.axios.post("/mgr/qrylogs",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getMonCfg=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qrymon",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.commitMonCfg=function(t,e){var s=t;a.default.axios.post("/mgr/cfgmon",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getStrategies=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,type:e};a.default.axios.post("/mgr/qrystras",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getChannels=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qrychnls",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getTrades=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,strategyid:e};a.default.axios.post("/mgr/qrytrds",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getSignals=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,strategyid:e};a.default.axios.post("/mgr/qrysigs",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getRounds=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,strategyid:e};a.default.axios.post("/mgr/qryrnds",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getPositions=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,strategyid:e};a.default.axios.post("/mgr/qrypos",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getFunds=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,strategyid:e};a.default.axios.post("/mgr/qryfunds",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getChnlOrders=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,channelid:e};a.default.axios.post("/mgr/qrychnlords",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getChnlTrades=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,channelid:e};a.default.axios.post("/mgr/qrychnltrds",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getChnlPositions=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,channelid:e};a.default.axios.post("/mgr/qrychnlpos",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getChnlFunds=function(t,e,s){"function"==typeof e&&(s=e,e="");var i={groupid:t,channelid:e};a.default.axios.post("/mgr/qrychnlfund",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getUsers=function(t){a.default.axios.post("/mgr/qryusers",{}).then(function(e){200!=e.status?t({result:-9999,message:textStatus}):t(e.data)},function(e){t({result:-9999,message:e.message})})},this.commitUser=function(t,e,s){var i=ht()({},t);i.action=e||"add","********"!=i.passwd&&(i.passwd=bt()(i.passwd)),a.default.axios.post("/mgr/cmtuser",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.delUser=function(t,e){var s={loginid:t};a.default.axios.post("/mgr/deluser",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getActions=function(t,e,s){var i={sdate:t,edate:e};a.default.axios.post("/mgr/qryacts",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getPythonPath=function(t){a.default.axios.post("/mgr/qryexec",{}).then(function(e){200!=e.status?t({result:-9999,message:textStatus}):t(e.data)},function(e){t({result:-9999,message:e.message})})},this.getMonApps=function(t){a.default.axios.post("/mgr/qrymons",{}).then(function(e){200!=e.status?t({result:-9999,message:textStatus}):t(e.data)},function(e){t({result:-9999,message:e.message})})},this.startApp=function(t,e){var s={appid:t||""};a.default.axios.post("/mgr/startapp",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.stopApp=function(t,e){var s={appid:t||""};a.default.axios.post("/mgr/stopapp",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getMonLogs=function(t){a.default.axios.post("/mgr/qrymonlog",{}).then(function(e){200!=e.status?t({result:-9999,message:textStatus}):t(e.data)},function(e){t({result:-9999,message:e.message})})},this.delApp=function(t,e){var s={appid:t||""};a.default.axios.post("/mgr/delapp",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getPortPositions=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qryportpos",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getPortFunds=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qryportfunds",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getPortTrades=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qryporttrd",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getPortRounds=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qryportrnd",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getPortPerfs=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qryportperfs",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getPortFilters=function(t,e){var s={groupid:t};a.default.axios.post("/mgr/qryportfilters",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.commitPortFilters=function(t,e,s){var i={groupid:t,filters:e};a.default.axios.post("/mgr/cmtgrpfilters",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getBtStrategies=function(t){a.default.axios.post("/bt/qrystras",{}).then(function(e){200!=e.status?t({result:-9999,message:textStatus}):t(e.data)},function(e){t({result:-9999,message:e.message})})},this.addBtStrategy=function(t,e){var s={name:t};a.default.axios.post("/bt/addstra",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.delBtStrategy=function(t,e){var s={straid:t};a.default.axios.post("/bt/delstra",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getBtStraCode=function(t,e){var s={straid:t};a.default.axios.post("/bt/qrycode",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.commitBtStraCode=function(t,e,s){var i={straid:t,content:e};a.default.axios.post("/bt/setcode",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getBacktests=function(t,e){var s={straid:t};a.default.axios.post("/bt/qrystrabts",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.runBacktest=function(t,e,s,i,n,o){"function"==typeof n&&(o=n,n=0);var l={straid:t,stime:e,etime:s,capital:i,slippage:n};a.default.axios.post("/bt/runstrabt",l).then(function(t){200!=t.status?o({result:-9999,message:textStatus}):o(t.data)},function(t){o({result:-9999,message:t.message})})},this.delBacktest=function(t,e){var s={btid:t};a.default.axios.post("/bt/delstrabt",s).then(function(t){200!=t.status?e({result:-9999,message:textStatus}):e(t.data)},function(t){e({result:-9999,message:t.message})})},this.getBtSignals=function(t,e,s){var i={straid:t,btid:e};a.default.axios.post("/bt/qrybtsigs",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getBtTrades=function(t,e,s){var i={straid:t,btid:e};a.default.axios.post("/bt/qrybttrds",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getBtRounds=function(t,e,s){var i={straid:t,btid:e};a.default.axios.post("/bt/qrybtrnds",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getBtFunds=function(t,e,s){var i={straid:t,btid:e};a.default.axios.post("/bt/qrybtfunds",i).then(function(t){200!=t.status?s({result:-9999,message:textStatus}):s(t.data)},function(t){s({result:-9999,message:t.message})})},this.getBtBars=function(t,e,s,i,n){var o={code:t,period:e,stime:s,etime:i};a.default.axios.post("/bt/qrybars",o).then(function(t){200!=t.status?n({result:-9999,message:textStatus}):n(t.data)},function(t){n({result:-9999,message:t.message})})}};a.default.prototype.$api=xt,a.default.prototype.$pusher=new function(){this.on=function(t,e){this.handlers=this.handlers||{},this.handlers[t]=e},this.emit=function(t){this.handlers=this.handlers||{};var e=this.handlers[t];if(e)switch(arguments.length){case 2:e(arguments[1]);break;case 3:e(arguments[1],arguments[2]);break;case 4:e(arguments[1],arguments[2],arguments[3]);break;case 5:e(arguments[1],arguments[2],arguments[3],arguments[4]);break;case 6:e(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);break;case 7:e(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);break;default:e()}},this.send=function(t,e){this.socket&&this.socket.send(w()(e))},this.init=function(t,e){var s=this;s.timer=0,this.socket=new WebSocket(t),this.socket.onopen=function(t){s.connected=!0,s.emit("connect",t),0==s.timer&&(s.timer=setInterval(function(){s.socket.send(w()({type:"heartbeat"}))},3e4))},this.socket.onclose=function(a){s.emit("close",a),s.connected&&(s.connected=!1,setTimeout(function(){console.log("开始重连websocket:"+t),s.init(t,e)},2e3))},this.socket.onerror=function(a){s.connected||(console.log("开始重连websocket:"+t),setTimeout(function(){s.init(t,e)},2e3))},this.socket.onmessage=function(t){var e=t.data,a=JSON.parse(e);s.emit("message",a)}},this.close=function(){channel.connected=!1,this.socket.close()},this.subscribe=function(t){this.send("subscribe",{type:"subscribe",groupid:t})}},new a.default({store:lt,el:"#app",router:ot,components:{App:o},template:"<App/>"})},Unev:function(t,e,s){t.exports=s.p+"static/img/login_logo.06057c1.svg"},Yklg:function(t,e){},Yokd:function(t,e){},cNKU:function(t,e){},duJY:function(t,e){},fePL:function(t,e){},ieHM:function(t,e){},juZK:function(t,e){},qkp2:function(t,e){},tV8Q:function(t,e){},vTGl:function(t,e){},"w7/U":function(t,e){},wLZQ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5fc723073e2fadbc897d.js.map